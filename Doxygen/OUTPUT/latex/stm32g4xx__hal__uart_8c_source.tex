\doxysection{stm32g4xx\+\_\+hal\+\_\+uart.\+c}
\label{stm32g4xx__hal__uart_8c_source}\index{/home/yule/Documents/ENSEA/Ensea\_2022-\/2023/Actionneur\_et\_automatique/TP\_actionneur/TP\_actionneur/Drivers/STM32G4xx\_HAL\_Driver/Src/stm32g4xx\_hal\_uart.c@{/home/yule/Documents/ENSEA/Ensea\_2022-\/2023/Actionneur\_et\_automatique/TP\_actionneur/TP\_actionneur/Drivers/STM32G4xx\_HAL\_Driver/Src/stm32g4xx\_hal\_uart.c}}
\textbf{ Go to the documentation of this file.}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001 }
\DoxyCodeLine{00161 \textcolor{comment}{/* Includes -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{00162 \textcolor{preprocessor}{\#include "{}stm32g4xx\_hal.h"{}}}
\DoxyCodeLine{00163 }
\DoxyCodeLine{00173 \textcolor{preprocessor}{\#ifdef HAL\_UART\_MODULE\_ENABLED}}
\DoxyCodeLine{00174 }
\DoxyCodeLine{00175 \textcolor{comment}{/* Private typedef -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{00176 \textcolor{comment}{/* Private define -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{00180 \textcolor{preprocessor}{\#define USART\_CR1\_FIELDS  ((uint32\_t)(USART\_CR1\_M | USART\_CR1\_PCE | USART\_CR1\_PS | USART\_CR1\_TE | USART\_CR1\_RE | \(\backslash\)}}
\DoxyCodeLine{00181 \textcolor{preprocessor}{                                      USART\_CR1\_OVER8 | USART\_CR1\_FIFOEN)) }}
\DoxyCodeLine{00183 \textcolor{preprocessor}{\#define USART\_CR3\_FIELDS  ((uint32\_t)(USART\_CR3\_RTSE | USART\_CR3\_CTSE | USART\_CR3\_ONEBIT | USART\_CR3\_TXFTCFG | \(\backslash\)}}
\DoxyCodeLine{00184 \textcolor{preprocessor}{                                      USART\_CR3\_RXFTCFG)) }}
\DoxyCodeLine{00186 \textcolor{preprocessor}{\#define LPUART\_BRR\_MIN  0x00000300U  }\textcolor{comment}{/* LPUART BRR minimum authorized value */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00187 \textcolor{preprocessor}{\#define LPUART\_BRR\_MAX  0x000FFFFFU  }\textcolor{comment}{/* LPUART BRR maximum authorized value */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00188 }
\DoxyCodeLine{00189 \textcolor{preprocessor}{\#define UART\_BRR\_MIN    0x10U        }\textcolor{comment}{/* UART BRR minimum authorized value */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00190 \textcolor{preprocessor}{\#define UART\_BRR\_MAX    0x0000FFFFU  }\textcolor{comment}{/* UART BRR maximum authorized value */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00195 \textcolor{comment}{/* Private macros -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{00196 \textcolor{comment}{/* Private function prototypes -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{00200 \textcolor{keyword}{static} \textcolor{keywordtype}{void} UART\_EndTxTransfer(UART\_HandleTypeDef *huart);}
\DoxyCodeLine{00201 \textcolor{keyword}{static} \textcolor{keywordtype}{void} UART\_EndRxTransfer(UART\_HandleTypeDef *huart);}
\DoxyCodeLine{00202 \textcolor{keyword}{static} \textcolor{keywordtype}{void} UART\_DMATransmitCplt(DMA\_HandleTypeDef *hdma);}
\DoxyCodeLine{00203 \textcolor{keyword}{static} \textcolor{keywordtype}{void} UART\_DMAReceiveCplt(DMA\_HandleTypeDef *hdma);}
\DoxyCodeLine{00204 \textcolor{keyword}{static} \textcolor{keywordtype}{void} UART\_DMARxHalfCplt(DMA\_HandleTypeDef *hdma);}
\DoxyCodeLine{00205 \textcolor{keyword}{static} \textcolor{keywordtype}{void} UART\_DMATxHalfCplt(DMA\_HandleTypeDef *hdma);}
\DoxyCodeLine{00206 \textcolor{keyword}{static} \textcolor{keywordtype}{void} UART\_DMAError(DMA\_HandleTypeDef *hdma);}
\DoxyCodeLine{00207 \textcolor{keyword}{static} \textcolor{keywordtype}{void} UART\_DMAAbortOnError(DMA\_HandleTypeDef *hdma);}
\DoxyCodeLine{00208 \textcolor{keyword}{static} \textcolor{keywordtype}{void} UART\_DMATxAbortCallback(DMA\_HandleTypeDef *hdma);}
\DoxyCodeLine{00209 \textcolor{keyword}{static} \textcolor{keywordtype}{void} UART\_DMARxAbortCallback(DMA\_HandleTypeDef *hdma);}
\DoxyCodeLine{00210 \textcolor{keyword}{static} \textcolor{keywordtype}{void} UART\_DMATxOnlyAbortCallback(DMA\_HandleTypeDef *hdma);}
\DoxyCodeLine{00211 \textcolor{keyword}{static} \textcolor{keywordtype}{void} UART\_DMARxOnlyAbortCallback(DMA\_HandleTypeDef *hdma);}
\DoxyCodeLine{00212 \textcolor{keyword}{static} \textcolor{keywordtype}{void} UART\_TxISR\_8BIT(UART\_HandleTypeDef *huart);}
\DoxyCodeLine{00213 \textcolor{keyword}{static} \textcolor{keywordtype}{void} UART\_TxISR\_16BIT(UART\_HandleTypeDef *huart);}
\DoxyCodeLine{00214 \textcolor{keyword}{static} \textcolor{keywordtype}{void} UART\_TxISR\_8BIT\_FIFOEN(UART\_HandleTypeDef *huart);}
\DoxyCodeLine{00215 \textcolor{keyword}{static} \textcolor{keywordtype}{void} UART\_TxISR\_16BIT\_FIFOEN(UART\_HandleTypeDef *huart);}
\DoxyCodeLine{00216 \textcolor{keyword}{static} \textcolor{keywordtype}{void} UART\_EndTransmit\_IT(UART\_HandleTypeDef *huart);}
\DoxyCodeLine{00217 \textcolor{keyword}{static} \textcolor{keywordtype}{void} UART\_RxISR\_8BIT(UART\_HandleTypeDef *huart);}
\DoxyCodeLine{00218 \textcolor{keyword}{static} \textcolor{keywordtype}{void} UART\_RxISR\_16BIT(UART\_HandleTypeDef *huart);}
\DoxyCodeLine{00219 \textcolor{keyword}{static} \textcolor{keywordtype}{void} UART\_RxISR\_8BIT\_FIFOEN(UART\_HandleTypeDef *huart);}
\DoxyCodeLine{00220 \textcolor{keyword}{static} \textcolor{keywordtype}{void} UART\_RxISR\_16BIT\_FIFOEN(UART\_HandleTypeDef *huart);}
\DoxyCodeLine{00225 \textcolor{comment}{/* Private variables -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{00229 \textcolor{keyword}{const} uint16\_t UARTPrescTable[12] = \{1U, 2U, 4U, 6U, 8U, 10U, 12U, 16U, 32U, 64U, 128U, 256U\};}
\DoxyCodeLine{00234 \textcolor{comment}{/* Exported Constants -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{00235 \textcolor{comment}{/* Exported functions -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{00236 }
\DoxyCodeLine{00307 HAL\_StatusTypeDef HAL\_UART\_Init(UART\_HandleTypeDef *huart)}
\DoxyCodeLine{00308 \{}
\DoxyCodeLine{00309   \textcolor{comment}{/* Check the UART handle allocation */}}
\DoxyCodeLine{00310   \textcolor{keywordflow}{if} (huart == NULL)}
\DoxyCodeLine{00311   \{}
\DoxyCodeLine{00312     \textcolor{keywordflow}{return} HAL\_ERROR;}
\DoxyCodeLine{00313   \}}
\DoxyCodeLine{00314 }
\DoxyCodeLine{00315   \textcolor{keywordflow}{if} (huart-\/>Init.HwFlowCtl != UART\_HWCONTROL\_NONE)}
\DoxyCodeLine{00316   \{}
\DoxyCodeLine{00317     \textcolor{comment}{/* Check the parameters */}}
\DoxyCodeLine{00318     assert\_param(IS\_UART\_HWFLOW\_INSTANCE(huart-\/>Instance));}
\DoxyCodeLine{00319   \}}
\DoxyCodeLine{00320   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00321   \{}
\DoxyCodeLine{00322     \textcolor{comment}{/* Check the parameters */}}
\DoxyCodeLine{00323     assert\_param((IS\_UART\_INSTANCE(huart-\/>Instance)) || (IS\_LPUART\_INSTANCE(huart-\/>Instance)));}
\DoxyCodeLine{00324   \}}
\DoxyCodeLine{00325 }
\DoxyCodeLine{00326   \textcolor{keywordflow}{if} (huart-\/>gState == HAL\_UART\_STATE\_RESET)}
\DoxyCodeLine{00327   \{}
\DoxyCodeLine{00328     \textcolor{comment}{/* Allocate lock resource and initialize it */}}
\DoxyCodeLine{00329     huart-\/>Lock = HAL\_UNLOCKED;}
\DoxyCodeLine{00330 }
\DoxyCodeLine{00331 \textcolor{preprocessor}{\#if (USE\_HAL\_UART\_REGISTER\_CALLBACKS == 1)}}
\DoxyCodeLine{00332     UART\_InitCallbacksToDefault(huart);}
\DoxyCodeLine{00333 }
\DoxyCodeLine{00334     \textcolor{keywordflow}{if} (huart-\/>MspInitCallback == NULL)}
\DoxyCodeLine{00335     \{}
\DoxyCodeLine{00336       huart-\/>MspInitCallback = HAL\_UART\_MspInit;}
\DoxyCodeLine{00337     \}}
\DoxyCodeLine{00338 }
\DoxyCodeLine{00339     \textcolor{comment}{/* Init the low level hardware */}}
\DoxyCodeLine{00340     huart-\/>MspInitCallback(huart);}
\DoxyCodeLine{00341 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00342     \textcolor{comment}{/* Init the low level hardware : GPIO, CLOCK */}}
\DoxyCodeLine{00343     HAL\_UART\_MspInit(huart);}
\DoxyCodeLine{00344 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* (USE\_HAL\_UART\_REGISTER\_CALLBACKS) */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00345   \}}
\DoxyCodeLine{00346 }
\DoxyCodeLine{00347   huart-\/>gState = HAL\_UART\_STATE\_BUSY;}
\DoxyCodeLine{00348 }
\DoxyCodeLine{00349   \_\_HAL\_UART\_DISABLE(huart);}
\DoxyCodeLine{00350 }
\DoxyCodeLine{00351   \textcolor{comment}{/* Set the UART Communication parameters */}}
\DoxyCodeLine{00352   \textcolor{keywordflow}{if} (UART\_SetConfig(huart) == HAL\_ERROR)}
\DoxyCodeLine{00353   \{}
\DoxyCodeLine{00354     \textcolor{keywordflow}{return} HAL\_ERROR;}
\DoxyCodeLine{00355   \}}
\DoxyCodeLine{00356 }
\DoxyCodeLine{00357   \textcolor{keywordflow}{if} (huart-\/>AdvancedInit.AdvFeatureInit != UART\_ADVFEATURE\_NO\_INIT)}
\DoxyCodeLine{00358   \{}
\DoxyCodeLine{00359     UART\_AdvFeatureConfig(huart);}
\DoxyCodeLine{00360   \}}
\DoxyCodeLine{00361 }
\DoxyCodeLine{00362   \textcolor{comment}{/* In asynchronous mode, the following bits must be kept cleared:}}
\DoxyCodeLine{00363 \textcolor{comment}{  -\/ LINEN and CLKEN bits in the USART\_CR2 register,}}
\DoxyCodeLine{00364 \textcolor{comment}{  -\/ SCEN, HDSEL and IREN  bits in the USART\_CR3 register.*/}}
\DoxyCodeLine{00365   CLEAR\_BIT(huart-\/>Instance-\/>CR2, (USART\_CR2\_LINEN | USART\_CR2\_CLKEN));}
\DoxyCodeLine{00366   CLEAR\_BIT(huart-\/>Instance-\/>CR3, (USART\_CR3\_SCEN | USART\_CR3\_HDSEL | USART\_CR3\_IREN));}
\DoxyCodeLine{00367 }
\DoxyCodeLine{00368   \_\_HAL\_UART\_ENABLE(huart);}
\DoxyCodeLine{00369 }
\DoxyCodeLine{00370   \textcolor{comment}{/* TEACK and/or REACK to check before moving huart-\/>gState and huart-\/>RxState to Ready */}}
\DoxyCodeLine{00371   \textcolor{keywordflow}{return} (UART\_CheckIdleState(huart));}
\DoxyCodeLine{00372 \}}
\DoxyCodeLine{00373 }
\DoxyCodeLine{00380 HAL\_StatusTypeDef HAL\_HalfDuplex\_Init(UART\_HandleTypeDef *huart)}
\DoxyCodeLine{00381 \{}
\DoxyCodeLine{00382   \textcolor{comment}{/* Check the UART handle allocation */}}
\DoxyCodeLine{00383   \textcolor{keywordflow}{if} (huart == NULL)}
\DoxyCodeLine{00384   \{}
\DoxyCodeLine{00385     \textcolor{keywordflow}{return} HAL\_ERROR;}
\DoxyCodeLine{00386   \}}
\DoxyCodeLine{00387 }
\DoxyCodeLine{00388   \textcolor{comment}{/* Check UART instance */}}
\DoxyCodeLine{00389   assert\_param(IS\_UART\_HALFDUPLEX\_INSTANCE(huart-\/>Instance));}
\DoxyCodeLine{00390 }
\DoxyCodeLine{00391   \textcolor{keywordflow}{if} (huart-\/>gState == HAL\_UART\_STATE\_RESET)}
\DoxyCodeLine{00392   \{}
\DoxyCodeLine{00393     \textcolor{comment}{/* Allocate lock resource and initialize it */}}
\DoxyCodeLine{00394     huart-\/>Lock = HAL\_UNLOCKED;}
\DoxyCodeLine{00395 }
\DoxyCodeLine{00396 \textcolor{preprocessor}{\#if (USE\_HAL\_UART\_REGISTER\_CALLBACKS == 1)}}
\DoxyCodeLine{00397     UART\_InitCallbacksToDefault(huart);}
\DoxyCodeLine{00398 }
\DoxyCodeLine{00399     \textcolor{keywordflow}{if} (huart-\/>MspInitCallback == NULL)}
\DoxyCodeLine{00400     \{}
\DoxyCodeLine{00401       huart-\/>MspInitCallback = HAL\_UART\_MspInit;}
\DoxyCodeLine{00402     \}}
\DoxyCodeLine{00403 }
\DoxyCodeLine{00404     \textcolor{comment}{/* Init the low level hardware */}}
\DoxyCodeLine{00405     huart-\/>MspInitCallback(huart);}
\DoxyCodeLine{00406 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00407     \textcolor{comment}{/* Init the low level hardware : GPIO, CLOCK */}}
\DoxyCodeLine{00408     HAL\_UART\_MspInit(huart);}
\DoxyCodeLine{00409 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* (USE\_HAL\_UART\_REGISTER\_CALLBACKS) */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00410   \}}
\DoxyCodeLine{00411 }
\DoxyCodeLine{00412   huart-\/>gState = HAL\_UART\_STATE\_BUSY;}
\DoxyCodeLine{00413 }
\DoxyCodeLine{00414   \_\_HAL\_UART\_DISABLE(huart);}
\DoxyCodeLine{00415 }
\DoxyCodeLine{00416   \textcolor{comment}{/* Set the UART Communication parameters */}}
\DoxyCodeLine{00417   \textcolor{keywordflow}{if} (UART\_SetConfig(huart) == HAL\_ERROR)}
\DoxyCodeLine{00418   \{}
\DoxyCodeLine{00419     \textcolor{keywordflow}{return} HAL\_ERROR;}
\DoxyCodeLine{00420   \}}
\DoxyCodeLine{00421 }
\DoxyCodeLine{00422   \textcolor{keywordflow}{if} (huart-\/>AdvancedInit.AdvFeatureInit != UART\_ADVFEATURE\_NO\_INIT)}
\DoxyCodeLine{00423   \{}
\DoxyCodeLine{00424     UART\_AdvFeatureConfig(huart);}
\DoxyCodeLine{00425   \}}
\DoxyCodeLine{00426 }
\DoxyCodeLine{00427   \textcolor{comment}{/* In half-\/duplex mode, the following bits must be kept cleared:}}
\DoxyCodeLine{00428 \textcolor{comment}{  -\/ LINEN and CLKEN bits in the USART\_CR2 register,}}
\DoxyCodeLine{00429 \textcolor{comment}{  -\/ SCEN and IREN bits in the USART\_CR3 register.*/}}
\DoxyCodeLine{00430   CLEAR\_BIT(huart-\/>Instance-\/>CR2, (USART\_CR2\_LINEN | USART\_CR2\_CLKEN));}
\DoxyCodeLine{00431   CLEAR\_BIT(huart-\/>Instance-\/>CR3, (USART\_CR3\_IREN | USART\_CR3\_SCEN));}
\DoxyCodeLine{00432 }
\DoxyCodeLine{00433   \textcolor{comment}{/* Enable the Half-\/Duplex mode by setting the HDSEL bit in the CR3 register */}}
\DoxyCodeLine{00434   SET\_BIT(huart-\/>Instance-\/>CR3, USART\_CR3\_HDSEL);}
\DoxyCodeLine{00435 }
\DoxyCodeLine{00436   \_\_HAL\_UART\_ENABLE(huart);}
\DoxyCodeLine{00437 }
\DoxyCodeLine{00438   \textcolor{comment}{/* TEACK and/or REACK to check before moving huart-\/>gState and huart-\/>RxState to Ready */}}
\DoxyCodeLine{00439   \textcolor{keywordflow}{return} (UART\_CheckIdleState(huart));}
\DoxyCodeLine{00440 \}}
\DoxyCodeLine{00441 }
\DoxyCodeLine{00442 }
\DoxyCodeLine{00453 HAL\_StatusTypeDef HAL\_LIN\_Init(UART\_HandleTypeDef *huart, uint32\_t BreakDetectLength)}
\DoxyCodeLine{00454 \{}
\DoxyCodeLine{00455   \textcolor{comment}{/* Check the UART handle allocation */}}
\DoxyCodeLine{00456   \textcolor{keywordflow}{if} (huart == NULL)}
\DoxyCodeLine{00457   \{}
\DoxyCodeLine{00458     \textcolor{keywordflow}{return} HAL\_ERROR;}
\DoxyCodeLine{00459   \}}
\DoxyCodeLine{00460 }
\DoxyCodeLine{00461   \textcolor{comment}{/* Check the LIN UART instance */}}
\DoxyCodeLine{00462   assert\_param(IS\_UART\_LIN\_INSTANCE(huart-\/>Instance));}
\DoxyCodeLine{00463   \textcolor{comment}{/* Check the Break detection length parameter */}}
\DoxyCodeLine{00464   assert\_param(IS\_UART\_LIN\_BREAK\_DETECT\_LENGTH(BreakDetectLength));}
\DoxyCodeLine{00465 }
\DoxyCodeLine{00466   \textcolor{comment}{/* LIN mode limited to 16-\/bit oversampling only */}}
\DoxyCodeLine{00467   \textcolor{keywordflow}{if} (huart-\/>Init.OverSampling == UART\_OVERSAMPLING\_8)}
\DoxyCodeLine{00468   \{}
\DoxyCodeLine{00469     \textcolor{keywordflow}{return} HAL\_ERROR;}
\DoxyCodeLine{00470   \}}
\DoxyCodeLine{00471   \textcolor{comment}{/* LIN mode limited to 8-\/bit data length */}}
\DoxyCodeLine{00472   \textcolor{keywordflow}{if} (huart-\/>Init.WordLength != UART\_WORDLENGTH\_8B)}
\DoxyCodeLine{00473   \{}
\DoxyCodeLine{00474     \textcolor{keywordflow}{return} HAL\_ERROR;}
\DoxyCodeLine{00475   \}}
\DoxyCodeLine{00476 }
\DoxyCodeLine{00477   \textcolor{keywordflow}{if} (huart-\/>gState == HAL\_UART\_STATE\_RESET)}
\DoxyCodeLine{00478   \{}
\DoxyCodeLine{00479     \textcolor{comment}{/* Allocate lock resource and initialize it */}}
\DoxyCodeLine{00480     huart-\/>Lock = HAL\_UNLOCKED;}
\DoxyCodeLine{00481 }
\DoxyCodeLine{00482 \textcolor{preprocessor}{\#if (USE\_HAL\_UART\_REGISTER\_CALLBACKS == 1)}}
\DoxyCodeLine{00483     UART\_InitCallbacksToDefault(huart);}
\DoxyCodeLine{00484 }
\DoxyCodeLine{00485     \textcolor{keywordflow}{if} (huart-\/>MspInitCallback == NULL)}
\DoxyCodeLine{00486     \{}
\DoxyCodeLine{00487       huart-\/>MspInitCallback = HAL\_UART\_MspInit;}
\DoxyCodeLine{00488     \}}
\DoxyCodeLine{00489 }
\DoxyCodeLine{00490     \textcolor{comment}{/* Init the low level hardware */}}
\DoxyCodeLine{00491     huart-\/>MspInitCallback(huart);}
\DoxyCodeLine{00492 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00493     \textcolor{comment}{/* Init the low level hardware : GPIO, CLOCK */}}
\DoxyCodeLine{00494     HAL\_UART\_MspInit(huart);}
\DoxyCodeLine{00495 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* (USE\_HAL\_UART\_REGISTER\_CALLBACKS) */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00496   \}}
\DoxyCodeLine{00497 }
\DoxyCodeLine{00498   huart-\/>gState = HAL\_UART\_STATE\_BUSY;}
\DoxyCodeLine{00499 }
\DoxyCodeLine{00500   \_\_HAL\_UART\_DISABLE(huart);}
\DoxyCodeLine{00501 }
\DoxyCodeLine{00502   \textcolor{comment}{/* Set the UART Communication parameters */}}
\DoxyCodeLine{00503   \textcolor{keywordflow}{if} (UART\_SetConfig(huart) == HAL\_ERROR)}
\DoxyCodeLine{00504   \{}
\DoxyCodeLine{00505     \textcolor{keywordflow}{return} HAL\_ERROR;}
\DoxyCodeLine{00506   \}}
\DoxyCodeLine{00507 }
\DoxyCodeLine{00508   \textcolor{keywordflow}{if} (huart-\/>AdvancedInit.AdvFeatureInit != UART\_ADVFEATURE\_NO\_INIT)}
\DoxyCodeLine{00509   \{}
\DoxyCodeLine{00510     UART\_AdvFeatureConfig(huart);}
\DoxyCodeLine{00511   \}}
\DoxyCodeLine{00512 }
\DoxyCodeLine{00513   \textcolor{comment}{/* In LIN mode, the following bits must be kept cleared:}}
\DoxyCodeLine{00514 \textcolor{comment}{  -\/ LINEN and CLKEN bits in the USART\_CR2 register,}}
\DoxyCodeLine{00515 \textcolor{comment}{  -\/ SCEN and IREN bits in the USART\_CR3 register.*/}}
\DoxyCodeLine{00516   CLEAR\_BIT(huart-\/>Instance-\/>CR2, USART\_CR2\_CLKEN);}
\DoxyCodeLine{00517   CLEAR\_BIT(huart-\/>Instance-\/>CR3, (USART\_CR3\_HDSEL | USART\_CR3\_IREN | USART\_CR3\_SCEN));}
\DoxyCodeLine{00518 }
\DoxyCodeLine{00519   \textcolor{comment}{/* Enable the LIN mode by setting the LINEN bit in the CR2 register */}}
\DoxyCodeLine{00520   SET\_BIT(huart-\/>Instance-\/>CR2, USART\_CR2\_LINEN);}
\DoxyCodeLine{00521 }
\DoxyCodeLine{00522   \textcolor{comment}{/* Set the USART LIN Break detection length. */}}
\DoxyCodeLine{00523   MODIFY\_REG(huart-\/>Instance-\/>CR2, USART\_CR2\_LBDL, BreakDetectLength);}
\DoxyCodeLine{00524 }
\DoxyCodeLine{00525   \_\_HAL\_UART\_ENABLE(huart);}
\DoxyCodeLine{00526 }
\DoxyCodeLine{00527   \textcolor{comment}{/* TEACK and/or REACK to check before moving huart-\/>gState and huart-\/>RxState to Ready */}}
\DoxyCodeLine{00528   \textcolor{keywordflow}{return} (UART\_CheckIdleState(huart));}
\DoxyCodeLine{00529 \}}
\DoxyCodeLine{00530 }
\DoxyCodeLine{00531 }
\DoxyCodeLine{00550 HAL\_StatusTypeDef HAL\_MultiProcessor\_Init(UART\_HandleTypeDef *huart, uint8\_t Address, uint32\_t WakeUpMethod)}
\DoxyCodeLine{00551 \{}
\DoxyCodeLine{00552   \textcolor{comment}{/* Check the UART handle allocation */}}
\DoxyCodeLine{00553   \textcolor{keywordflow}{if} (huart == NULL)}
\DoxyCodeLine{00554   \{}
\DoxyCodeLine{00555     \textcolor{keywordflow}{return} HAL\_ERROR;}
\DoxyCodeLine{00556   \}}
\DoxyCodeLine{00557 }
\DoxyCodeLine{00558   \textcolor{comment}{/* Check the wake up method parameter */}}
\DoxyCodeLine{00559   assert\_param(IS\_UART\_WAKEUPMETHOD(WakeUpMethod));}
\DoxyCodeLine{00560 }
\DoxyCodeLine{00561   \textcolor{keywordflow}{if} (huart-\/>gState == HAL\_UART\_STATE\_RESET)}
\DoxyCodeLine{00562   \{}
\DoxyCodeLine{00563     \textcolor{comment}{/* Allocate lock resource and initialize it */}}
\DoxyCodeLine{00564     huart-\/>Lock = HAL\_UNLOCKED;}
\DoxyCodeLine{00565 }
\DoxyCodeLine{00566 \textcolor{preprocessor}{\#if (USE\_HAL\_UART\_REGISTER\_CALLBACKS == 1)}}
\DoxyCodeLine{00567     UART\_InitCallbacksToDefault(huart);}
\DoxyCodeLine{00568 }
\DoxyCodeLine{00569     \textcolor{keywordflow}{if} (huart-\/>MspInitCallback == NULL)}
\DoxyCodeLine{00570     \{}
\DoxyCodeLine{00571       huart-\/>MspInitCallback = HAL\_UART\_MspInit;}
\DoxyCodeLine{00572     \}}
\DoxyCodeLine{00573 }
\DoxyCodeLine{00574     \textcolor{comment}{/* Init the low level hardware */}}
\DoxyCodeLine{00575     huart-\/>MspInitCallback(huart);}
\DoxyCodeLine{00576 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00577     \textcolor{comment}{/* Init the low level hardware : GPIO, CLOCK */}}
\DoxyCodeLine{00578     HAL\_UART\_MspInit(huart);}
\DoxyCodeLine{00579 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* (USE\_HAL\_UART\_REGISTER\_CALLBACKS) */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00580   \}}
\DoxyCodeLine{00581 }
\DoxyCodeLine{00582   huart-\/>gState = HAL\_UART\_STATE\_BUSY;}
\DoxyCodeLine{00583 }
\DoxyCodeLine{00584   \_\_HAL\_UART\_DISABLE(huart);}
\DoxyCodeLine{00585 }
\DoxyCodeLine{00586   \textcolor{comment}{/* Set the UART Communication parameters */}}
\DoxyCodeLine{00587   \textcolor{keywordflow}{if} (UART\_SetConfig(huart) == HAL\_ERROR)}
\DoxyCodeLine{00588   \{}
\DoxyCodeLine{00589     \textcolor{keywordflow}{return} HAL\_ERROR;}
\DoxyCodeLine{00590   \}}
\DoxyCodeLine{00591 }
\DoxyCodeLine{00592   \textcolor{keywordflow}{if} (huart-\/>AdvancedInit.AdvFeatureInit != UART\_ADVFEATURE\_NO\_INIT)}
\DoxyCodeLine{00593   \{}
\DoxyCodeLine{00594     UART\_AdvFeatureConfig(huart);}
\DoxyCodeLine{00595   \}}
\DoxyCodeLine{00596 }
\DoxyCodeLine{00597   \textcolor{comment}{/* In multiprocessor mode, the following bits must be kept cleared:}}
\DoxyCodeLine{00598 \textcolor{comment}{  -\/ LINEN and CLKEN bits in the USART\_CR2 register,}}
\DoxyCodeLine{00599 \textcolor{comment}{  -\/ SCEN, HDSEL and IREN  bits in the USART\_CR3 register. */}}
\DoxyCodeLine{00600   CLEAR\_BIT(huart-\/>Instance-\/>CR2, (USART\_CR2\_LINEN | USART\_CR2\_CLKEN));}
\DoxyCodeLine{00601   CLEAR\_BIT(huart-\/>Instance-\/>CR3, (USART\_CR3\_SCEN | USART\_CR3\_HDSEL | USART\_CR3\_IREN));}
\DoxyCodeLine{00602 }
\DoxyCodeLine{00603   \textcolor{keywordflow}{if} (WakeUpMethod == UART\_WAKEUPMETHOD\_ADDRESSMARK)}
\DoxyCodeLine{00604   \{}
\DoxyCodeLine{00605     \textcolor{comment}{/* If address mark wake up method is chosen, set the USART address node */}}
\DoxyCodeLine{00606     MODIFY\_REG(huart-\/>Instance-\/>CR2, USART\_CR2\_ADD, ((uint32\_t)Address << UART\_CR2\_ADDRESS\_LSB\_POS));}
\DoxyCodeLine{00607   \}}
\DoxyCodeLine{00608 }
\DoxyCodeLine{00609   \textcolor{comment}{/* Set the wake up method by setting the WAKE bit in the CR1 register */}}
\DoxyCodeLine{00610   MODIFY\_REG(huart-\/>Instance-\/>CR1, USART\_CR1\_WAKE, WakeUpMethod);}
\DoxyCodeLine{00611 }
\DoxyCodeLine{00612   \_\_HAL\_UART\_ENABLE(huart);}
\DoxyCodeLine{00613 }
\DoxyCodeLine{00614   \textcolor{comment}{/* TEACK and/or REACK to check before moving huart-\/>gState and huart-\/>RxState to Ready */}}
\DoxyCodeLine{00615   \textcolor{keywordflow}{return} (UART\_CheckIdleState(huart));}
\DoxyCodeLine{00616 \}}
\DoxyCodeLine{00617 }
\DoxyCodeLine{00618 }
\DoxyCodeLine{00624 HAL\_StatusTypeDef HAL\_UART\_DeInit(UART\_HandleTypeDef *huart)}
\DoxyCodeLine{00625 \{}
\DoxyCodeLine{00626   \textcolor{comment}{/* Check the UART handle allocation */}}
\DoxyCodeLine{00627   \textcolor{keywordflow}{if} (huart == NULL)}
\DoxyCodeLine{00628   \{}
\DoxyCodeLine{00629     \textcolor{keywordflow}{return} HAL\_ERROR;}
\DoxyCodeLine{00630   \}}
\DoxyCodeLine{00631 }
\DoxyCodeLine{00632   \textcolor{comment}{/* Check the parameters */}}
\DoxyCodeLine{00633   assert\_param((IS\_UART\_INSTANCE(huart-\/>Instance)) || (IS\_LPUART\_INSTANCE(huart-\/>Instance)));}
\DoxyCodeLine{00634 }
\DoxyCodeLine{00635   huart-\/>gState = HAL\_UART\_STATE\_BUSY;}
\DoxyCodeLine{00636 }
\DoxyCodeLine{00637   \_\_HAL\_UART\_DISABLE(huart);}
\DoxyCodeLine{00638 }
\DoxyCodeLine{00639   huart-\/>Instance-\/>CR1 = 0x0U;}
\DoxyCodeLine{00640   huart-\/>Instance-\/>CR2 = 0x0U;}
\DoxyCodeLine{00641   huart-\/>Instance-\/>CR3 = 0x0U;}
\DoxyCodeLine{00642 }
\DoxyCodeLine{00643 \textcolor{preprocessor}{\#if (USE\_HAL\_UART\_REGISTER\_CALLBACKS == 1)}}
\DoxyCodeLine{00644   \textcolor{keywordflow}{if} (huart-\/>MspDeInitCallback == NULL)}
\DoxyCodeLine{00645   \{}
\DoxyCodeLine{00646     huart-\/>MspDeInitCallback = HAL\_UART\_MspDeInit;}
\DoxyCodeLine{00647   \}}
\DoxyCodeLine{00648   \textcolor{comment}{/* DeInit the low level hardware */}}
\DoxyCodeLine{00649   huart-\/>MspDeInitCallback(huart);}
\DoxyCodeLine{00650 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00651   \textcolor{comment}{/* DeInit the low level hardware */}}
\DoxyCodeLine{00652   HAL\_UART\_MspDeInit(huart);}
\DoxyCodeLine{00653 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* (USE\_HAL\_UART\_REGISTER\_CALLBACKS) */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00654 }
\DoxyCodeLine{00655   huart-\/>ErrorCode = HAL\_UART\_ERROR\_NONE;}
\DoxyCodeLine{00656   huart-\/>gState = HAL\_UART\_STATE\_RESET;}
\DoxyCodeLine{00657   huart-\/>RxState = HAL\_UART\_STATE\_RESET;}
\DoxyCodeLine{00658   huart-\/>ReceptionType = HAL\_UART\_RECEPTION\_STANDARD;}
\DoxyCodeLine{00659 }
\DoxyCodeLine{00660   \_\_HAL\_UNLOCK(huart);}
\DoxyCodeLine{00661 }
\DoxyCodeLine{00662   \textcolor{keywordflow}{return} HAL\_OK;}
\DoxyCodeLine{00663 \}}
\DoxyCodeLine{00664 }
\DoxyCodeLine{00670 \_\_weak \textcolor{keywordtype}{void} HAL\_UART\_MspInit(UART\_HandleTypeDef *huart)}
\DoxyCodeLine{00671 \{}
\DoxyCodeLine{00672   \textcolor{comment}{/* Prevent unused argument(s) compilation warning */}}
\DoxyCodeLine{00673   UNUSED(huart);}
\DoxyCodeLine{00674 }
\DoxyCodeLine{00675   \textcolor{comment}{/* NOTE : This function should not be modified, when the callback is needed,}}
\DoxyCodeLine{00676 \textcolor{comment}{            the HAL\_UART\_MspInit can be implemented in the user file}}
\DoxyCodeLine{00677 \textcolor{comment}{   */}}
\DoxyCodeLine{00678 \}}
\DoxyCodeLine{00679 }
\DoxyCodeLine{00685 \_\_weak \textcolor{keywordtype}{void} HAL\_UART\_MspDeInit(UART\_HandleTypeDef *huart)}
\DoxyCodeLine{00686 \{}
\DoxyCodeLine{00687   \textcolor{comment}{/* Prevent unused argument(s) compilation warning */}}
\DoxyCodeLine{00688   UNUSED(huart);}
\DoxyCodeLine{00689 }
\DoxyCodeLine{00690   \textcolor{comment}{/* NOTE : This function should not be modified, when the callback is needed,}}
\DoxyCodeLine{00691 \textcolor{comment}{            the HAL\_UART\_MspDeInit can be implemented in the user file}}
\DoxyCodeLine{00692 \textcolor{comment}{   */}}
\DoxyCodeLine{00693 \}}
\DoxyCodeLine{00694 }
\DoxyCodeLine{00695 \textcolor{preprocessor}{\#if (USE\_HAL\_UART\_REGISTER\_CALLBACKS == 1)}}
\DoxyCodeLine{00718 HAL\_StatusTypeDef HAL\_UART\_RegisterCallback(UART\_HandleTypeDef *huart, HAL\_UART\_CallbackIDTypeDef CallbackID,}
\DoxyCodeLine{00719                                             pUART\_CallbackTypeDef pCallback)}
\DoxyCodeLine{00720 \{}
\DoxyCodeLine{00721   HAL\_StatusTypeDef status = HAL\_OK;}
\DoxyCodeLine{00722 }
\DoxyCodeLine{00723   \textcolor{keywordflow}{if} (pCallback == NULL)}
\DoxyCodeLine{00724   \{}
\DoxyCodeLine{00725     huart-\/>ErrorCode |= HAL\_UART\_ERROR\_INVALID\_CALLBACK;}
\DoxyCodeLine{00726 }
\DoxyCodeLine{00727     \textcolor{keywordflow}{return} HAL\_ERROR;}
\DoxyCodeLine{00728   \}}
\DoxyCodeLine{00729 }
\DoxyCodeLine{00730   \_\_HAL\_LOCK(huart);}
\DoxyCodeLine{00731 }
\DoxyCodeLine{00732   \textcolor{keywordflow}{if} (huart-\/>gState == HAL\_UART\_STATE\_READY)}
\DoxyCodeLine{00733   \{}
\DoxyCodeLine{00734     \textcolor{keywordflow}{switch} (CallbackID)}
\DoxyCodeLine{00735     \{}
\DoxyCodeLine{00736       \textcolor{keywordflow}{case} HAL\_UART\_TX\_HALFCOMPLETE\_CB\_ID :}
\DoxyCodeLine{00737         huart-\/>TxHalfCpltCallback = pCallback;}
\DoxyCodeLine{00738         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00739 }
\DoxyCodeLine{00740       \textcolor{keywordflow}{case} HAL\_UART\_TX\_COMPLETE\_CB\_ID :}
\DoxyCodeLine{00741         huart-\/>TxCpltCallback = pCallback;}
\DoxyCodeLine{00742         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00743 }
\DoxyCodeLine{00744       \textcolor{keywordflow}{case} HAL\_UART\_RX\_HALFCOMPLETE\_CB\_ID :}
\DoxyCodeLine{00745         huart-\/>RxHalfCpltCallback = pCallback;}
\DoxyCodeLine{00746         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00747 }
\DoxyCodeLine{00748       \textcolor{keywordflow}{case} HAL\_UART\_RX\_COMPLETE\_CB\_ID :}
\DoxyCodeLine{00749         huart-\/>RxCpltCallback = pCallback;}
\DoxyCodeLine{00750         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00751 }
\DoxyCodeLine{00752       \textcolor{keywordflow}{case} HAL\_UART\_ERROR\_CB\_ID :}
\DoxyCodeLine{00753         huart-\/>ErrorCallback = pCallback;}
\DoxyCodeLine{00754         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00755 }
\DoxyCodeLine{00756       \textcolor{keywordflow}{case} HAL\_UART\_ABORT\_COMPLETE\_CB\_ID :}
\DoxyCodeLine{00757         huart-\/>AbortCpltCallback = pCallback;}
\DoxyCodeLine{00758         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00759 }
\DoxyCodeLine{00760       \textcolor{keywordflow}{case} HAL\_UART\_ABORT\_TRANSMIT\_COMPLETE\_CB\_ID :}
\DoxyCodeLine{00761         huart-\/>AbortTransmitCpltCallback = pCallback;}
\DoxyCodeLine{00762         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00763 }
\DoxyCodeLine{00764       \textcolor{keywordflow}{case} HAL\_UART\_ABORT\_RECEIVE\_COMPLETE\_CB\_ID :}
\DoxyCodeLine{00765         huart-\/>AbortReceiveCpltCallback = pCallback;}
\DoxyCodeLine{00766         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00767 }
\DoxyCodeLine{00768       \textcolor{keywordflow}{case} HAL\_UART\_WAKEUP\_CB\_ID :}
\DoxyCodeLine{00769         huart-\/>WakeupCallback = pCallback;}
\DoxyCodeLine{00770         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00771 }
\DoxyCodeLine{00772       \textcolor{keywordflow}{case} HAL\_UART\_RX\_FIFO\_FULL\_CB\_ID :}
\DoxyCodeLine{00773         huart-\/>RxFifoFullCallback = pCallback;}
\DoxyCodeLine{00774         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00775 }
\DoxyCodeLine{00776       \textcolor{keywordflow}{case} HAL\_UART\_TX\_FIFO\_EMPTY\_CB\_ID :}
\DoxyCodeLine{00777         huart-\/>TxFifoEmptyCallback = pCallback;}
\DoxyCodeLine{00778         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00779 }
\DoxyCodeLine{00780       \textcolor{keywordflow}{case} HAL\_UART\_MSPINIT\_CB\_ID :}
\DoxyCodeLine{00781         huart-\/>MspInitCallback = pCallback;}
\DoxyCodeLine{00782         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00783 }
\DoxyCodeLine{00784       \textcolor{keywordflow}{case} HAL\_UART\_MSPDEINIT\_CB\_ID :}
\DoxyCodeLine{00785         huart-\/>MspDeInitCallback = pCallback;}
\DoxyCodeLine{00786         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00787 }
\DoxyCodeLine{00788       default :}
\DoxyCodeLine{00789         huart-\/>ErrorCode |= HAL\_UART\_ERROR\_INVALID\_CALLBACK;}
\DoxyCodeLine{00790 }
\DoxyCodeLine{00791         status =  HAL\_ERROR;}
\DoxyCodeLine{00792         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00793     \}}
\DoxyCodeLine{00794   \}}
\DoxyCodeLine{00795   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (huart-\/>gState == HAL\_UART\_STATE\_RESET)}
\DoxyCodeLine{00796   \{}
\DoxyCodeLine{00797     \textcolor{keywordflow}{switch} (CallbackID)}
\DoxyCodeLine{00798     \{}
\DoxyCodeLine{00799       \textcolor{keywordflow}{case} HAL\_UART\_MSPINIT\_CB\_ID :}
\DoxyCodeLine{00800         huart-\/>MspInitCallback = pCallback;}
\DoxyCodeLine{00801         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00802 }
\DoxyCodeLine{00803       \textcolor{keywordflow}{case} HAL\_UART\_MSPDEINIT\_CB\_ID :}
\DoxyCodeLine{00804         huart-\/>MspDeInitCallback = pCallback;}
\DoxyCodeLine{00805         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00806 }
\DoxyCodeLine{00807       default :}
\DoxyCodeLine{00808         huart-\/>ErrorCode |= HAL\_UART\_ERROR\_INVALID\_CALLBACK;}
\DoxyCodeLine{00809 }
\DoxyCodeLine{00810         status =  HAL\_ERROR;}
\DoxyCodeLine{00811         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00812     \}}
\DoxyCodeLine{00813   \}}
\DoxyCodeLine{00814   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00815   \{}
\DoxyCodeLine{00816     huart-\/>ErrorCode |= HAL\_UART\_ERROR\_INVALID\_CALLBACK;}
\DoxyCodeLine{00817 }
\DoxyCodeLine{00818     status =  HAL\_ERROR;}
\DoxyCodeLine{00819   \}}
\DoxyCodeLine{00820 }
\DoxyCodeLine{00821   \_\_HAL\_UNLOCK(huart);}
\DoxyCodeLine{00822 }
\DoxyCodeLine{00823   \textcolor{keywordflow}{return} status;}
\DoxyCodeLine{00824 \}}
\DoxyCodeLine{00825 }
\DoxyCodeLine{00847 HAL\_StatusTypeDef HAL\_UART\_UnRegisterCallback(UART\_HandleTypeDef *huart, HAL\_UART\_CallbackIDTypeDef CallbackID)}
\DoxyCodeLine{00848 \{}
\DoxyCodeLine{00849   HAL\_StatusTypeDef status = HAL\_OK;}
\DoxyCodeLine{00850 }
\DoxyCodeLine{00851   \_\_HAL\_LOCK(huart);}
\DoxyCodeLine{00852 }
\DoxyCodeLine{00853   \textcolor{keywordflow}{if} (HAL\_UART\_STATE\_READY == huart-\/>gState)}
\DoxyCodeLine{00854   \{}
\DoxyCodeLine{00855     \textcolor{keywordflow}{switch} (CallbackID)}
\DoxyCodeLine{00856     \{}
\DoxyCodeLine{00857       \textcolor{keywordflow}{case} HAL\_UART\_TX\_HALFCOMPLETE\_CB\_ID :}
\DoxyCodeLine{00858         huart-\/>TxHalfCpltCallback = HAL\_UART\_TxHalfCpltCallback;               \textcolor{comment}{/* Legacy weak  TxHalfCpltCallback    */}}
\DoxyCodeLine{00859         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00860 }
\DoxyCodeLine{00861       \textcolor{keywordflow}{case} HAL\_UART\_TX\_COMPLETE\_CB\_ID :}
\DoxyCodeLine{00862         huart-\/>TxCpltCallback = HAL\_UART\_TxCpltCallback;                       \textcolor{comment}{/* Legacy weak TxCpltCallback         */}}
\DoxyCodeLine{00863         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00864 }
\DoxyCodeLine{00865       \textcolor{keywordflow}{case} HAL\_UART\_RX\_HALFCOMPLETE\_CB\_ID :}
\DoxyCodeLine{00866         huart-\/>RxHalfCpltCallback = HAL\_UART\_RxHalfCpltCallback;               \textcolor{comment}{/* Legacy weak RxHalfCpltCallback     */}}
\DoxyCodeLine{00867         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00868 }
\DoxyCodeLine{00869       \textcolor{keywordflow}{case} HAL\_UART\_RX\_COMPLETE\_CB\_ID :}
\DoxyCodeLine{00870         huart-\/>RxCpltCallback = HAL\_UART\_RxCpltCallback;                       \textcolor{comment}{/* Legacy weak RxCpltCallback         */}}
\DoxyCodeLine{00871         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00872 }
\DoxyCodeLine{00873       \textcolor{keywordflow}{case} HAL\_UART\_ERROR\_CB\_ID :}
\DoxyCodeLine{00874         huart-\/>ErrorCallback = HAL\_UART\_ErrorCallback;                         \textcolor{comment}{/* Legacy weak ErrorCallback          */}}
\DoxyCodeLine{00875         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00876 }
\DoxyCodeLine{00877       \textcolor{keywordflow}{case} HAL\_UART\_ABORT\_COMPLETE\_CB\_ID :}
\DoxyCodeLine{00878         huart-\/>AbortCpltCallback = HAL\_UART\_AbortCpltCallback;                 \textcolor{comment}{/* Legacy weak AbortCpltCallback      */}}
\DoxyCodeLine{00879         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00880 }
\DoxyCodeLine{00881       \textcolor{keywordflow}{case} HAL\_UART\_ABORT\_TRANSMIT\_COMPLETE\_CB\_ID :}
\DoxyCodeLine{00882         huart-\/>AbortTransmitCpltCallback = HAL\_UART\_AbortTransmitCpltCallback; \textcolor{comment}{/* Legacy weak}}
\DoxyCodeLine{00883 \textcolor{comment}{                                                                                  AbortTransmitCpltCallback          */}}
\DoxyCodeLine{00884         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00885 }
\DoxyCodeLine{00886       \textcolor{keywordflow}{case} HAL\_UART\_ABORT\_RECEIVE\_COMPLETE\_CB\_ID :}
\DoxyCodeLine{00887         huart-\/>AbortReceiveCpltCallback = HAL\_UART\_AbortReceiveCpltCallback;   \textcolor{comment}{/* Legacy weak}}
\DoxyCodeLine{00888 \textcolor{comment}{                                                                                  AbortReceiveCpltCallback           */}}
\DoxyCodeLine{00889         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00890 }
\DoxyCodeLine{00891       \textcolor{keywordflow}{case} HAL\_UART\_WAKEUP\_CB\_ID :}
\DoxyCodeLine{00892         huart-\/>WakeupCallback = HAL\_UARTEx\_WakeupCallback;                     \textcolor{comment}{/* Legacy weak WakeupCallback         */}}
\DoxyCodeLine{00893         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00894 }
\DoxyCodeLine{00895       \textcolor{keywordflow}{case} HAL\_UART\_RX\_FIFO\_FULL\_CB\_ID :}
\DoxyCodeLine{00896         huart-\/>RxFifoFullCallback = HAL\_UARTEx\_RxFifoFullCallback;             \textcolor{comment}{/* Legacy weak RxFifoFullCallback     */}}
\DoxyCodeLine{00897         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00898 }
\DoxyCodeLine{00899       \textcolor{keywordflow}{case} HAL\_UART\_TX\_FIFO\_EMPTY\_CB\_ID :}
\DoxyCodeLine{00900         huart-\/>TxFifoEmptyCallback = HAL\_UARTEx\_TxFifoEmptyCallback;           \textcolor{comment}{/* Legacy weak TxFifoEmptyCallback    */}}
\DoxyCodeLine{00901         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00902 }
\DoxyCodeLine{00903       \textcolor{keywordflow}{case} HAL\_UART\_MSPINIT\_CB\_ID :}
\DoxyCodeLine{00904         huart-\/>MspInitCallback = HAL\_UART\_MspInit;                             \textcolor{comment}{/* Legacy weak MspInitCallback        */}}
\DoxyCodeLine{00905         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00906 }
\DoxyCodeLine{00907       \textcolor{keywordflow}{case} HAL\_UART\_MSPDEINIT\_CB\_ID :}
\DoxyCodeLine{00908         huart-\/>MspDeInitCallback = HAL\_UART\_MspDeInit;                         \textcolor{comment}{/* Legacy weak MspDeInitCallback      */}}
\DoxyCodeLine{00909         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00910 }
\DoxyCodeLine{00911       default :}
\DoxyCodeLine{00912         huart-\/>ErrorCode |= HAL\_UART\_ERROR\_INVALID\_CALLBACK;}
\DoxyCodeLine{00913 }
\DoxyCodeLine{00914         status =  HAL\_ERROR;}
\DoxyCodeLine{00915         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00916     \}}
\DoxyCodeLine{00917   \}}
\DoxyCodeLine{00918   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (HAL\_UART\_STATE\_RESET == huart-\/>gState)}
\DoxyCodeLine{00919   \{}
\DoxyCodeLine{00920     \textcolor{keywordflow}{switch} (CallbackID)}
\DoxyCodeLine{00921     \{}
\DoxyCodeLine{00922       \textcolor{keywordflow}{case} HAL\_UART\_MSPINIT\_CB\_ID :}
\DoxyCodeLine{00923         huart-\/>MspInitCallback = HAL\_UART\_MspInit;}
\DoxyCodeLine{00924         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00925 }
\DoxyCodeLine{00926       \textcolor{keywordflow}{case} HAL\_UART\_MSPDEINIT\_CB\_ID :}
\DoxyCodeLine{00927         huart-\/>MspDeInitCallback = HAL\_UART\_MspDeInit;}
\DoxyCodeLine{00928         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00929 }
\DoxyCodeLine{00930       default :}
\DoxyCodeLine{00931         huart-\/>ErrorCode |= HAL\_UART\_ERROR\_INVALID\_CALLBACK;}
\DoxyCodeLine{00932 }
\DoxyCodeLine{00933         status =  HAL\_ERROR;}
\DoxyCodeLine{00934         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00935     \}}
\DoxyCodeLine{00936   \}}
\DoxyCodeLine{00937   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00938   \{}
\DoxyCodeLine{00939     huart-\/>ErrorCode |= HAL\_UART\_ERROR\_INVALID\_CALLBACK;}
\DoxyCodeLine{00940 }
\DoxyCodeLine{00941     status =  HAL\_ERROR;}
\DoxyCodeLine{00942   \}}
\DoxyCodeLine{00943 }
\DoxyCodeLine{00944   \_\_HAL\_UNLOCK(huart);}
\DoxyCodeLine{00945 }
\DoxyCodeLine{00946   \textcolor{keywordflow}{return} status;}
\DoxyCodeLine{00947 \}}
\DoxyCodeLine{00948 }
\DoxyCodeLine{00956 HAL\_StatusTypeDef HAL\_UART\_RegisterRxEventCallback(UART\_HandleTypeDef *huart, pUART\_RxEventCallbackTypeDef pCallback)}
\DoxyCodeLine{00957 \{}
\DoxyCodeLine{00958   HAL\_StatusTypeDef status = HAL\_OK;}
\DoxyCodeLine{00959 }
\DoxyCodeLine{00960   \textcolor{keywordflow}{if} (pCallback == NULL)}
\DoxyCodeLine{00961   \{}
\DoxyCodeLine{00962     huart-\/>ErrorCode |= HAL\_UART\_ERROR\_INVALID\_CALLBACK;}
\DoxyCodeLine{00963 }
\DoxyCodeLine{00964     \textcolor{keywordflow}{return} HAL\_ERROR;}
\DoxyCodeLine{00965   \}}
\DoxyCodeLine{00966 }
\DoxyCodeLine{00967   \textcolor{comment}{/* Process locked */}}
\DoxyCodeLine{00968   \_\_HAL\_LOCK(huart);}
\DoxyCodeLine{00969 }
\DoxyCodeLine{00970   \textcolor{keywordflow}{if} (huart-\/>gState == HAL\_UART\_STATE\_READY)}
\DoxyCodeLine{00971   \{}
\DoxyCodeLine{00972     huart-\/>RxEventCallback = pCallback;}
\DoxyCodeLine{00973   \}}
\DoxyCodeLine{00974   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00975   \{}
\DoxyCodeLine{00976     huart-\/>ErrorCode |= HAL\_UART\_ERROR\_INVALID\_CALLBACK;}
\DoxyCodeLine{00977 }
\DoxyCodeLine{00978     status =  HAL\_ERROR;}
\DoxyCodeLine{00979   \}}
\DoxyCodeLine{00980 }
\DoxyCodeLine{00981   \textcolor{comment}{/* Release Lock */}}
\DoxyCodeLine{00982   \_\_HAL\_UNLOCK(huart);}
\DoxyCodeLine{00983 }
\DoxyCodeLine{00984   \textcolor{keywordflow}{return} status;}
\DoxyCodeLine{00985 \}}
\DoxyCodeLine{00986 }
\DoxyCodeLine{00993 HAL\_StatusTypeDef HAL\_UART\_UnRegisterRxEventCallback(UART\_HandleTypeDef *huart)}
\DoxyCodeLine{00994 \{}
\DoxyCodeLine{00995   HAL\_StatusTypeDef status = HAL\_OK;}
\DoxyCodeLine{00996 }
\DoxyCodeLine{00997   \textcolor{comment}{/* Process locked */}}
\DoxyCodeLine{00998   \_\_HAL\_LOCK(huart);}
\DoxyCodeLine{00999 }
\DoxyCodeLine{01000   \textcolor{keywordflow}{if} (huart-\/>gState == HAL\_UART\_STATE\_READY)}
\DoxyCodeLine{01001   \{}
\DoxyCodeLine{01002     huart-\/>RxEventCallback = HAL\_UARTEx\_RxEventCallback; \textcolor{comment}{/* Legacy weak UART Rx Event Callback  */}}
\DoxyCodeLine{01003   \}}
\DoxyCodeLine{01004   \textcolor{keywordflow}{else}}
\DoxyCodeLine{01005   \{}
\DoxyCodeLine{01006     huart-\/>ErrorCode |= HAL\_UART\_ERROR\_INVALID\_CALLBACK;}
\DoxyCodeLine{01007 }
\DoxyCodeLine{01008     status =  HAL\_ERROR;}
\DoxyCodeLine{01009   \}}
\DoxyCodeLine{01010 }
\DoxyCodeLine{01011   \textcolor{comment}{/* Release Lock */}}
\DoxyCodeLine{01012   \_\_HAL\_UNLOCK(huart);}
\DoxyCodeLine{01013   \textcolor{keywordflow}{return} status;}
\DoxyCodeLine{01014 \}}
\DoxyCodeLine{01015 }
\DoxyCodeLine{01016 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* USE\_HAL\_UART\_REGISTER\_CALLBACKS */}\textcolor{preprocessor}{}}
\DoxyCodeLine{01017 }
\DoxyCodeLine{01121 HAL\_StatusTypeDef HAL\_UART\_Transmit(UART\_HandleTypeDef *huart, \textcolor{keyword}{const} uint8\_t *pData, uint16\_t Size, uint32\_t Timeout)}
\DoxyCodeLine{01122 \{}
\DoxyCodeLine{01123   \textcolor{keyword}{const} uint8\_t  *pdata8bits;}
\DoxyCodeLine{01124   \textcolor{keyword}{const} uint16\_t *pdata16bits;}
\DoxyCodeLine{01125   uint32\_t tickstart;}
\DoxyCodeLine{01126 }
\DoxyCodeLine{01127   \textcolor{comment}{/* Check that a Tx process is not already ongoing */}}
\DoxyCodeLine{01128   \textcolor{keywordflow}{if} (huart-\/>gState == HAL\_UART\_STATE\_READY)}
\DoxyCodeLine{01129   \{}
\DoxyCodeLine{01130     \textcolor{keywordflow}{if} ((pData == NULL) || (Size == 0U))}
\DoxyCodeLine{01131     \{}
\DoxyCodeLine{01132       \textcolor{keywordflow}{return}  HAL\_ERROR;}
\DoxyCodeLine{01133     \}}
\DoxyCodeLine{01134 }
\DoxyCodeLine{01135     \_\_HAL\_LOCK(huart);}
\DoxyCodeLine{01136 }
\DoxyCodeLine{01137     huart-\/>ErrorCode = HAL\_UART\_ERROR\_NONE;}
\DoxyCodeLine{01138     huart-\/>gState = HAL\_UART\_STATE\_BUSY\_TX;}
\DoxyCodeLine{01139 }
\DoxyCodeLine{01140     \textcolor{comment}{/* Init tickstart for timeout management */}}
\DoxyCodeLine{01141     tickstart = HAL\_GetTick();}
\DoxyCodeLine{01142 }
\DoxyCodeLine{01143     huart-\/>TxXferSize  = Size;}
\DoxyCodeLine{01144     huart-\/>TxXferCount = Size;}
\DoxyCodeLine{01145 }
\DoxyCodeLine{01146     \textcolor{comment}{/* In case of 9bits/No Parity transfer, pData needs to be handled as a uint16\_t pointer */}}
\DoxyCodeLine{01147     \textcolor{keywordflow}{if} ((huart-\/>Init.WordLength == UART\_WORDLENGTH\_9B) \&\& (huart-\/>Init.Parity == UART\_PARITY\_NONE))}
\DoxyCodeLine{01148     \{}
\DoxyCodeLine{01149       pdata8bits  = NULL;}
\DoxyCodeLine{01150       pdata16bits = (\textcolor{keyword}{const} uint16\_t *) pData;}
\DoxyCodeLine{01151     \}}
\DoxyCodeLine{01152     \textcolor{keywordflow}{else}}
\DoxyCodeLine{01153     \{}
\DoxyCodeLine{01154       pdata8bits  = pData;}
\DoxyCodeLine{01155       pdata16bits = NULL;}
\DoxyCodeLine{01156     \}}
\DoxyCodeLine{01157 }
\DoxyCodeLine{01158     \_\_HAL\_UNLOCK(huart);}
\DoxyCodeLine{01159 }
\DoxyCodeLine{01160     \textcolor{keywordflow}{while} (huart-\/>TxXferCount > 0U)}
\DoxyCodeLine{01161     \{}
\DoxyCodeLine{01162       \textcolor{keywordflow}{if} (UART\_WaitOnFlagUntilTimeout(huart, UART\_FLAG\_TXE, RESET, tickstart, Timeout) != HAL\_OK)}
\DoxyCodeLine{01163       \{}
\DoxyCodeLine{01164         \textcolor{keywordflow}{return} HAL\_TIMEOUT;}
\DoxyCodeLine{01165       \}}
\DoxyCodeLine{01166       \textcolor{keywordflow}{if} (pdata8bits == NULL)}
\DoxyCodeLine{01167       \{}
\DoxyCodeLine{01168         huart-\/>Instance-\/>TDR = (uint16\_t)(*pdata16bits \& 0x01FFU);}
\DoxyCodeLine{01169         pdata16bits++;}
\DoxyCodeLine{01170       \}}
\DoxyCodeLine{01171       \textcolor{keywordflow}{else}}
\DoxyCodeLine{01172       \{}
\DoxyCodeLine{01173         huart-\/>Instance-\/>TDR = (uint8\_t)(*pdata8bits \& 0xFFU);}
\DoxyCodeLine{01174         pdata8bits++;}
\DoxyCodeLine{01175       \}}
\DoxyCodeLine{01176       huart-\/>TxXferCount-\/-\/;}
\DoxyCodeLine{01177     \}}
\DoxyCodeLine{01178 }
\DoxyCodeLine{01179     \textcolor{keywordflow}{if} (UART\_WaitOnFlagUntilTimeout(huart, UART\_FLAG\_TC, RESET, tickstart, Timeout) != HAL\_OK)}
\DoxyCodeLine{01180     \{}
\DoxyCodeLine{01181       \textcolor{keywordflow}{return} HAL\_TIMEOUT;}
\DoxyCodeLine{01182     \}}
\DoxyCodeLine{01183 }
\DoxyCodeLine{01184     \textcolor{comment}{/* At end of Tx process, restore huart-\/>gState to Ready */}}
\DoxyCodeLine{01185     huart-\/>gState = HAL\_UART\_STATE\_READY;}
\DoxyCodeLine{01186 }
\DoxyCodeLine{01187     \textcolor{keywordflow}{return} HAL\_OK;}
\DoxyCodeLine{01188   \}}
\DoxyCodeLine{01189   \textcolor{keywordflow}{else}}
\DoxyCodeLine{01190   \{}
\DoxyCodeLine{01191     \textcolor{keywordflow}{return} HAL\_BUSY;}
\DoxyCodeLine{01192   \}}
\DoxyCodeLine{01193 \}}
\DoxyCodeLine{01194 }
\DoxyCodeLine{01210 HAL\_StatusTypeDef HAL\_UART\_Receive(UART\_HandleTypeDef *huart, uint8\_t *pData, uint16\_t Size, uint32\_t Timeout)}
\DoxyCodeLine{01211 \{}
\DoxyCodeLine{01212   uint8\_t  *pdata8bits;}
\DoxyCodeLine{01213   uint16\_t *pdata16bits;}
\DoxyCodeLine{01214   uint16\_t uhMask;}
\DoxyCodeLine{01215   uint32\_t tickstart;}
\DoxyCodeLine{01216 }
\DoxyCodeLine{01217   \textcolor{comment}{/* Check that a Rx process is not already ongoing */}}
\DoxyCodeLine{01218   \textcolor{keywordflow}{if} (huart-\/>RxState == HAL\_UART\_STATE\_READY)}
\DoxyCodeLine{01219   \{}
\DoxyCodeLine{01220     \textcolor{keywordflow}{if} ((pData == NULL) || (Size == 0U))}
\DoxyCodeLine{01221     \{}
\DoxyCodeLine{01222       \textcolor{keywordflow}{return}  HAL\_ERROR;}
\DoxyCodeLine{01223     \}}
\DoxyCodeLine{01224 }
\DoxyCodeLine{01225     \_\_HAL\_LOCK(huart);}
\DoxyCodeLine{01226 }
\DoxyCodeLine{01227     huart-\/>ErrorCode = HAL\_UART\_ERROR\_NONE;}
\DoxyCodeLine{01228     huart-\/>RxState = HAL\_UART\_STATE\_BUSY\_RX;}
\DoxyCodeLine{01229     huart-\/>ReceptionType = HAL\_UART\_RECEPTION\_STANDARD;}
\DoxyCodeLine{01230 }
\DoxyCodeLine{01231     \textcolor{comment}{/* Init tickstart for timeout management */}}
\DoxyCodeLine{01232     tickstart = HAL\_GetTick();}
\DoxyCodeLine{01233 }
\DoxyCodeLine{01234     huart-\/>RxXferSize  = Size;}
\DoxyCodeLine{01235     huart-\/>RxXferCount = Size;}
\DoxyCodeLine{01236 }
\DoxyCodeLine{01237     \textcolor{comment}{/* Computation of UART mask to apply to RDR register */}}
\DoxyCodeLine{01238     UART\_MASK\_COMPUTATION(huart);}
\DoxyCodeLine{01239     uhMask = huart-\/>Mask;}
\DoxyCodeLine{01240 }
\DoxyCodeLine{01241     \textcolor{comment}{/* In case of 9bits/No Parity transfer, pRxData needs to be handled as a uint16\_t pointer */}}
\DoxyCodeLine{01242     \textcolor{keywordflow}{if} ((huart-\/>Init.WordLength == UART\_WORDLENGTH\_9B) \&\& (huart-\/>Init.Parity == UART\_PARITY\_NONE))}
\DoxyCodeLine{01243     \{}
\DoxyCodeLine{01244       pdata8bits  = NULL;}
\DoxyCodeLine{01245       pdata16bits = (uint16\_t *) pData;}
\DoxyCodeLine{01246     \}}
\DoxyCodeLine{01247     \textcolor{keywordflow}{else}}
\DoxyCodeLine{01248     \{}
\DoxyCodeLine{01249       pdata8bits  = pData;}
\DoxyCodeLine{01250       pdata16bits = NULL;}
\DoxyCodeLine{01251     \}}
\DoxyCodeLine{01252 }
\DoxyCodeLine{01253     \_\_HAL\_UNLOCK(huart);}
\DoxyCodeLine{01254 }
\DoxyCodeLine{01255     \textcolor{comment}{/* as long as data have to be received */}}
\DoxyCodeLine{01256     \textcolor{keywordflow}{while} (huart-\/>RxXferCount > 0U)}
\DoxyCodeLine{01257     \{}
\DoxyCodeLine{01258       \textcolor{keywordflow}{if} (UART\_WaitOnFlagUntilTimeout(huart, UART\_FLAG\_RXNE, RESET, tickstart, Timeout) != HAL\_OK)}
\DoxyCodeLine{01259       \{}
\DoxyCodeLine{01260         \textcolor{keywordflow}{return} HAL\_TIMEOUT;}
\DoxyCodeLine{01261       \}}
\DoxyCodeLine{01262       \textcolor{keywordflow}{if} (pdata8bits == NULL)}
\DoxyCodeLine{01263       \{}
\DoxyCodeLine{01264         *pdata16bits = (uint16\_t)(huart-\/>Instance-\/>RDR \& uhMask);}
\DoxyCodeLine{01265         pdata16bits++;}
\DoxyCodeLine{01266       \}}
\DoxyCodeLine{01267       \textcolor{keywordflow}{else}}
\DoxyCodeLine{01268       \{}
\DoxyCodeLine{01269         *pdata8bits = (uint8\_t)(huart-\/>Instance-\/>RDR \& (uint8\_t)uhMask);}
\DoxyCodeLine{01270         pdata8bits++;}
\DoxyCodeLine{01271       \}}
\DoxyCodeLine{01272       huart-\/>RxXferCount-\/-\/;}
\DoxyCodeLine{01273     \}}
\DoxyCodeLine{01274 }
\DoxyCodeLine{01275     \textcolor{comment}{/* At end of Rx process, restore huart-\/>RxState to Ready */}}
\DoxyCodeLine{01276     huart-\/>RxState = HAL\_UART\_STATE\_READY;}
\DoxyCodeLine{01277 }
\DoxyCodeLine{01278     \textcolor{keywordflow}{return} HAL\_OK;}
\DoxyCodeLine{01279   \}}
\DoxyCodeLine{01280   \textcolor{keywordflow}{else}}
\DoxyCodeLine{01281   \{}
\DoxyCodeLine{01282     \textcolor{keywordflow}{return} HAL\_BUSY;}
\DoxyCodeLine{01283   \}}
\DoxyCodeLine{01284 \}}
\DoxyCodeLine{01285 }
\DoxyCodeLine{01296 HAL\_StatusTypeDef HAL\_UART\_Transmit\_IT(UART\_HandleTypeDef *huart, \textcolor{keyword}{const} uint8\_t *pData, uint16\_t Size)}
\DoxyCodeLine{01297 \{}
\DoxyCodeLine{01298   \textcolor{comment}{/* Check that a Tx process is not already ongoing */}}
\DoxyCodeLine{01299   \textcolor{keywordflow}{if} (huart-\/>gState == HAL\_UART\_STATE\_READY)}
\DoxyCodeLine{01300   \{}
\DoxyCodeLine{01301     \textcolor{keywordflow}{if} ((pData == NULL) || (Size == 0U))}
\DoxyCodeLine{01302     \{}
\DoxyCodeLine{01303       \textcolor{keywordflow}{return} HAL\_ERROR;}
\DoxyCodeLine{01304     \}}
\DoxyCodeLine{01305 }
\DoxyCodeLine{01306     \_\_HAL\_LOCK(huart);}
\DoxyCodeLine{01307 }
\DoxyCodeLine{01308     huart-\/>pTxBuffPtr  = pData;}
\DoxyCodeLine{01309     huart-\/>TxXferSize  = Size;}
\DoxyCodeLine{01310     huart-\/>TxXferCount = Size;}
\DoxyCodeLine{01311     huart-\/>TxISR       = NULL;}
\DoxyCodeLine{01312 }
\DoxyCodeLine{01313     huart-\/>ErrorCode = HAL\_UART\_ERROR\_NONE;}
\DoxyCodeLine{01314     huart-\/>gState = HAL\_UART\_STATE\_BUSY\_TX;}
\DoxyCodeLine{01315 }
\DoxyCodeLine{01316     \textcolor{comment}{/* Configure Tx interrupt processing */}}
\DoxyCodeLine{01317     \textcolor{keywordflow}{if} (huart-\/>FifoMode == UART\_FIFOMODE\_ENABLE)}
\DoxyCodeLine{01318     \{}
\DoxyCodeLine{01319       \textcolor{comment}{/* Set the Tx ISR function pointer according to the data word length */}}
\DoxyCodeLine{01320       \textcolor{keywordflow}{if} ((huart-\/>Init.WordLength == UART\_WORDLENGTH\_9B) \&\& (huart-\/>Init.Parity == UART\_PARITY\_NONE))}
\DoxyCodeLine{01321       \{}
\DoxyCodeLine{01322         huart-\/>TxISR = UART\_TxISR\_16BIT\_FIFOEN;}
\DoxyCodeLine{01323       \}}
\DoxyCodeLine{01324       \textcolor{keywordflow}{else}}
\DoxyCodeLine{01325       \{}
\DoxyCodeLine{01326         huart-\/>TxISR = UART\_TxISR\_8BIT\_FIFOEN;}
\DoxyCodeLine{01327       \}}
\DoxyCodeLine{01328 }
\DoxyCodeLine{01329       \_\_HAL\_UNLOCK(huart);}
\DoxyCodeLine{01330 }
\DoxyCodeLine{01331       \textcolor{comment}{/* Enable the TX FIFO threshold interrupt */}}
\DoxyCodeLine{01332       ATOMIC\_SET\_BIT(huart-\/>Instance-\/>CR3, USART\_CR3\_TXFTIE);}
\DoxyCodeLine{01333     \}}
\DoxyCodeLine{01334     \textcolor{keywordflow}{else}}
\DoxyCodeLine{01335     \{}
\DoxyCodeLine{01336       \textcolor{comment}{/* Set the Tx ISR function pointer according to the data word length */}}
\DoxyCodeLine{01337       \textcolor{keywordflow}{if} ((huart-\/>Init.WordLength == UART\_WORDLENGTH\_9B) \&\& (huart-\/>Init.Parity == UART\_PARITY\_NONE))}
\DoxyCodeLine{01338       \{}
\DoxyCodeLine{01339         huart-\/>TxISR = UART\_TxISR\_16BIT;}
\DoxyCodeLine{01340       \}}
\DoxyCodeLine{01341       \textcolor{keywordflow}{else}}
\DoxyCodeLine{01342       \{}
\DoxyCodeLine{01343         huart-\/>TxISR = UART\_TxISR\_8BIT;}
\DoxyCodeLine{01344       \}}
\DoxyCodeLine{01345 }
\DoxyCodeLine{01346       \_\_HAL\_UNLOCK(huart);}
\DoxyCodeLine{01347 }
\DoxyCodeLine{01348       \textcolor{comment}{/* Enable the Transmit Data Register Empty interrupt */}}
\DoxyCodeLine{01349       ATOMIC\_SET\_BIT(huart-\/>Instance-\/>CR1, USART\_CR1\_TXEIE\_TXFNFIE);}
\DoxyCodeLine{01350     \}}
\DoxyCodeLine{01351 }
\DoxyCodeLine{01352     \textcolor{keywordflow}{return} HAL\_OK;}
\DoxyCodeLine{01353   \}}
\DoxyCodeLine{01354   \textcolor{keywordflow}{else}}
\DoxyCodeLine{01355   \{}
\DoxyCodeLine{01356     \textcolor{keywordflow}{return} HAL\_BUSY;}
\DoxyCodeLine{01357   \}}
\DoxyCodeLine{01358 \}}
\DoxyCodeLine{01359 }
\DoxyCodeLine{01370 HAL\_StatusTypeDef HAL\_UART\_Receive\_IT(UART\_HandleTypeDef *huart, uint8\_t *pData, uint16\_t Size)}
\DoxyCodeLine{01371 \{}
\DoxyCodeLine{01372   \textcolor{comment}{/* Check that a Rx process is not already ongoing */}}
\DoxyCodeLine{01373   \textcolor{keywordflow}{if} (huart-\/>RxState == HAL\_UART\_STATE\_READY)}
\DoxyCodeLine{01374   \{}
\DoxyCodeLine{01375     \textcolor{keywordflow}{if} ((pData == NULL) || (Size == 0U))}
\DoxyCodeLine{01376     \{}
\DoxyCodeLine{01377       \textcolor{keywordflow}{return} HAL\_ERROR;}
\DoxyCodeLine{01378     \}}
\DoxyCodeLine{01379 }
\DoxyCodeLine{01380     \_\_HAL\_LOCK(huart);}
\DoxyCodeLine{01381 }
\DoxyCodeLine{01382     \textcolor{comment}{/* Set Reception type to Standard reception */}}
\DoxyCodeLine{01383     huart-\/>ReceptionType = HAL\_UART\_RECEPTION\_STANDARD;}
\DoxyCodeLine{01384 }
\DoxyCodeLine{01385     \textcolor{keywordflow}{if} (!(IS\_LPUART\_INSTANCE(huart-\/>Instance)))}
\DoxyCodeLine{01386     \{}
\DoxyCodeLine{01387       \textcolor{comment}{/* Check that USART RTOEN bit is set */}}
\DoxyCodeLine{01388       \textcolor{keywordflow}{if} (READ\_BIT(huart-\/>Instance-\/>CR2, USART\_CR2\_RTOEN) != 0U)}
\DoxyCodeLine{01389       \{}
\DoxyCodeLine{01390         \textcolor{comment}{/* Enable the UART Receiver Timeout Interrupt */}}
\DoxyCodeLine{01391         ATOMIC\_SET\_BIT(huart-\/>Instance-\/>CR1, USART\_CR1\_RTOIE);}
\DoxyCodeLine{01392       \}}
\DoxyCodeLine{01393     \}}
\DoxyCodeLine{01394 }
\DoxyCodeLine{01395     \textcolor{keywordflow}{return} (UART\_Start\_Receive\_IT(huart, pData, Size));}
\DoxyCodeLine{01396   \}}
\DoxyCodeLine{01397   \textcolor{keywordflow}{else}}
\DoxyCodeLine{01398   \{}
\DoxyCodeLine{01399     \textcolor{keywordflow}{return} HAL\_BUSY;}
\DoxyCodeLine{01400   \}}
\DoxyCodeLine{01401 \}}
\DoxyCodeLine{01402 }
\DoxyCodeLine{01413 HAL\_StatusTypeDef HAL\_UART\_Transmit\_DMA(UART\_HandleTypeDef *huart, \textcolor{keyword}{const} uint8\_t *pData, uint16\_t Size)}
\DoxyCodeLine{01414 \{}
\DoxyCodeLine{01415   \textcolor{comment}{/* Check that a Tx process is not already ongoing */}}
\DoxyCodeLine{01416   \textcolor{keywordflow}{if} (huart-\/>gState == HAL\_UART\_STATE\_READY)}
\DoxyCodeLine{01417   \{}
\DoxyCodeLine{01418     \textcolor{keywordflow}{if} ((pData == NULL) || (Size == 0U))}
\DoxyCodeLine{01419     \{}
\DoxyCodeLine{01420       \textcolor{keywordflow}{return} HAL\_ERROR;}
\DoxyCodeLine{01421     \}}
\DoxyCodeLine{01422 }
\DoxyCodeLine{01423     \_\_HAL\_LOCK(huart);}
\DoxyCodeLine{01424 }
\DoxyCodeLine{01425     huart-\/>pTxBuffPtr  = pData;}
\DoxyCodeLine{01426     huart-\/>TxXferSize  = Size;}
\DoxyCodeLine{01427     huart-\/>TxXferCount = Size;}
\DoxyCodeLine{01428 }
\DoxyCodeLine{01429     huart-\/>ErrorCode = HAL\_UART\_ERROR\_NONE;}
\DoxyCodeLine{01430     huart-\/>gState = HAL\_UART\_STATE\_BUSY\_TX;}
\DoxyCodeLine{01431 }
\DoxyCodeLine{01432     \textcolor{keywordflow}{if} (huart-\/>hdmatx != NULL)}
\DoxyCodeLine{01433     \{}
\DoxyCodeLine{01434       \textcolor{comment}{/* Set the UART DMA transfer complete callback */}}
\DoxyCodeLine{01435       huart-\/>hdmatx-\/>XferCpltCallback = UART\_DMATransmitCplt;}
\DoxyCodeLine{01436 }
\DoxyCodeLine{01437       \textcolor{comment}{/* Set the UART DMA Half transfer complete callback */}}
\DoxyCodeLine{01438       huart-\/>hdmatx-\/>XferHalfCpltCallback = UART\_DMATxHalfCplt;}
\DoxyCodeLine{01439 }
\DoxyCodeLine{01440       \textcolor{comment}{/* Set the DMA error callback */}}
\DoxyCodeLine{01441       huart-\/>hdmatx-\/>XferErrorCallback = UART\_DMAError;}
\DoxyCodeLine{01442 }
\DoxyCodeLine{01443       \textcolor{comment}{/* Set the DMA abort callback */}}
\DoxyCodeLine{01444       huart-\/>hdmatx-\/>XferAbortCallback = NULL;}
\DoxyCodeLine{01445 }
\DoxyCodeLine{01446       \textcolor{comment}{/* Enable the UART transmit DMA channel */}}
\DoxyCodeLine{01447       \textcolor{keywordflow}{if} (HAL\_DMA\_Start\_IT(huart-\/>hdmatx, (uint32\_t)huart-\/>pTxBuffPtr, (uint32\_t)\&huart-\/>Instance-\/>TDR, Size) != HAL\_OK)}
\DoxyCodeLine{01448       \{}
\DoxyCodeLine{01449         \textcolor{comment}{/* Set error code to DMA */}}
\DoxyCodeLine{01450         huart-\/>ErrorCode = HAL\_UART\_ERROR\_DMA;}
\DoxyCodeLine{01451 }
\DoxyCodeLine{01452         \_\_HAL\_UNLOCK(huart);}
\DoxyCodeLine{01453 }
\DoxyCodeLine{01454         \textcolor{comment}{/* Restore huart-\/>gState to ready */}}
\DoxyCodeLine{01455         huart-\/>gState = HAL\_UART\_STATE\_READY;}
\DoxyCodeLine{01456 }
\DoxyCodeLine{01457         \textcolor{keywordflow}{return} HAL\_ERROR;}
\DoxyCodeLine{01458       \}}
\DoxyCodeLine{01459     \}}
\DoxyCodeLine{01460     \textcolor{comment}{/* Clear the TC flag in the ICR register */}}
\DoxyCodeLine{01461     \_\_HAL\_UART\_CLEAR\_FLAG(huart, UART\_CLEAR\_TCF);}
\DoxyCodeLine{01462 }
\DoxyCodeLine{01463     \_\_HAL\_UNLOCK(huart);}
\DoxyCodeLine{01464 }
\DoxyCodeLine{01465     \textcolor{comment}{/* Enable the DMA transfer for transmit request by setting the DMAT bit}}
\DoxyCodeLine{01466 \textcolor{comment}{    in the UART CR3 register */}}
\DoxyCodeLine{01467     ATOMIC\_SET\_BIT(huart-\/>Instance-\/>CR3, USART\_CR3\_DMAT);}
\DoxyCodeLine{01468 }
\DoxyCodeLine{01469     \textcolor{keywordflow}{return} HAL\_OK;}
\DoxyCodeLine{01470   \}}
\DoxyCodeLine{01471   \textcolor{keywordflow}{else}}
\DoxyCodeLine{01472   \{}
\DoxyCodeLine{01473     \textcolor{keywordflow}{return} HAL\_BUSY;}
\DoxyCodeLine{01474   \}}
\DoxyCodeLine{01475 \}}
\DoxyCodeLine{01476 }
\DoxyCodeLine{01489 HAL\_StatusTypeDef HAL\_UART\_Receive\_DMA(UART\_HandleTypeDef *huart, uint8\_t *pData, uint16\_t Size)}
\DoxyCodeLine{01490 \{}
\DoxyCodeLine{01491   \textcolor{comment}{/* Check that a Rx process is not already ongoing */}}
\DoxyCodeLine{01492   \textcolor{keywordflow}{if} (huart-\/>RxState == HAL\_UART\_STATE\_READY)}
\DoxyCodeLine{01493   \{}
\DoxyCodeLine{01494     \textcolor{keywordflow}{if} ((pData == NULL) || (Size == 0U))}
\DoxyCodeLine{01495     \{}
\DoxyCodeLine{01496       \textcolor{keywordflow}{return} HAL\_ERROR;}
\DoxyCodeLine{01497     \}}
\DoxyCodeLine{01498 }
\DoxyCodeLine{01499     \_\_HAL\_LOCK(huart);}
\DoxyCodeLine{01500 }
\DoxyCodeLine{01501     \textcolor{comment}{/* Set Reception type to Standard reception */}}
\DoxyCodeLine{01502     huart-\/>ReceptionType = HAL\_UART\_RECEPTION\_STANDARD;}
\DoxyCodeLine{01503 }
\DoxyCodeLine{01504     \textcolor{keywordflow}{if} (!(IS\_LPUART\_INSTANCE(huart-\/>Instance)))}
\DoxyCodeLine{01505     \{}
\DoxyCodeLine{01506       \textcolor{comment}{/* Check that USART RTOEN bit is set */}}
\DoxyCodeLine{01507       \textcolor{keywordflow}{if} (READ\_BIT(huart-\/>Instance-\/>CR2, USART\_CR2\_RTOEN) != 0U)}
\DoxyCodeLine{01508       \{}
\DoxyCodeLine{01509         \textcolor{comment}{/* Enable the UART Receiver Timeout Interrupt */}}
\DoxyCodeLine{01510         ATOMIC\_SET\_BIT(huart-\/>Instance-\/>CR1, USART\_CR1\_RTOIE);}
\DoxyCodeLine{01511       \}}
\DoxyCodeLine{01512     \}}
\DoxyCodeLine{01513 }
\DoxyCodeLine{01514     \textcolor{keywordflow}{return} (UART\_Start\_Receive\_DMA(huart, pData, Size));}
\DoxyCodeLine{01515   \}}
\DoxyCodeLine{01516   \textcolor{keywordflow}{else}}
\DoxyCodeLine{01517   \{}
\DoxyCodeLine{01518     \textcolor{keywordflow}{return} HAL\_BUSY;}
\DoxyCodeLine{01519   \}}
\DoxyCodeLine{01520 \}}
\DoxyCodeLine{01521 }
\DoxyCodeLine{01527 HAL\_StatusTypeDef HAL\_UART\_DMAPause(UART\_HandleTypeDef *huart)}
\DoxyCodeLine{01528 \{}
\DoxyCodeLine{01529   \textcolor{keyword}{const} HAL\_UART\_StateTypeDef gstate = huart-\/>gState;}
\DoxyCodeLine{01530   \textcolor{keyword}{const} HAL\_UART\_StateTypeDef rxstate = huart-\/>RxState;}
\DoxyCodeLine{01531 }
\DoxyCodeLine{01532   \_\_HAL\_LOCK(huart);}
\DoxyCodeLine{01533 }
\DoxyCodeLine{01534   \textcolor{keywordflow}{if} ((HAL\_IS\_BIT\_SET(huart-\/>Instance-\/>CR3, USART\_CR3\_DMAT)) \&\&}
\DoxyCodeLine{01535       (gstate == HAL\_UART\_STATE\_BUSY\_TX))}
\DoxyCodeLine{01536   \{}
\DoxyCodeLine{01537     \textcolor{comment}{/* Disable the UART DMA Tx request */}}
\DoxyCodeLine{01538     ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR3, USART\_CR3\_DMAT);}
\DoxyCodeLine{01539   \}}
\DoxyCodeLine{01540   \textcolor{keywordflow}{if} ((HAL\_IS\_BIT\_SET(huart-\/>Instance-\/>CR3, USART\_CR3\_DMAR)) \&\&}
\DoxyCodeLine{01541       (rxstate == HAL\_UART\_STATE\_BUSY\_RX))}
\DoxyCodeLine{01542   \{}
\DoxyCodeLine{01543     \textcolor{comment}{/* Disable PE and ERR (Frame error, noise error, overrun error) interrupts */}}
\DoxyCodeLine{01544     ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR1, USART\_CR1\_PEIE);}
\DoxyCodeLine{01545     ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR3, USART\_CR3\_EIE);}
\DoxyCodeLine{01546 }
\DoxyCodeLine{01547     \textcolor{comment}{/* Disable the UART DMA Rx request */}}
\DoxyCodeLine{01548     ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR3, USART\_CR3\_DMAR);}
\DoxyCodeLine{01549   \}}
\DoxyCodeLine{01550 }
\DoxyCodeLine{01551   \_\_HAL\_UNLOCK(huart);}
\DoxyCodeLine{01552 }
\DoxyCodeLine{01553   \textcolor{keywordflow}{return} HAL\_OK;}
\DoxyCodeLine{01554 \}}
\DoxyCodeLine{01555 }
\DoxyCodeLine{01561 HAL\_StatusTypeDef HAL\_UART\_DMAResume(UART\_HandleTypeDef *huart)}
\DoxyCodeLine{01562 \{}
\DoxyCodeLine{01563   \_\_HAL\_LOCK(huart);}
\DoxyCodeLine{01564 }
\DoxyCodeLine{01565   \textcolor{keywordflow}{if} (huart-\/>gState == HAL\_UART\_STATE\_BUSY\_TX)}
\DoxyCodeLine{01566   \{}
\DoxyCodeLine{01567     \textcolor{comment}{/* Enable the UART DMA Tx request */}}
\DoxyCodeLine{01568     ATOMIC\_SET\_BIT(huart-\/>Instance-\/>CR3, USART\_CR3\_DMAT);}
\DoxyCodeLine{01569   \}}
\DoxyCodeLine{01570   \textcolor{keywordflow}{if} (huart-\/>RxState == HAL\_UART\_STATE\_BUSY\_RX)}
\DoxyCodeLine{01571   \{}
\DoxyCodeLine{01572     \textcolor{comment}{/* Clear the Overrun flag before resuming the Rx transfer */}}
\DoxyCodeLine{01573     \_\_HAL\_UART\_CLEAR\_FLAG(huart, UART\_CLEAR\_OREF);}
\DoxyCodeLine{01574 }
\DoxyCodeLine{01575     \textcolor{comment}{/* Re-\/enable PE and ERR (Frame error, noise error, overrun error) interrupts */}}
\DoxyCodeLine{01576     \textcolor{keywordflow}{if} (huart-\/>Init.Parity != UART\_PARITY\_NONE)}
\DoxyCodeLine{01577     \{    }
\DoxyCodeLine{01578       ATOMIC\_SET\_BIT(huart-\/>Instance-\/>CR1, USART\_CR1\_PEIE);}
\DoxyCodeLine{01579     \}}
\DoxyCodeLine{01580     ATOMIC\_SET\_BIT(huart-\/>Instance-\/>CR3, USART\_CR3\_EIE);}
\DoxyCodeLine{01581 }
\DoxyCodeLine{01582     \textcolor{comment}{/* Enable the UART DMA Rx request */}}
\DoxyCodeLine{01583     ATOMIC\_SET\_BIT(huart-\/>Instance-\/>CR3, USART\_CR3\_DMAR);}
\DoxyCodeLine{01584   \}}
\DoxyCodeLine{01585 }
\DoxyCodeLine{01586   \_\_HAL\_UNLOCK(huart);}
\DoxyCodeLine{01587 }
\DoxyCodeLine{01588   \textcolor{keywordflow}{return} HAL\_OK;}
\DoxyCodeLine{01589 \}}
\DoxyCodeLine{01590 }
\DoxyCodeLine{01596 HAL\_StatusTypeDef HAL\_UART\_DMAStop(UART\_HandleTypeDef *huart)}
\DoxyCodeLine{01597 \{}
\DoxyCodeLine{01598   \textcolor{comment}{/* The Lock is not implemented on this API to allow the user application}}
\DoxyCodeLine{01599 \textcolor{comment}{     to call the HAL UART API under callbacks HAL\_UART\_TxCpltCallback() / HAL\_UART\_RxCpltCallback() /}}
\DoxyCodeLine{01600 \textcolor{comment}{     HAL\_UART\_TxHalfCpltCallback / HAL\_UART\_RxHalfCpltCallback:}}
\DoxyCodeLine{01601 \textcolor{comment}{     indeed, when HAL\_DMA\_Abort() API is called, the DMA TX/RX Transfer or Half Transfer complete}}
\DoxyCodeLine{01602 \textcolor{comment}{     interrupt is generated if the DMA transfer interruption occurs at the middle or at the end of}}
\DoxyCodeLine{01603 \textcolor{comment}{     the stream and the corresponding call back is executed. */}}
\DoxyCodeLine{01604 }
\DoxyCodeLine{01605   \textcolor{keyword}{const} HAL\_UART\_StateTypeDef gstate = huart-\/>gState;}
\DoxyCodeLine{01606   \textcolor{keyword}{const} HAL\_UART\_StateTypeDef rxstate = huart-\/>RxState;}
\DoxyCodeLine{01607 }
\DoxyCodeLine{01608   \textcolor{comment}{/* Stop UART DMA Tx request if ongoing */}}
\DoxyCodeLine{01609   \textcolor{keywordflow}{if} ((HAL\_IS\_BIT\_SET(huart-\/>Instance-\/>CR3, USART\_CR3\_DMAT)) \&\&}
\DoxyCodeLine{01610       (gstate == HAL\_UART\_STATE\_BUSY\_TX))}
\DoxyCodeLine{01611   \{}
\DoxyCodeLine{01612     ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR3, USART\_CR3\_DMAT);}
\DoxyCodeLine{01613 }
\DoxyCodeLine{01614     \textcolor{comment}{/* Abort the UART DMA Tx channel */}}
\DoxyCodeLine{01615     \textcolor{keywordflow}{if} (huart-\/>hdmatx != NULL)}
\DoxyCodeLine{01616     \{}
\DoxyCodeLine{01617       \textcolor{keywordflow}{if} (HAL\_DMA\_Abort(huart-\/>hdmatx) != HAL\_OK)}
\DoxyCodeLine{01618       \{}
\DoxyCodeLine{01619         \textcolor{keywordflow}{if} (HAL\_DMA\_GetError(huart-\/>hdmatx) == HAL\_DMA\_ERROR\_TIMEOUT)}
\DoxyCodeLine{01620         \{}
\DoxyCodeLine{01621           \textcolor{comment}{/* Set error code to DMA */}}
\DoxyCodeLine{01622           huart-\/>ErrorCode = HAL\_UART\_ERROR\_DMA;}
\DoxyCodeLine{01623 }
\DoxyCodeLine{01624           \textcolor{keywordflow}{return} HAL\_TIMEOUT;}
\DoxyCodeLine{01625         \}}
\DoxyCodeLine{01626       \}}
\DoxyCodeLine{01627     \}}
\DoxyCodeLine{01628 }
\DoxyCodeLine{01629     UART\_EndTxTransfer(huart);}
\DoxyCodeLine{01630   \}}
\DoxyCodeLine{01631 }
\DoxyCodeLine{01632   \textcolor{comment}{/* Stop UART DMA Rx request if ongoing */}}
\DoxyCodeLine{01633   \textcolor{keywordflow}{if} ((HAL\_IS\_BIT\_SET(huart-\/>Instance-\/>CR3, USART\_CR3\_DMAR)) \&\&}
\DoxyCodeLine{01634       (rxstate == HAL\_UART\_STATE\_BUSY\_RX))}
\DoxyCodeLine{01635   \{}
\DoxyCodeLine{01636     ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR3, USART\_CR3\_DMAR);}
\DoxyCodeLine{01637 }
\DoxyCodeLine{01638     \textcolor{comment}{/* Abort the UART DMA Rx channel */}}
\DoxyCodeLine{01639     \textcolor{keywordflow}{if} (huart-\/>hdmarx != NULL)}
\DoxyCodeLine{01640     \{}
\DoxyCodeLine{01641       \textcolor{keywordflow}{if} (HAL\_DMA\_Abort(huart-\/>hdmarx) != HAL\_OK)}
\DoxyCodeLine{01642       \{}
\DoxyCodeLine{01643         \textcolor{keywordflow}{if} (HAL\_DMA\_GetError(huart-\/>hdmarx) == HAL\_DMA\_ERROR\_TIMEOUT)}
\DoxyCodeLine{01644         \{}
\DoxyCodeLine{01645           \textcolor{comment}{/* Set error code to DMA */}}
\DoxyCodeLine{01646           huart-\/>ErrorCode = HAL\_UART\_ERROR\_DMA;}
\DoxyCodeLine{01647 }
\DoxyCodeLine{01648           \textcolor{keywordflow}{return} HAL\_TIMEOUT;}
\DoxyCodeLine{01649         \}}
\DoxyCodeLine{01650       \}}
\DoxyCodeLine{01651     \}}
\DoxyCodeLine{01652 }
\DoxyCodeLine{01653     UART\_EndRxTransfer(huart);}
\DoxyCodeLine{01654   \}}
\DoxyCodeLine{01655 }
\DoxyCodeLine{01656   \textcolor{keywordflow}{return} HAL\_OK;}
\DoxyCodeLine{01657 \}}
\DoxyCodeLine{01658 }
\DoxyCodeLine{01671 HAL\_StatusTypeDef HAL\_UART\_Abort(UART\_HandleTypeDef *huart)}
\DoxyCodeLine{01672 \{}
\DoxyCodeLine{01673   \textcolor{comment}{/* Disable TXE, TC, RXNE, PE, RXFT, TXFT and ERR (Frame error, noise error, overrun error) interrupts */}}
\DoxyCodeLine{01674   ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR1, (USART\_CR1\_RXNEIE\_RXFNEIE | USART\_CR1\_PEIE |}
\DoxyCodeLine{01675                                           USART\_CR1\_TXEIE\_TXFNFIE | USART\_CR1\_TCIE));}
\DoxyCodeLine{01676   ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR3, USART\_CR3\_EIE | USART\_CR3\_RXFTIE | USART\_CR3\_TXFTIE);}
\DoxyCodeLine{01677 }
\DoxyCodeLine{01678   \textcolor{comment}{/* If Reception till IDLE event was ongoing, disable IDLEIE interrupt */}}
\DoxyCodeLine{01679   \textcolor{keywordflow}{if} (huart-\/>ReceptionType == HAL\_UART\_RECEPTION\_TOIDLE)}
\DoxyCodeLine{01680   \{}
\DoxyCodeLine{01681     ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR1, (USART\_CR1\_IDLEIE));}
\DoxyCodeLine{01682   \}}
\DoxyCodeLine{01683 }
\DoxyCodeLine{01684   \textcolor{comment}{/* Abort the UART DMA Tx channel if enabled */}}
\DoxyCodeLine{01685   \textcolor{keywordflow}{if} (HAL\_IS\_BIT\_SET(huart-\/>Instance-\/>CR3, USART\_CR3\_DMAT))}
\DoxyCodeLine{01686   \{}
\DoxyCodeLine{01687     \textcolor{comment}{/* Disable the UART DMA Tx request if enabled */}}
\DoxyCodeLine{01688     ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR3, USART\_CR3\_DMAT);}
\DoxyCodeLine{01689 }
\DoxyCodeLine{01690     \textcolor{comment}{/* Abort the UART DMA Tx channel : use blocking DMA Abort API (no callback) */}}
\DoxyCodeLine{01691     \textcolor{keywordflow}{if} (huart-\/>hdmatx != NULL)}
\DoxyCodeLine{01692     \{}
\DoxyCodeLine{01693       \textcolor{comment}{/* Set the UART DMA Abort callback to Null.}}
\DoxyCodeLine{01694 \textcolor{comment}{         No call back execution at end of DMA abort procedure */}}
\DoxyCodeLine{01695       huart-\/>hdmatx-\/>XferAbortCallback = NULL;}
\DoxyCodeLine{01696 }
\DoxyCodeLine{01697       \textcolor{keywordflow}{if} (HAL\_DMA\_Abort(huart-\/>hdmatx) != HAL\_OK)}
\DoxyCodeLine{01698       \{}
\DoxyCodeLine{01699         \textcolor{keywordflow}{if} (HAL\_DMA\_GetError(huart-\/>hdmatx) == HAL\_DMA\_ERROR\_TIMEOUT)}
\DoxyCodeLine{01700         \{}
\DoxyCodeLine{01701           \textcolor{comment}{/* Set error code to DMA */}}
\DoxyCodeLine{01702           huart-\/>ErrorCode = HAL\_UART\_ERROR\_DMA;}
\DoxyCodeLine{01703 }
\DoxyCodeLine{01704           \textcolor{keywordflow}{return} HAL\_TIMEOUT;}
\DoxyCodeLine{01705         \}}
\DoxyCodeLine{01706       \}}
\DoxyCodeLine{01707     \}}
\DoxyCodeLine{01708   \}}
\DoxyCodeLine{01709 }
\DoxyCodeLine{01710   \textcolor{comment}{/* Abort the UART DMA Rx channel if enabled */}}
\DoxyCodeLine{01711   \textcolor{keywordflow}{if} (HAL\_IS\_BIT\_SET(huart-\/>Instance-\/>CR3, USART\_CR3\_DMAR))}
\DoxyCodeLine{01712   \{}
\DoxyCodeLine{01713     \textcolor{comment}{/* Disable the UART DMA Rx request if enabled */}}
\DoxyCodeLine{01714     ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR3, USART\_CR3\_DMAR);}
\DoxyCodeLine{01715 }
\DoxyCodeLine{01716     \textcolor{comment}{/* Abort the UART DMA Rx channel : use blocking DMA Abort API (no callback) */}}
\DoxyCodeLine{01717     \textcolor{keywordflow}{if} (huart-\/>hdmarx != NULL)}
\DoxyCodeLine{01718     \{}
\DoxyCodeLine{01719       \textcolor{comment}{/* Set the UART DMA Abort callback to Null.}}
\DoxyCodeLine{01720 \textcolor{comment}{         No call back execution at end of DMA abort procedure */}}
\DoxyCodeLine{01721       huart-\/>hdmarx-\/>XferAbortCallback = NULL;}
\DoxyCodeLine{01722 }
\DoxyCodeLine{01723       \textcolor{keywordflow}{if} (HAL\_DMA\_Abort(huart-\/>hdmarx) != HAL\_OK)}
\DoxyCodeLine{01724       \{}
\DoxyCodeLine{01725         \textcolor{keywordflow}{if} (HAL\_DMA\_GetError(huart-\/>hdmarx) == HAL\_DMA\_ERROR\_TIMEOUT)}
\DoxyCodeLine{01726         \{}
\DoxyCodeLine{01727           \textcolor{comment}{/* Set error code to DMA */}}
\DoxyCodeLine{01728           huart-\/>ErrorCode = HAL\_UART\_ERROR\_DMA;}
\DoxyCodeLine{01729 }
\DoxyCodeLine{01730           \textcolor{keywordflow}{return} HAL\_TIMEOUT;}
\DoxyCodeLine{01731         \}}
\DoxyCodeLine{01732       \}}
\DoxyCodeLine{01733     \}}
\DoxyCodeLine{01734   \}}
\DoxyCodeLine{01735 }
\DoxyCodeLine{01736   \textcolor{comment}{/* Reset Tx and Rx transfer counters */}}
\DoxyCodeLine{01737   huart-\/>TxXferCount = 0U;}
\DoxyCodeLine{01738   huart-\/>RxXferCount = 0U;}
\DoxyCodeLine{01739 }
\DoxyCodeLine{01740   \textcolor{comment}{/* Clear the Error flags in the ICR register */}}
\DoxyCodeLine{01741   \_\_HAL\_UART\_CLEAR\_FLAG(huart, UART\_CLEAR\_OREF | UART\_CLEAR\_NEF | UART\_CLEAR\_PEF | UART\_CLEAR\_FEF);}
\DoxyCodeLine{01742 }
\DoxyCodeLine{01743   \textcolor{comment}{/* Flush the whole TX FIFO (if needed) */}}
\DoxyCodeLine{01744   \textcolor{keywordflow}{if} (huart-\/>FifoMode == UART\_FIFOMODE\_ENABLE)}
\DoxyCodeLine{01745   \{}
\DoxyCodeLine{01746     \_\_HAL\_UART\_SEND\_REQ(huart, UART\_TXDATA\_FLUSH\_REQUEST);}
\DoxyCodeLine{01747   \}}
\DoxyCodeLine{01748 }
\DoxyCodeLine{01749   \textcolor{comment}{/* Discard the received data */}}
\DoxyCodeLine{01750   \_\_HAL\_UART\_SEND\_REQ(huart, UART\_RXDATA\_FLUSH\_REQUEST);}
\DoxyCodeLine{01751 }
\DoxyCodeLine{01752   \textcolor{comment}{/* Restore huart-\/>gState and huart-\/>RxState to Ready */}}
\DoxyCodeLine{01753   huart-\/>gState  = HAL\_UART\_STATE\_READY;}
\DoxyCodeLine{01754   huart-\/>RxState = HAL\_UART\_STATE\_READY;}
\DoxyCodeLine{01755   huart-\/>ReceptionType = HAL\_UART\_RECEPTION\_STANDARD;}
\DoxyCodeLine{01756 }
\DoxyCodeLine{01757   huart-\/>ErrorCode = HAL\_UART\_ERROR\_NONE;}
\DoxyCodeLine{01758 }
\DoxyCodeLine{01759   \textcolor{keywordflow}{return} HAL\_OK;}
\DoxyCodeLine{01760 \}}
\DoxyCodeLine{01761 }
\DoxyCodeLine{01774 HAL\_StatusTypeDef HAL\_UART\_AbortTransmit(UART\_HandleTypeDef *huart)}
\DoxyCodeLine{01775 \{}
\DoxyCodeLine{01776   \textcolor{comment}{/* Disable TCIE, TXEIE and TXFTIE interrupts */}}
\DoxyCodeLine{01777   ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR1, (USART\_CR1\_TCIE | USART\_CR1\_TXEIE\_TXFNFIE));}
\DoxyCodeLine{01778   ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR3, USART\_CR3\_TXFTIE);}
\DoxyCodeLine{01779 }
\DoxyCodeLine{01780   \textcolor{comment}{/* Abort the UART DMA Tx channel if enabled */}}
\DoxyCodeLine{01781   \textcolor{keywordflow}{if} (HAL\_IS\_BIT\_SET(huart-\/>Instance-\/>CR3, USART\_CR3\_DMAT))}
\DoxyCodeLine{01782   \{}
\DoxyCodeLine{01783     \textcolor{comment}{/* Disable the UART DMA Tx request if enabled */}}
\DoxyCodeLine{01784     ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR3, USART\_CR3\_DMAT);}
\DoxyCodeLine{01785 }
\DoxyCodeLine{01786     \textcolor{comment}{/* Abort the UART DMA Tx channel : use blocking DMA Abort API (no callback) */}}
\DoxyCodeLine{01787     \textcolor{keywordflow}{if} (huart-\/>hdmatx != NULL)}
\DoxyCodeLine{01788     \{}
\DoxyCodeLine{01789       \textcolor{comment}{/* Set the UART DMA Abort callback to Null.}}
\DoxyCodeLine{01790 \textcolor{comment}{         No call back execution at end of DMA abort procedure */}}
\DoxyCodeLine{01791       huart-\/>hdmatx-\/>XferAbortCallback = NULL;}
\DoxyCodeLine{01792 }
\DoxyCodeLine{01793       \textcolor{keywordflow}{if} (HAL\_DMA\_Abort(huart-\/>hdmatx) != HAL\_OK)}
\DoxyCodeLine{01794       \{}
\DoxyCodeLine{01795         \textcolor{keywordflow}{if} (HAL\_DMA\_GetError(huart-\/>hdmatx) == HAL\_DMA\_ERROR\_TIMEOUT)}
\DoxyCodeLine{01796         \{}
\DoxyCodeLine{01797           \textcolor{comment}{/* Set error code to DMA */}}
\DoxyCodeLine{01798           huart-\/>ErrorCode = HAL\_UART\_ERROR\_DMA;}
\DoxyCodeLine{01799 }
\DoxyCodeLine{01800           \textcolor{keywordflow}{return} HAL\_TIMEOUT;}
\DoxyCodeLine{01801         \}}
\DoxyCodeLine{01802       \}}
\DoxyCodeLine{01803     \}}
\DoxyCodeLine{01804   \}}
\DoxyCodeLine{01805 }
\DoxyCodeLine{01806   \textcolor{comment}{/* Reset Tx transfer counter */}}
\DoxyCodeLine{01807   huart-\/>TxXferCount = 0U;}
\DoxyCodeLine{01808 }
\DoxyCodeLine{01809   \textcolor{comment}{/* Flush the whole TX FIFO (if needed) */}}
\DoxyCodeLine{01810   \textcolor{keywordflow}{if} (huart-\/>FifoMode == UART\_FIFOMODE\_ENABLE)}
\DoxyCodeLine{01811   \{}
\DoxyCodeLine{01812     \_\_HAL\_UART\_SEND\_REQ(huart, UART\_TXDATA\_FLUSH\_REQUEST);}
\DoxyCodeLine{01813   \}}
\DoxyCodeLine{01814 }
\DoxyCodeLine{01815   \textcolor{comment}{/* Restore huart-\/>gState to Ready */}}
\DoxyCodeLine{01816   huart-\/>gState = HAL\_UART\_STATE\_READY;}
\DoxyCodeLine{01817 }
\DoxyCodeLine{01818   \textcolor{keywordflow}{return} HAL\_OK;}
\DoxyCodeLine{01819 \}}
\DoxyCodeLine{01820 }
\DoxyCodeLine{01833 HAL\_StatusTypeDef HAL\_UART\_AbortReceive(UART\_HandleTypeDef *huart)}
\DoxyCodeLine{01834 \{}
\DoxyCodeLine{01835   \textcolor{comment}{/* Disable PEIE, EIE, RXNEIE and RXFTIE interrupts */}}
\DoxyCodeLine{01836   ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR1, (USART\_CR1\_PEIE | USART\_CR1\_RXNEIE\_RXFNEIE));}
\DoxyCodeLine{01837   ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR3, USART\_CR3\_EIE | USART\_CR3\_RXFTIE);}
\DoxyCodeLine{01838 }
\DoxyCodeLine{01839   \textcolor{comment}{/* If Reception till IDLE event was ongoing, disable IDLEIE interrupt */}}
\DoxyCodeLine{01840   \textcolor{keywordflow}{if} (huart-\/>ReceptionType == HAL\_UART\_RECEPTION\_TOIDLE)}
\DoxyCodeLine{01841   \{}
\DoxyCodeLine{01842     ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR1, (USART\_CR1\_IDLEIE));}
\DoxyCodeLine{01843   \}}
\DoxyCodeLine{01844 }
\DoxyCodeLine{01845   \textcolor{comment}{/* Abort the UART DMA Rx channel if enabled */}}
\DoxyCodeLine{01846   \textcolor{keywordflow}{if} (HAL\_IS\_BIT\_SET(huart-\/>Instance-\/>CR3, USART\_CR3\_DMAR))}
\DoxyCodeLine{01847   \{}
\DoxyCodeLine{01848     \textcolor{comment}{/* Disable the UART DMA Rx request if enabled */}}
\DoxyCodeLine{01849     ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR3, USART\_CR3\_DMAR);}
\DoxyCodeLine{01850 }
\DoxyCodeLine{01851     \textcolor{comment}{/* Abort the UART DMA Rx channel : use blocking DMA Abort API (no callback) */}}
\DoxyCodeLine{01852     \textcolor{keywordflow}{if} (huart-\/>hdmarx != NULL)}
\DoxyCodeLine{01853     \{}
\DoxyCodeLine{01854       \textcolor{comment}{/* Set the UART DMA Abort callback to Null.}}
\DoxyCodeLine{01855 \textcolor{comment}{         No call back execution at end of DMA abort procedure */}}
\DoxyCodeLine{01856       huart-\/>hdmarx-\/>XferAbortCallback = NULL;}
\DoxyCodeLine{01857 }
\DoxyCodeLine{01858       \textcolor{keywordflow}{if} (HAL\_DMA\_Abort(huart-\/>hdmarx) != HAL\_OK)}
\DoxyCodeLine{01859       \{}
\DoxyCodeLine{01860         \textcolor{keywordflow}{if} (HAL\_DMA\_GetError(huart-\/>hdmarx) == HAL\_DMA\_ERROR\_TIMEOUT)}
\DoxyCodeLine{01861         \{}
\DoxyCodeLine{01862           \textcolor{comment}{/* Set error code to DMA */}}
\DoxyCodeLine{01863           huart-\/>ErrorCode = HAL\_UART\_ERROR\_DMA;}
\DoxyCodeLine{01864 }
\DoxyCodeLine{01865           \textcolor{keywordflow}{return} HAL\_TIMEOUT;}
\DoxyCodeLine{01866         \}}
\DoxyCodeLine{01867       \}}
\DoxyCodeLine{01868     \}}
\DoxyCodeLine{01869   \}}
\DoxyCodeLine{01870 }
\DoxyCodeLine{01871   \textcolor{comment}{/* Reset Rx transfer counter */}}
\DoxyCodeLine{01872   huart-\/>RxXferCount = 0U;}
\DoxyCodeLine{01873 }
\DoxyCodeLine{01874   \textcolor{comment}{/* Clear the Error flags in the ICR register */}}
\DoxyCodeLine{01875   \_\_HAL\_UART\_CLEAR\_FLAG(huart, UART\_CLEAR\_OREF | UART\_CLEAR\_NEF | UART\_CLEAR\_PEF | UART\_CLEAR\_FEF);}
\DoxyCodeLine{01876 }
\DoxyCodeLine{01877   \textcolor{comment}{/* Discard the received data */}}
\DoxyCodeLine{01878   \_\_HAL\_UART\_SEND\_REQ(huart, UART\_RXDATA\_FLUSH\_REQUEST);}
\DoxyCodeLine{01879 }
\DoxyCodeLine{01880   \textcolor{comment}{/* Restore huart-\/>RxState to Ready */}}
\DoxyCodeLine{01881   huart-\/>RxState = HAL\_UART\_STATE\_READY;}
\DoxyCodeLine{01882   huart-\/>ReceptionType = HAL\_UART\_RECEPTION\_STANDARD;}
\DoxyCodeLine{01883 }
\DoxyCodeLine{01884   \textcolor{keywordflow}{return} HAL\_OK;}
\DoxyCodeLine{01885 \}}
\DoxyCodeLine{01886 }
\DoxyCodeLine{01901 HAL\_StatusTypeDef HAL\_UART\_Abort\_IT(UART\_HandleTypeDef *huart)}
\DoxyCodeLine{01902 \{}
\DoxyCodeLine{01903   uint32\_t abortcplt = 1U;}
\DoxyCodeLine{01904 }
\DoxyCodeLine{01905   \textcolor{comment}{/* Disable interrupts */}}
\DoxyCodeLine{01906   ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR1, (USART\_CR1\_PEIE | USART\_CR1\_TCIE | USART\_CR1\_RXNEIE\_RXFNEIE |}
\DoxyCodeLine{01907                                           USART\_CR1\_TXEIE\_TXFNFIE));}
\DoxyCodeLine{01908   ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR3, (USART\_CR3\_EIE | USART\_CR3\_RXFTIE | USART\_CR3\_TXFTIE));}
\DoxyCodeLine{01909 }
\DoxyCodeLine{01910   \textcolor{comment}{/* If Reception till IDLE event was ongoing, disable IDLEIE interrupt */}}
\DoxyCodeLine{01911   \textcolor{keywordflow}{if} (huart-\/>ReceptionType == HAL\_UART\_RECEPTION\_TOIDLE)}
\DoxyCodeLine{01912   \{}
\DoxyCodeLine{01913     ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR1, (USART\_CR1\_IDLEIE));}
\DoxyCodeLine{01914   \}}
\DoxyCodeLine{01915 }
\DoxyCodeLine{01916   \textcolor{comment}{/* If DMA Tx and/or DMA Rx Handles are associated to UART Handle, DMA Abort complete callbacks should be initialised}}
\DoxyCodeLine{01917 \textcolor{comment}{     before any call to DMA Abort functions */}}
\DoxyCodeLine{01918   \textcolor{comment}{/* DMA Tx Handle is valid */}}
\DoxyCodeLine{01919   \textcolor{keywordflow}{if} (huart-\/>hdmatx != NULL)}
\DoxyCodeLine{01920   \{}
\DoxyCodeLine{01921     \textcolor{comment}{/* Set DMA Abort Complete callback if UART DMA Tx request if enabled.}}
\DoxyCodeLine{01922 \textcolor{comment}{       Otherwise, set it to NULL */}}
\DoxyCodeLine{01923     \textcolor{keywordflow}{if} (HAL\_IS\_BIT\_SET(huart-\/>Instance-\/>CR3, USART\_CR3\_DMAT))}
\DoxyCodeLine{01924     \{}
\DoxyCodeLine{01925       huart-\/>hdmatx-\/>XferAbortCallback = UART\_DMATxAbortCallback;}
\DoxyCodeLine{01926     \}}
\DoxyCodeLine{01927     \textcolor{keywordflow}{else}}
\DoxyCodeLine{01928     \{}
\DoxyCodeLine{01929       huart-\/>hdmatx-\/>XferAbortCallback = NULL;}
\DoxyCodeLine{01930     \}}
\DoxyCodeLine{01931   \}}
\DoxyCodeLine{01932   \textcolor{comment}{/* DMA Rx Handle is valid */}}
\DoxyCodeLine{01933   \textcolor{keywordflow}{if} (huart-\/>hdmarx != NULL)}
\DoxyCodeLine{01934   \{}
\DoxyCodeLine{01935     \textcolor{comment}{/* Set DMA Abort Complete callback if UART DMA Rx request if enabled.}}
\DoxyCodeLine{01936 \textcolor{comment}{       Otherwise, set it to NULL */}}
\DoxyCodeLine{01937     \textcolor{keywordflow}{if} (HAL\_IS\_BIT\_SET(huart-\/>Instance-\/>CR3, USART\_CR3\_DMAR))}
\DoxyCodeLine{01938     \{}
\DoxyCodeLine{01939       huart-\/>hdmarx-\/>XferAbortCallback = UART\_DMARxAbortCallback;}
\DoxyCodeLine{01940     \}}
\DoxyCodeLine{01941     \textcolor{keywordflow}{else}}
\DoxyCodeLine{01942     \{}
\DoxyCodeLine{01943       huart-\/>hdmarx-\/>XferAbortCallback = NULL;}
\DoxyCodeLine{01944     \}}
\DoxyCodeLine{01945   \}}
\DoxyCodeLine{01946 }
\DoxyCodeLine{01947   \textcolor{comment}{/* Abort the UART DMA Tx channel if enabled */}}
\DoxyCodeLine{01948   \textcolor{keywordflow}{if} (HAL\_IS\_BIT\_SET(huart-\/>Instance-\/>CR3, USART\_CR3\_DMAT))}
\DoxyCodeLine{01949   \{}
\DoxyCodeLine{01950     \textcolor{comment}{/* Disable DMA Tx at UART level */}}
\DoxyCodeLine{01951     ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR3, USART\_CR3\_DMAT);}
\DoxyCodeLine{01952 }
\DoxyCodeLine{01953     \textcolor{comment}{/* Abort the UART DMA Tx channel : use non blocking DMA Abort API (callback) */}}
\DoxyCodeLine{01954     \textcolor{keywordflow}{if} (huart-\/>hdmatx != NULL)}
\DoxyCodeLine{01955     \{}
\DoxyCodeLine{01956       \textcolor{comment}{/* UART Tx DMA Abort callback has already been initialised :}}
\DoxyCodeLine{01957 \textcolor{comment}{         will lead to call HAL\_UART\_AbortCpltCallback() at end of DMA abort procedure */}}
\DoxyCodeLine{01958 }
\DoxyCodeLine{01959       \textcolor{comment}{/* Abort DMA TX */}}
\DoxyCodeLine{01960       \textcolor{keywordflow}{if} (HAL\_DMA\_Abort\_IT(huart-\/>hdmatx) != HAL\_OK)}
\DoxyCodeLine{01961       \{}
\DoxyCodeLine{01962         huart-\/>hdmatx-\/>XferAbortCallback = NULL;}
\DoxyCodeLine{01963       \}}
\DoxyCodeLine{01964       \textcolor{keywordflow}{else}}
\DoxyCodeLine{01965       \{}
\DoxyCodeLine{01966         abortcplt = 0U;}
\DoxyCodeLine{01967       \}}
\DoxyCodeLine{01968     \}}
\DoxyCodeLine{01969   \}}
\DoxyCodeLine{01970 }
\DoxyCodeLine{01971   \textcolor{comment}{/* Abort the UART DMA Rx channel if enabled */}}
\DoxyCodeLine{01972   \textcolor{keywordflow}{if} (HAL\_IS\_BIT\_SET(huart-\/>Instance-\/>CR3, USART\_CR3\_DMAR))}
\DoxyCodeLine{01973   \{}
\DoxyCodeLine{01974     \textcolor{comment}{/* Disable the UART DMA Rx request if enabled */}}
\DoxyCodeLine{01975     ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR3, USART\_CR3\_DMAR);}
\DoxyCodeLine{01976 }
\DoxyCodeLine{01977     \textcolor{comment}{/* Abort the UART DMA Rx channel : use non blocking DMA Abort API (callback) */}}
\DoxyCodeLine{01978     \textcolor{keywordflow}{if} (huart-\/>hdmarx != NULL)}
\DoxyCodeLine{01979     \{}
\DoxyCodeLine{01980       \textcolor{comment}{/* UART Rx DMA Abort callback has already been initialised :}}
\DoxyCodeLine{01981 \textcolor{comment}{         will lead to call HAL\_UART\_AbortCpltCallback() at end of DMA abort procedure */}}
\DoxyCodeLine{01982 }
\DoxyCodeLine{01983       \textcolor{comment}{/* Abort DMA RX */}}
\DoxyCodeLine{01984       \textcolor{keywordflow}{if} (HAL\_DMA\_Abort\_IT(huart-\/>hdmarx) != HAL\_OK)}
\DoxyCodeLine{01985       \{}
\DoxyCodeLine{01986         huart-\/>hdmarx-\/>XferAbortCallback = NULL;}
\DoxyCodeLine{01987         abortcplt = 1U;}
\DoxyCodeLine{01988       \}}
\DoxyCodeLine{01989       \textcolor{keywordflow}{else}}
\DoxyCodeLine{01990       \{}
\DoxyCodeLine{01991         abortcplt = 0U;}
\DoxyCodeLine{01992       \}}
\DoxyCodeLine{01993     \}}
\DoxyCodeLine{01994   \}}
\DoxyCodeLine{01995 }
\DoxyCodeLine{01996   \textcolor{comment}{/* if no DMA abort complete callback execution is required => call user Abort Complete callback */}}
\DoxyCodeLine{01997   \textcolor{keywordflow}{if} (abortcplt == 1U)}
\DoxyCodeLine{01998   \{}
\DoxyCodeLine{01999     \textcolor{comment}{/* Reset Tx and Rx transfer counters */}}
\DoxyCodeLine{02000     huart-\/>TxXferCount = 0U;}
\DoxyCodeLine{02001     huart-\/>RxXferCount = 0U;}
\DoxyCodeLine{02002 }
\DoxyCodeLine{02003     \textcolor{comment}{/* Clear ISR function pointers */}}
\DoxyCodeLine{02004     huart-\/>RxISR = NULL;}
\DoxyCodeLine{02005     huart-\/>TxISR = NULL;}
\DoxyCodeLine{02006 }
\DoxyCodeLine{02007     \textcolor{comment}{/* Reset errorCode */}}
\DoxyCodeLine{02008     huart-\/>ErrorCode = HAL\_UART\_ERROR\_NONE;}
\DoxyCodeLine{02009 }
\DoxyCodeLine{02010     \textcolor{comment}{/* Clear the Error flags in the ICR register */}}
\DoxyCodeLine{02011     \_\_HAL\_UART\_CLEAR\_FLAG(huart, UART\_CLEAR\_OREF | UART\_CLEAR\_NEF | UART\_CLEAR\_PEF | UART\_CLEAR\_FEF);}
\DoxyCodeLine{02012 }
\DoxyCodeLine{02013     \textcolor{comment}{/* Flush the whole TX FIFO (if needed) */}}
\DoxyCodeLine{02014     \textcolor{keywordflow}{if} (huart-\/>FifoMode == UART\_FIFOMODE\_ENABLE)}
\DoxyCodeLine{02015     \{}
\DoxyCodeLine{02016       \_\_HAL\_UART\_SEND\_REQ(huart, UART\_TXDATA\_FLUSH\_REQUEST);}
\DoxyCodeLine{02017     \}}
\DoxyCodeLine{02018 }
\DoxyCodeLine{02019     \textcolor{comment}{/* Discard the received data */}}
\DoxyCodeLine{02020     \_\_HAL\_UART\_SEND\_REQ(huart, UART\_RXDATA\_FLUSH\_REQUEST);}
\DoxyCodeLine{02021 }
\DoxyCodeLine{02022     \textcolor{comment}{/* Restore huart-\/>gState and huart-\/>RxState to Ready */}}
\DoxyCodeLine{02023     huart-\/>gState  = HAL\_UART\_STATE\_READY;}
\DoxyCodeLine{02024     huart-\/>RxState = HAL\_UART\_STATE\_READY;}
\DoxyCodeLine{02025     huart-\/>ReceptionType = HAL\_UART\_RECEPTION\_STANDARD;}
\DoxyCodeLine{02026 }
\DoxyCodeLine{02027     \textcolor{comment}{/* As no DMA to be aborted, call directly user Abort complete callback */}}
\DoxyCodeLine{02028 \textcolor{preprocessor}{\#if (USE\_HAL\_UART\_REGISTER\_CALLBACKS == 1)}}
\DoxyCodeLine{02029     \textcolor{comment}{/* Call registered Abort complete callback */}}
\DoxyCodeLine{02030     huart-\/>AbortCpltCallback(huart);}
\DoxyCodeLine{02031 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{02032     \textcolor{comment}{/* Call legacy weak Abort complete callback */}}
\DoxyCodeLine{02033     HAL\_UART\_AbortCpltCallback(huart);}
\DoxyCodeLine{02034 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* USE\_HAL\_UART\_REGISTER\_CALLBACKS */}\textcolor{preprocessor}{}}
\DoxyCodeLine{02035   \}}
\DoxyCodeLine{02036 }
\DoxyCodeLine{02037   \textcolor{keywordflow}{return} HAL\_OK;}
\DoxyCodeLine{02038 \}}
\DoxyCodeLine{02039 }
\DoxyCodeLine{02054 HAL\_StatusTypeDef HAL\_UART\_AbortTransmit\_IT(UART\_HandleTypeDef *huart)}
\DoxyCodeLine{02055 \{}
\DoxyCodeLine{02056   \textcolor{comment}{/* Disable interrupts */}}
\DoxyCodeLine{02057   ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR1, (USART\_CR1\_TCIE | USART\_CR1\_TXEIE\_TXFNFIE));}
\DoxyCodeLine{02058   ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR3, USART\_CR3\_TXFTIE);}
\DoxyCodeLine{02059 }
\DoxyCodeLine{02060   \textcolor{comment}{/* Abort the UART DMA Tx channel if enabled */}}
\DoxyCodeLine{02061   \textcolor{keywordflow}{if} (HAL\_IS\_BIT\_SET(huart-\/>Instance-\/>CR3, USART\_CR3\_DMAT))}
\DoxyCodeLine{02062   \{}
\DoxyCodeLine{02063     \textcolor{comment}{/* Disable the UART DMA Tx request if enabled */}}
\DoxyCodeLine{02064     ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR3, USART\_CR3\_DMAT);}
\DoxyCodeLine{02065 }
\DoxyCodeLine{02066     \textcolor{comment}{/* Abort the UART DMA Tx channel : use non blocking DMA Abort API (callback) */}}
\DoxyCodeLine{02067     \textcolor{keywordflow}{if} (huart-\/>hdmatx != NULL)}
\DoxyCodeLine{02068     \{}
\DoxyCodeLine{02069       \textcolor{comment}{/* Set the UART DMA Abort callback :}}
\DoxyCodeLine{02070 \textcolor{comment}{         will lead to call HAL\_UART\_AbortCpltCallback() at end of DMA abort procedure */}}
\DoxyCodeLine{02071       huart-\/>hdmatx-\/>XferAbortCallback = UART\_DMATxOnlyAbortCallback;}
\DoxyCodeLine{02072 }
\DoxyCodeLine{02073       \textcolor{comment}{/* Abort DMA TX */}}
\DoxyCodeLine{02074       \textcolor{keywordflow}{if} (HAL\_DMA\_Abort\_IT(huart-\/>hdmatx) != HAL\_OK)}
\DoxyCodeLine{02075       \{}
\DoxyCodeLine{02076         \textcolor{comment}{/* Call Directly huart-\/>hdmatx-\/>XferAbortCallback function in case of error */}}
\DoxyCodeLine{02077         huart-\/>hdmatx-\/>XferAbortCallback(huart-\/>hdmatx);}
\DoxyCodeLine{02078       \}}
\DoxyCodeLine{02079     \}}
\DoxyCodeLine{02080     \textcolor{keywordflow}{else}}
\DoxyCodeLine{02081     \{}
\DoxyCodeLine{02082       \textcolor{comment}{/* Reset Tx transfer counter */}}
\DoxyCodeLine{02083       huart-\/>TxXferCount = 0U;}
\DoxyCodeLine{02084 }
\DoxyCodeLine{02085       \textcolor{comment}{/* Clear TxISR function pointers */}}
\DoxyCodeLine{02086       huart-\/>TxISR = NULL;}
\DoxyCodeLine{02087 }
\DoxyCodeLine{02088       \textcolor{comment}{/* Restore huart-\/>gState to Ready */}}
\DoxyCodeLine{02089       huart-\/>gState = HAL\_UART\_STATE\_READY;}
\DoxyCodeLine{02090 }
\DoxyCodeLine{02091       \textcolor{comment}{/* As no DMA to be aborted, call directly user Abort complete callback */}}
\DoxyCodeLine{02092 \textcolor{preprocessor}{\#if (USE\_HAL\_UART\_REGISTER\_CALLBACKS == 1)}}
\DoxyCodeLine{02093       \textcolor{comment}{/* Call registered Abort Transmit Complete Callback */}}
\DoxyCodeLine{02094       huart-\/>AbortTransmitCpltCallback(huart);}
\DoxyCodeLine{02095 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{02096       \textcolor{comment}{/* Call legacy weak Abort Transmit Complete Callback */}}
\DoxyCodeLine{02097       HAL\_UART\_AbortTransmitCpltCallback(huart);}
\DoxyCodeLine{02098 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* USE\_HAL\_UART\_REGISTER\_CALLBACKS */}\textcolor{preprocessor}{}}
\DoxyCodeLine{02099     \}}
\DoxyCodeLine{02100   \}}
\DoxyCodeLine{02101   \textcolor{keywordflow}{else}}
\DoxyCodeLine{02102   \{}
\DoxyCodeLine{02103     \textcolor{comment}{/* Reset Tx transfer counter */}}
\DoxyCodeLine{02104     huart-\/>TxXferCount = 0U;}
\DoxyCodeLine{02105 }
\DoxyCodeLine{02106     \textcolor{comment}{/* Clear TxISR function pointers */}}
\DoxyCodeLine{02107     huart-\/>TxISR = NULL;}
\DoxyCodeLine{02108 }
\DoxyCodeLine{02109     \textcolor{comment}{/* Flush the whole TX FIFO (if needed) */}}
\DoxyCodeLine{02110     \textcolor{keywordflow}{if} (huart-\/>FifoMode == UART\_FIFOMODE\_ENABLE)}
\DoxyCodeLine{02111     \{}
\DoxyCodeLine{02112       \_\_HAL\_UART\_SEND\_REQ(huart, UART\_TXDATA\_FLUSH\_REQUEST);}
\DoxyCodeLine{02113     \}}
\DoxyCodeLine{02114 }
\DoxyCodeLine{02115     \textcolor{comment}{/* Restore huart-\/>gState to Ready */}}
\DoxyCodeLine{02116     huart-\/>gState = HAL\_UART\_STATE\_READY;}
\DoxyCodeLine{02117 }
\DoxyCodeLine{02118     \textcolor{comment}{/* As no DMA to be aborted, call directly user Abort complete callback */}}
\DoxyCodeLine{02119 \textcolor{preprocessor}{\#if (USE\_HAL\_UART\_REGISTER\_CALLBACKS == 1)}}
\DoxyCodeLine{02120     \textcolor{comment}{/* Call registered Abort Transmit Complete Callback */}}
\DoxyCodeLine{02121     huart-\/>AbortTransmitCpltCallback(huart);}
\DoxyCodeLine{02122 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{02123     \textcolor{comment}{/* Call legacy weak Abort Transmit Complete Callback */}}
\DoxyCodeLine{02124     HAL\_UART\_AbortTransmitCpltCallback(huart);}
\DoxyCodeLine{02125 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* USE\_HAL\_UART\_REGISTER\_CALLBACKS */}\textcolor{preprocessor}{}}
\DoxyCodeLine{02126   \}}
\DoxyCodeLine{02127 }
\DoxyCodeLine{02128   \textcolor{keywordflow}{return} HAL\_OK;}
\DoxyCodeLine{02129 \}}
\DoxyCodeLine{02130 }
\DoxyCodeLine{02145 HAL\_StatusTypeDef HAL\_UART\_AbortReceive\_IT(UART\_HandleTypeDef *huart)}
\DoxyCodeLine{02146 \{}
\DoxyCodeLine{02147   \textcolor{comment}{/* Disable RXNE, PE and ERR (Frame error, noise error, overrun error) interrupts */}}
\DoxyCodeLine{02148   ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR1, (USART\_CR1\_PEIE | USART\_CR1\_RXNEIE\_RXFNEIE));}
\DoxyCodeLine{02149   ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR3, (USART\_CR3\_EIE | USART\_CR3\_RXFTIE));}
\DoxyCodeLine{02150 }
\DoxyCodeLine{02151   \textcolor{comment}{/* If Reception till IDLE event was ongoing, disable IDLEIE interrupt */}}
\DoxyCodeLine{02152   \textcolor{keywordflow}{if} (huart-\/>ReceptionType == HAL\_UART\_RECEPTION\_TOIDLE)}
\DoxyCodeLine{02153   \{}
\DoxyCodeLine{02154     ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR1, (USART\_CR1\_IDLEIE));}
\DoxyCodeLine{02155   \}}
\DoxyCodeLine{02156 }
\DoxyCodeLine{02157   \textcolor{comment}{/* Abort the UART DMA Rx channel if enabled */}}
\DoxyCodeLine{02158   \textcolor{keywordflow}{if} (HAL\_IS\_BIT\_SET(huart-\/>Instance-\/>CR3, USART\_CR3\_DMAR))}
\DoxyCodeLine{02159   \{}
\DoxyCodeLine{02160     \textcolor{comment}{/* Disable the UART DMA Rx request if enabled */}}
\DoxyCodeLine{02161     ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR3, USART\_CR3\_DMAR);}
\DoxyCodeLine{02162 }
\DoxyCodeLine{02163     \textcolor{comment}{/* Abort the UART DMA Rx channel : use non blocking DMA Abort API (callback) */}}
\DoxyCodeLine{02164     \textcolor{keywordflow}{if} (huart-\/>hdmarx != NULL)}
\DoxyCodeLine{02165     \{}
\DoxyCodeLine{02166       \textcolor{comment}{/* Set the UART DMA Abort callback :}}
\DoxyCodeLine{02167 \textcolor{comment}{         will lead to call HAL\_UART\_AbortCpltCallback() at end of DMA abort procedure */}}
\DoxyCodeLine{02168       huart-\/>hdmarx-\/>XferAbortCallback = UART\_DMARxOnlyAbortCallback;}
\DoxyCodeLine{02169 }
\DoxyCodeLine{02170       \textcolor{comment}{/* Abort DMA RX */}}
\DoxyCodeLine{02171       \textcolor{keywordflow}{if} (HAL\_DMA\_Abort\_IT(huart-\/>hdmarx) != HAL\_OK)}
\DoxyCodeLine{02172       \{}
\DoxyCodeLine{02173         \textcolor{comment}{/* Call Directly huart-\/>hdmarx-\/>XferAbortCallback function in case of error */}}
\DoxyCodeLine{02174         huart-\/>hdmarx-\/>XferAbortCallback(huart-\/>hdmarx);}
\DoxyCodeLine{02175       \}}
\DoxyCodeLine{02176     \}}
\DoxyCodeLine{02177     \textcolor{keywordflow}{else}}
\DoxyCodeLine{02178     \{}
\DoxyCodeLine{02179       \textcolor{comment}{/* Reset Rx transfer counter */}}
\DoxyCodeLine{02180       huart-\/>RxXferCount = 0U;}
\DoxyCodeLine{02181 }
\DoxyCodeLine{02182       \textcolor{comment}{/* Clear RxISR function pointer */}}
\DoxyCodeLine{02183       huart-\/>pRxBuffPtr = NULL;}
\DoxyCodeLine{02184 }
\DoxyCodeLine{02185       \textcolor{comment}{/* Clear the Error flags in the ICR register */}}
\DoxyCodeLine{02186       \_\_HAL\_UART\_CLEAR\_FLAG(huart, UART\_CLEAR\_OREF | UART\_CLEAR\_NEF | UART\_CLEAR\_PEF | UART\_CLEAR\_FEF);}
\DoxyCodeLine{02187 }
\DoxyCodeLine{02188       \textcolor{comment}{/* Discard the received data */}}
\DoxyCodeLine{02189       \_\_HAL\_UART\_SEND\_REQ(huart, UART\_RXDATA\_FLUSH\_REQUEST);}
\DoxyCodeLine{02190 }
\DoxyCodeLine{02191       \textcolor{comment}{/* Restore huart-\/>RxState to Ready */}}
\DoxyCodeLine{02192       huart-\/>RxState = HAL\_UART\_STATE\_READY;}
\DoxyCodeLine{02193       huart-\/>ReceptionType = HAL\_UART\_RECEPTION\_STANDARD;}
\DoxyCodeLine{02194 }
\DoxyCodeLine{02195       \textcolor{comment}{/* As no DMA to be aborted, call directly user Abort complete callback */}}
\DoxyCodeLine{02196 \textcolor{preprocessor}{\#if (USE\_HAL\_UART\_REGISTER\_CALLBACKS == 1)}}
\DoxyCodeLine{02197       \textcolor{comment}{/* Call registered Abort Receive Complete Callback */}}
\DoxyCodeLine{02198       huart-\/>AbortReceiveCpltCallback(huart);}
\DoxyCodeLine{02199 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{02200       \textcolor{comment}{/* Call legacy weak Abort Receive Complete Callback */}}
\DoxyCodeLine{02201       HAL\_UART\_AbortReceiveCpltCallback(huart);}
\DoxyCodeLine{02202 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* USE\_HAL\_UART\_REGISTER\_CALLBACKS */}\textcolor{preprocessor}{}}
\DoxyCodeLine{02203     \}}
\DoxyCodeLine{02204   \}}
\DoxyCodeLine{02205   \textcolor{keywordflow}{else}}
\DoxyCodeLine{02206   \{}
\DoxyCodeLine{02207     \textcolor{comment}{/* Reset Rx transfer counter */}}
\DoxyCodeLine{02208     huart-\/>RxXferCount = 0U;}
\DoxyCodeLine{02209 }
\DoxyCodeLine{02210     \textcolor{comment}{/* Clear RxISR function pointer */}}
\DoxyCodeLine{02211     huart-\/>pRxBuffPtr = NULL;}
\DoxyCodeLine{02212 }
\DoxyCodeLine{02213     \textcolor{comment}{/* Clear the Error flags in the ICR register */}}
\DoxyCodeLine{02214     \_\_HAL\_UART\_CLEAR\_FLAG(huart, UART\_CLEAR\_OREF | UART\_CLEAR\_NEF | UART\_CLEAR\_PEF | UART\_CLEAR\_FEF);}
\DoxyCodeLine{02215 }
\DoxyCodeLine{02216     \textcolor{comment}{/* Restore huart-\/>RxState to Ready */}}
\DoxyCodeLine{02217     huart-\/>RxState = HAL\_UART\_STATE\_READY;}
\DoxyCodeLine{02218     huart-\/>ReceptionType = HAL\_UART\_RECEPTION\_STANDARD;}
\DoxyCodeLine{02219 }
\DoxyCodeLine{02220     \textcolor{comment}{/* As no DMA to be aborted, call directly user Abort complete callback */}}
\DoxyCodeLine{02221 \textcolor{preprocessor}{\#if (USE\_HAL\_UART\_REGISTER\_CALLBACKS == 1)}}
\DoxyCodeLine{02222     \textcolor{comment}{/* Call registered Abort Receive Complete Callback */}}
\DoxyCodeLine{02223     huart-\/>AbortReceiveCpltCallback(huart);}
\DoxyCodeLine{02224 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{02225     \textcolor{comment}{/* Call legacy weak Abort Receive Complete Callback */}}
\DoxyCodeLine{02226     HAL\_UART\_AbortReceiveCpltCallback(huart);}
\DoxyCodeLine{02227 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* USE\_HAL\_UART\_REGISTER\_CALLBACKS */}\textcolor{preprocessor}{}}
\DoxyCodeLine{02228   \}}
\DoxyCodeLine{02229 }
\DoxyCodeLine{02230   \textcolor{keywordflow}{return} HAL\_OK;}
\DoxyCodeLine{02231 \}}
\DoxyCodeLine{02232 }
\DoxyCodeLine{02238 \textcolor{keywordtype}{void} HAL\_UART\_IRQHandler(UART\_HandleTypeDef *huart)}
\DoxyCodeLine{02239 \{}
\DoxyCodeLine{02240   uint32\_t isrflags   = READ\_REG(huart-\/>Instance-\/>ISR);}
\DoxyCodeLine{02241   uint32\_t cr1its     = READ\_REG(huart-\/>Instance-\/>CR1);}
\DoxyCodeLine{02242   uint32\_t cr3its     = READ\_REG(huart-\/>Instance-\/>CR3);}
\DoxyCodeLine{02243 }
\DoxyCodeLine{02244   uint32\_t errorflags;}
\DoxyCodeLine{02245   uint32\_t errorcode;}
\DoxyCodeLine{02246 }
\DoxyCodeLine{02247   \textcolor{comment}{/* If no error occurs */}}
\DoxyCodeLine{02248   errorflags = (isrflags \& (uint32\_t)(USART\_ISR\_PE | USART\_ISR\_FE | USART\_ISR\_ORE | USART\_ISR\_NE | USART\_ISR\_RTOF));}
\DoxyCodeLine{02249   \textcolor{keywordflow}{if} (errorflags == 0U)}
\DoxyCodeLine{02250   \{}
\DoxyCodeLine{02251     \textcolor{comment}{/* UART in mode Receiver -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{02252     \textcolor{keywordflow}{if} (((isrflags \& USART\_ISR\_RXNE\_RXFNE) != 0U)}
\DoxyCodeLine{02253         \&\& (((cr1its \& USART\_CR1\_RXNEIE\_RXFNEIE) != 0U)}
\DoxyCodeLine{02254             || ((cr3its \& USART\_CR3\_RXFTIE) != 0U)))}
\DoxyCodeLine{02255     \{}
\DoxyCodeLine{02256       \textcolor{keywordflow}{if} (huart-\/>RxISR != NULL)}
\DoxyCodeLine{02257       \{}
\DoxyCodeLine{02258         huart-\/>RxISR(huart);}
\DoxyCodeLine{02259       \}}
\DoxyCodeLine{02260       \textcolor{keywordflow}{return};}
\DoxyCodeLine{02261     \}}
\DoxyCodeLine{02262   \}}
\DoxyCodeLine{02263 }
\DoxyCodeLine{02264   \textcolor{comment}{/* If some errors occur */}}
\DoxyCodeLine{02265   \textcolor{keywordflow}{if} ((errorflags != 0U)}
\DoxyCodeLine{02266       \&\& ((((cr3its \& (USART\_CR3\_RXFTIE | USART\_CR3\_EIE)) != 0U)}
\DoxyCodeLine{02267            || ((cr1its \& (USART\_CR1\_RXNEIE\_RXFNEIE | USART\_CR1\_PEIE | USART\_CR1\_RTOIE)) != 0U))))}
\DoxyCodeLine{02268   \{}
\DoxyCodeLine{02269     \textcolor{comment}{/* UART parity error interrupt occurred -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{02270     \textcolor{keywordflow}{if} (((isrflags \& USART\_ISR\_PE) != 0U) \&\& ((cr1its \& USART\_CR1\_PEIE) != 0U))}
\DoxyCodeLine{02271     \{}
\DoxyCodeLine{02272       \_\_HAL\_UART\_CLEAR\_FLAG(huart, UART\_CLEAR\_PEF);}
\DoxyCodeLine{02273 }
\DoxyCodeLine{02274       huart-\/>ErrorCode |= HAL\_UART\_ERROR\_PE;}
\DoxyCodeLine{02275     \}}
\DoxyCodeLine{02276 }
\DoxyCodeLine{02277     \textcolor{comment}{/* UART frame error interrupt occurred -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{02278     \textcolor{keywordflow}{if} (((isrflags \& USART\_ISR\_FE) != 0U) \&\& ((cr3its \& USART\_CR3\_EIE) != 0U))}
\DoxyCodeLine{02279     \{}
\DoxyCodeLine{02280       \_\_HAL\_UART\_CLEAR\_FLAG(huart, UART\_CLEAR\_FEF);}
\DoxyCodeLine{02281 }
\DoxyCodeLine{02282       huart-\/>ErrorCode |= HAL\_UART\_ERROR\_FE;}
\DoxyCodeLine{02283     \}}
\DoxyCodeLine{02284 }
\DoxyCodeLine{02285     \textcolor{comment}{/* UART noise error interrupt occurred -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{02286     \textcolor{keywordflow}{if} (((isrflags \& USART\_ISR\_NE) != 0U) \&\& ((cr3its \& USART\_CR3\_EIE) != 0U))}
\DoxyCodeLine{02287     \{}
\DoxyCodeLine{02288       \_\_HAL\_UART\_CLEAR\_FLAG(huart, UART\_CLEAR\_NEF);}
\DoxyCodeLine{02289 }
\DoxyCodeLine{02290       huart-\/>ErrorCode |= HAL\_UART\_ERROR\_NE;}
\DoxyCodeLine{02291     \}}
\DoxyCodeLine{02292 }
\DoxyCodeLine{02293     \textcolor{comment}{/* UART Over-\/Run interrupt occurred -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{02294     \textcolor{keywordflow}{if} (((isrflags \& USART\_ISR\_ORE) != 0U)}
\DoxyCodeLine{02295         \&\& (((cr1its \& USART\_CR1\_RXNEIE\_RXFNEIE) != 0U) ||}
\DoxyCodeLine{02296             ((cr3its \& (USART\_CR3\_RXFTIE | USART\_CR3\_EIE)) != 0U)))}
\DoxyCodeLine{02297     \{}
\DoxyCodeLine{02298       \_\_HAL\_UART\_CLEAR\_FLAG(huart, UART\_CLEAR\_OREF);}
\DoxyCodeLine{02299 }
\DoxyCodeLine{02300       huart-\/>ErrorCode |= HAL\_UART\_ERROR\_ORE;}
\DoxyCodeLine{02301     \}}
\DoxyCodeLine{02302 }
\DoxyCodeLine{02303     \textcolor{comment}{/* UART Receiver Timeout interrupt occurred -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{02304     \textcolor{keywordflow}{if} (((isrflags \& USART\_ISR\_RTOF) != 0U) \&\& ((cr1its \& USART\_CR1\_RTOIE) != 0U))}
\DoxyCodeLine{02305     \{}
\DoxyCodeLine{02306       \_\_HAL\_UART\_CLEAR\_FLAG(huart, UART\_CLEAR\_RTOF);}
\DoxyCodeLine{02307 }
\DoxyCodeLine{02308       huart-\/>ErrorCode |= HAL\_UART\_ERROR\_RTO;}
\DoxyCodeLine{02309     \}}
\DoxyCodeLine{02310 }
\DoxyCodeLine{02311     \textcolor{comment}{/* Call UART Error Call back function if need be -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{02312     \textcolor{keywordflow}{if} (huart-\/>ErrorCode != HAL\_UART\_ERROR\_NONE)}
\DoxyCodeLine{02313     \{}
\DoxyCodeLine{02314       \textcolor{comment}{/* UART in mode Receiver -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{02315       \textcolor{keywordflow}{if} (((isrflags \& USART\_ISR\_RXNE\_RXFNE) != 0U)}
\DoxyCodeLine{02316           \&\& (((cr1its \& USART\_CR1\_RXNEIE\_RXFNEIE) != 0U)}
\DoxyCodeLine{02317               || ((cr3its \& USART\_CR3\_RXFTIE) != 0U)))}
\DoxyCodeLine{02318       \{}
\DoxyCodeLine{02319         \textcolor{keywordflow}{if} (huart-\/>RxISR != NULL)}
\DoxyCodeLine{02320         \{}
\DoxyCodeLine{02321           huart-\/>RxISR(huart);}
\DoxyCodeLine{02322         \}}
\DoxyCodeLine{02323       \}}
\DoxyCodeLine{02324 }
\DoxyCodeLine{02325       \textcolor{comment}{/* If Error is to be considered as blocking :}}
\DoxyCodeLine{02326 \textcolor{comment}{          -\/ Receiver Timeout error in Reception}}
\DoxyCodeLine{02327 \textcolor{comment}{          -\/ Overrun error in Reception}}
\DoxyCodeLine{02328 \textcolor{comment}{          -\/ any error occurs in DMA mode reception}}
\DoxyCodeLine{02329 \textcolor{comment}{      */}}
\DoxyCodeLine{02330       errorcode = huart-\/>ErrorCode;}
\DoxyCodeLine{02331       \textcolor{keywordflow}{if} ((HAL\_IS\_BIT\_SET(huart-\/>Instance-\/>CR3, USART\_CR3\_DMAR)) ||}
\DoxyCodeLine{02332           ((errorcode \& (HAL\_UART\_ERROR\_RTO | HAL\_UART\_ERROR\_ORE)) != 0U))}
\DoxyCodeLine{02333       \{}
\DoxyCodeLine{02334         \textcolor{comment}{/* Blocking error : transfer is aborted}}
\DoxyCodeLine{02335 \textcolor{comment}{           Set the UART state ready to be able to start again the process,}}
\DoxyCodeLine{02336 \textcolor{comment}{           Disable Rx Interrupts, and disable Rx DMA request, if ongoing */}}
\DoxyCodeLine{02337         UART\_EndRxTransfer(huart);}
\DoxyCodeLine{02338 }
\DoxyCodeLine{02339         \textcolor{comment}{/* Abort the UART DMA Rx channel if enabled */}}
\DoxyCodeLine{02340         \textcolor{keywordflow}{if} (HAL\_IS\_BIT\_SET(huart-\/>Instance-\/>CR3, USART\_CR3\_DMAR))}
\DoxyCodeLine{02341         \{}
\DoxyCodeLine{02342           \textcolor{comment}{/* Disable the UART DMA Rx request if enabled */}}
\DoxyCodeLine{02343           ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR3, USART\_CR3\_DMAR);}
\DoxyCodeLine{02344 }
\DoxyCodeLine{02345           \textcolor{comment}{/* Abort the UART DMA Rx channel */}}
\DoxyCodeLine{02346           \textcolor{keywordflow}{if} (huart-\/>hdmarx != NULL)}
\DoxyCodeLine{02347           \{}
\DoxyCodeLine{02348             \textcolor{comment}{/* Set the UART DMA Abort callback :}}
\DoxyCodeLine{02349 \textcolor{comment}{               will lead to call HAL\_UART\_ErrorCallback() at end of DMA abort procedure */}}
\DoxyCodeLine{02350             huart-\/>hdmarx-\/>XferAbortCallback = UART\_DMAAbortOnError;}
\DoxyCodeLine{02351 }
\DoxyCodeLine{02352             \textcolor{comment}{/* Abort DMA RX */}}
\DoxyCodeLine{02353             \textcolor{keywordflow}{if} (HAL\_DMA\_Abort\_IT(huart-\/>hdmarx) != HAL\_OK)}
\DoxyCodeLine{02354             \{}
\DoxyCodeLine{02355               \textcolor{comment}{/* Call Directly huart-\/>hdmarx-\/>XferAbortCallback function in case of error */}}
\DoxyCodeLine{02356               huart-\/>hdmarx-\/>XferAbortCallback(huart-\/>hdmarx);}
\DoxyCodeLine{02357             \}}
\DoxyCodeLine{02358           \}}
\DoxyCodeLine{02359           \textcolor{keywordflow}{else}}
\DoxyCodeLine{02360           \{}
\DoxyCodeLine{02361             \textcolor{comment}{/* Call user error callback */}}
\DoxyCodeLine{02362 \textcolor{preprocessor}{\#if (USE\_HAL\_UART\_REGISTER\_CALLBACKS == 1)}}
\DoxyCodeLine{02363             \textcolor{comment}{/*Call registered error callback*/}}
\DoxyCodeLine{02364             huart-\/>ErrorCallback(huart);}
\DoxyCodeLine{02365 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{02366             \textcolor{comment}{/*Call legacy weak error callback*/}}
\DoxyCodeLine{02367             HAL\_UART\_ErrorCallback(huart);}
\DoxyCodeLine{02368 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* USE\_HAL\_UART\_REGISTER\_CALLBACKS */}\textcolor{preprocessor}{}}
\DoxyCodeLine{02369 }
\DoxyCodeLine{02370           \}}
\DoxyCodeLine{02371         \}}
\DoxyCodeLine{02372         \textcolor{keywordflow}{else}}
\DoxyCodeLine{02373         \{}
\DoxyCodeLine{02374           \textcolor{comment}{/* Call user error callback */}}
\DoxyCodeLine{02375 \textcolor{preprocessor}{\#if (USE\_HAL\_UART\_REGISTER\_CALLBACKS == 1)}}
\DoxyCodeLine{02376           \textcolor{comment}{/*Call registered error callback*/}}
\DoxyCodeLine{02377           huart-\/>ErrorCallback(huart);}
\DoxyCodeLine{02378 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{02379           \textcolor{comment}{/*Call legacy weak error callback*/}}
\DoxyCodeLine{02380           HAL\_UART\_ErrorCallback(huart);}
\DoxyCodeLine{02381 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* USE\_HAL\_UART\_REGISTER\_CALLBACKS */}\textcolor{preprocessor}{}}
\DoxyCodeLine{02382         \}}
\DoxyCodeLine{02383       \}}
\DoxyCodeLine{02384       \textcolor{keywordflow}{else}}
\DoxyCodeLine{02385       \{}
\DoxyCodeLine{02386         \textcolor{comment}{/* Non Blocking error : transfer could go on.}}
\DoxyCodeLine{02387 \textcolor{comment}{           Error is notified to user through user error callback */}}
\DoxyCodeLine{02388 \textcolor{preprocessor}{\#if (USE\_HAL\_UART\_REGISTER\_CALLBACKS == 1)}}
\DoxyCodeLine{02389         \textcolor{comment}{/*Call registered error callback*/}}
\DoxyCodeLine{02390         huart-\/>ErrorCallback(huart);}
\DoxyCodeLine{02391 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{02392         \textcolor{comment}{/*Call legacy weak error callback*/}}
\DoxyCodeLine{02393         HAL\_UART\_ErrorCallback(huart);}
\DoxyCodeLine{02394 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* USE\_HAL\_UART\_REGISTER\_CALLBACKS */}\textcolor{preprocessor}{}}
\DoxyCodeLine{02395         huart-\/>ErrorCode = HAL\_UART\_ERROR\_NONE;}
\DoxyCodeLine{02396       \}}
\DoxyCodeLine{02397     \}}
\DoxyCodeLine{02398     \textcolor{keywordflow}{return};}
\DoxyCodeLine{02399 }
\DoxyCodeLine{02400   \} \textcolor{comment}{/* End if some error occurs */}}
\DoxyCodeLine{02401 }
\DoxyCodeLine{02402   \textcolor{comment}{/* Check current reception Mode :}}
\DoxyCodeLine{02403 \textcolor{comment}{     If Reception till IDLE event has been selected : */}}
\DoxyCodeLine{02404   \textcolor{keywordflow}{if} ((huart-\/>ReceptionType == HAL\_UART\_RECEPTION\_TOIDLE)}
\DoxyCodeLine{02405       \&\& ((isrflags \& USART\_ISR\_IDLE) != 0U)}
\DoxyCodeLine{02406       \&\& ((cr1its \& USART\_ISR\_IDLE) != 0U))}
\DoxyCodeLine{02407   \{}
\DoxyCodeLine{02408     \_\_HAL\_UART\_CLEAR\_FLAG(huart, UART\_CLEAR\_IDLEF);}
\DoxyCodeLine{02409 }
\DoxyCodeLine{02410     \textcolor{comment}{/* Check if DMA mode is enabled in UART */}}
\DoxyCodeLine{02411     \textcolor{keywordflow}{if} (HAL\_IS\_BIT\_SET(huart-\/>Instance-\/>CR3, USART\_CR3\_DMAR))}
\DoxyCodeLine{02412     \{}
\DoxyCodeLine{02413       \textcolor{comment}{/* DMA mode enabled */}}
\DoxyCodeLine{02414       \textcolor{comment}{/* Check received length : If all expected data are received, do nothing,}}
\DoxyCodeLine{02415 \textcolor{comment}{         (DMA cplt callback will be called).}}
\DoxyCodeLine{02416 \textcolor{comment}{         Otherwise, if at least one data has already been received, IDLE event is to be notified to user */}}
\DoxyCodeLine{02417       uint16\_t nb\_remaining\_rx\_data = (uint16\_t) \_\_HAL\_DMA\_GET\_COUNTER(huart-\/>hdmarx);}
\DoxyCodeLine{02418       \textcolor{keywordflow}{if} ((nb\_remaining\_rx\_data > 0U)}
\DoxyCodeLine{02419           \&\& (nb\_remaining\_rx\_data < huart-\/>RxXferSize))}
\DoxyCodeLine{02420       \{}
\DoxyCodeLine{02421         \textcolor{comment}{/* Reception is not complete */}}
\DoxyCodeLine{02422         huart-\/>RxXferCount = nb\_remaining\_rx\_data;}
\DoxyCodeLine{02423 }
\DoxyCodeLine{02424         \textcolor{comment}{/* In Normal mode, end DMA xfer and HAL UART Rx process*/}}
\DoxyCodeLine{02425         \textcolor{keywordflow}{if} (HAL\_IS\_BIT\_CLR(huart-\/>hdmarx-\/>Instance-\/>CCR, DMA\_CCR\_CIRC))}
\DoxyCodeLine{02426         \{}
\DoxyCodeLine{02427           \textcolor{comment}{/* Disable PE and ERR (Frame error, noise error, overrun error) interrupts */}}
\DoxyCodeLine{02428           ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR1, USART\_CR1\_PEIE);}
\DoxyCodeLine{02429           ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR3, USART\_CR3\_EIE);}
\DoxyCodeLine{02430 }
\DoxyCodeLine{02431           \textcolor{comment}{/* Disable the DMA transfer for the receiver request by resetting the DMAR bit}}
\DoxyCodeLine{02432 \textcolor{comment}{             in the UART CR3 register */}}
\DoxyCodeLine{02433           ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR3, USART\_CR3\_DMAR);}
\DoxyCodeLine{02434 }
\DoxyCodeLine{02435           \textcolor{comment}{/* At end of Rx process, restore huart-\/>RxState to Ready */}}
\DoxyCodeLine{02436           huart-\/>RxState = HAL\_UART\_STATE\_READY;}
\DoxyCodeLine{02437           huart-\/>ReceptionType = HAL\_UART\_RECEPTION\_STANDARD;}
\DoxyCodeLine{02438 }
\DoxyCodeLine{02439           ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR1, USART\_CR1\_IDLEIE);}
\DoxyCodeLine{02440 }
\DoxyCodeLine{02441           \textcolor{comment}{/* Last bytes received, so no need as the abort is immediate */}}
\DoxyCodeLine{02442           (void)HAL\_DMA\_Abort(huart-\/>hdmarx);}
\DoxyCodeLine{02443         \}}
\DoxyCodeLine{02444 \textcolor{preprocessor}{\#if (USE\_HAL\_UART\_REGISTER\_CALLBACKS == 1)}}
\DoxyCodeLine{02445         \textcolor{comment}{/*Call registered Rx Event callback*/}}
\DoxyCodeLine{02446         huart-\/>RxEventCallback(huart, (huart-\/>RxXferSize -\/ huart-\/>RxXferCount));}
\DoxyCodeLine{02447 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{02448         \textcolor{comment}{/*Call legacy weak Rx Event callback*/}}
\DoxyCodeLine{02449         HAL\_UARTEx\_RxEventCallback(huart, (huart-\/>RxXferSize -\/ huart-\/>RxXferCount));}
\DoxyCodeLine{02450 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* (USE\_HAL\_UART\_REGISTER\_CALLBACKS) */}\textcolor{preprocessor}{}}
\DoxyCodeLine{02451       \}}
\DoxyCodeLine{02452       \textcolor{keywordflow}{return};}
\DoxyCodeLine{02453     \}}
\DoxyCodeLine{02454     \textcolor{keywordflow}{else}}
\DoxyCodeLine{02455     \{}
\DoxyCodeLine{02456       \textcolor{comment}{/* DMA mode not enabled */}}
\DoxyCodeLine{02457       \textcolor{comment}{/* Check received length : If all expected data are received, do nothing.}}
\DoxyCodeLine{02458 \textcolor{comment}{         Otherwise, if at least one data has already been received, IDLE event is to be notified to user */}}
\DoxyCodeLine{02459       uint16\_t nb\_rx\_data = huart-\/>RxXferSize -\/ huart-\/>RxXferCount;}
\DoxyCodeLine{02460       \textcolor{keywordflow}{if} ((huart-\/>RxXferCount > 0U)}
\DoxyCodeLine{02461           \&\& (nb\_rx\_data > 0U))}
\DoxyCodeLine{02462       \{}
\DoxyCodeLine{02463         \textcolor{comment}{/* Disable the UART Parity Error Interrupt and RXNE interrupts */}}
\DoxyCodeLine{02464         ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR1, (USART\_CR1\_RXNEIE\_RXFNEIE | USART\_CR1\_PEIE));}
\DoxyCodeLine{02465 }
\DoxyCodeLine{02466         \textcolor{comment}{/* Disable the UART Error Interrupt:(Frame error, noise error, overrun error) and RX FIFO Threshold interrupt */}}
\DoxyCodeLine{02467         ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR3, (USART\_CR3\_EIE | USART\_CR3\_RXFTIE));}
\DoxyCodeLine{02468 }
\DoxyCodeLine{02469         \textcolor{comment}{/* Rx process is completed, restore huart-\/>RxState to Ready */}}
\DoxyCodeLine{02470         huart-\/>RxState = HAL\_UART\_STATE\_READY;}
\DoxyCodeLine{02471         huart-\/>ReceptionType = HAL\_UART\_RECEPTION\_STANDARD;}
\DoxyCodeLine{02472 }
\DoxyCodeLine{02473         \textcolor{comment}{/* Clear RxISR function pointer */}}
\DoxyCodeLine{02474         huart-\/>RxISR = NULL;}
\DoxyCodeLine{02475 }
\DoxyCodeLine{02476         ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR1, USART\_CR1\_IDLEIE);}
\DoxyCodeLine{02477 \textcolor{preprocessor}{\#if (USE\_HAL\_UART\_REGISTER\_CALLBACKS == 1)}}
\DoxyCodeLine{02478         \textcolor{comment}{/*Call registered Rx complete callback*/}}
\DoxyCodeLine{02479         huart-\/>RxEventCallback(huart, nb\_rx\_data);}
\DoxyCodeLine{02480 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{02481         \textcolor{comment}{/*Call legacy weak Rx Event callback*/}}
\DoxyCodeLine{02482         HAL\_UARTEx\_RxEventCallback(huart, nb\_rx\_data);}
\DoxyCodeLine{02483 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* (USE\_HAL\_UART\_REGISTER\_CALLBACKS) */}\textcolor{preprocessor}{}}
\DoxyCodeLine{02484       \}}
\DoxyCodeLine{02485       \textcolor{keywordflow}{return};}
\DoxyCodeLine{02486     \}}
\DoxyCodeLine{02487   \}}
\DoxyCodeLine{02488 }
\DoxyCodeLine{02489   \textcolor{comment}{/* UART wakeup from Stop mode interrupt occurred -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{02490   \textcolor{keywordflow}{if} (((isrflags \& USART\_ISR\_WUF) != 0U) \&\& ((cr3its \& USART\_CR3\_WUFIE) != 0U))}
\DoxyCodeLine{02491   \{}
\DoxyCodeLine{02492     \_\_HAL\_UART\_CLEAR\_FLAG(huart, UART\_CLEAR\_WUF);}
\DoxyCodeLine{02493 }
\DoxyCodeLine{02494     \textcolor{comment}{/* UART Rx state is not reset as a reception process might be ongoing.}}
\DoxyCodeLine{02495 \textcolor{comment}{       If UART handle state fields need to be reset to READY, this could be done in Wakeup callback */}}
\DoxyCodeLine{02496 }
\DoxyCodeLine{02497 \textcolor{preprocessor}{\#if (USE\_HAL\_UART\_REGISTER\_CALLBACKS == 1)}}
\DoxyCodeLine{02498     \textcolor{comment}{/* Call registered Wakeup Callback */}}
\DoxyCodeLine{02499     huart-\/>WakeupCallback(huart);}
\DoxyCodeLine{02500 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{02501     \textcolor{comment}{/* Call legacy weak Wakeup Callback */}}
\DoxyCodeLine{02502     HAL\_UARTEx\_WakeupCallback(huart);}
\DoxyCodeLine{02503 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* USE\_HAL\_UART\_REGISTER\_CALLBACKS */}\textcolor{preprocessor}{}}
\DoxyCodeLine{02504     \textcolor{keywordflow}{return};}
\DoxyCodeLine{02505   \}}
\DoxyCodeLine{02506 }
\DoxyCodeLine{02507   \textcolor{comment}{/* UART in mode Transmitter -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{02508   \textcolor{keywordflow}{if} (((isrflags \& USART\_ISR\_TXE\_TXFNF) != 0U)}
\DoxyCodeLine{02509       \&\& (((cr1its \& USART\_CR1\_TXEIE\_TXFNFIE) != 0U)}
\DoxyCodeLine{02510           || ((cr3its \& USART\_CR3\_TXFTIE) != 0U)))}
\DoxyCodeLine{02511   \{}
\DoxyCodeLine{02512     \textcolor{keywordflow}{if} (huart-\/>TxISR != NULL)}
\DoxyCodeLine{02513     \{}
\DoxyCodeLine{02514       huart-\/>TxISR(huart);}
\DoxyCodeLine{02515     \}}
\DoxyCodeLine{02516     \textcolor{keywordflow}{return};}
\DoxyCodeLine{02517   \}}
\DoxyCodeLine{02518 }
\DoxyCodeLine{02519   \textcolor{comment}{/* UART in mode Transmitter (transmission end) -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{02520   \textcolor{keywordflow}{if} (((isrflags \& USART\_ISR\_TC) != 0U) \&\& ((cr1its \& USART\_CR1\_TCIE) != 0U))}
\DoxyCodeLine{02521   \{}
\DoxyCodeLine{02522     UART\_EndTransmit\_IT(huart);}
\DoxyCodeLine{02523     \textcolor{keywordflow}{return};}
\DoxyCodeLine{02524   \}}
\DoxyCodeLine{02525 }
\DoxyCodeLine{02526   \textcolor{comment}{/* UART TX Fifo Empty occurred -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{02527   \textcolor{keywordflow}{if} (((isrflags \& USART\_ISR\_TXFE) != 0U) \&\& ((cr1its \& USART\_CR1\_TXFEIE) != 0U))}
\DoxyCodeLine{02528   \{}
\DoxyCodeLine{02529 \textcolor{preprocessor}{\#if (USE\_HAL\_UART\_REGISTER\_CALLBACKS == 1)}}
\DoxyCodeLine{02530     \textcolor{comment}{/* Call registered Tx Fifo Empty Callback */}}
\DoxyCodeLine{02531     huart-\/>TxFifoEmptyCallback(huart);}
\DoxyCodeLine{02532 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{02533     \textcolor{comment}{/* Call legacy weak Tx Fifo Empty Callback */}}
\DoxyCodeLine{02534     HAL\_UARTEx\_TxFifoEmptyCallback(huart);}
\DoxyCodeLine{02535 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* USE\_HAL\_UART\_REGISTER\_CALLBACKS */}\textcolor{preprocessor}{}}
\DoxyCodeLine{02536     \textcolor{keywordflow}{return};}
\DoxyCodeLine{02537   \}}
\DoxyCodeLine{02538 }
\DoxyCodeLine{02539   \textcolor{comment}{/* UART RX Fifo Full occurred -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{02540   \textcolor{keywordflow}{if} (((isrflags \& USART\_ISR\_RXFF) != 0U) \&\& ((cr1its \& USART\_CR1\_RXFFIE) != 0U))}
\DoxyCodeLine{02541   \{}
\DoxyCodeLine{02542 \textcolor{preprocessor}{\#if (USE\_HAL\_UART\_REGISTER\_CALLBACKS == 1)}}
\DoxyCodeLine{02543     \textcolor{comment}{/* Call registered Rx Fifo Full Callback */}}
\DoxyCodeLine{02544     huart-\/>RxFifoFullCallback(huart);}
\DoxyCodeLine{02545 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{02546     \textcolor{comment}{/* Call legacy weak Rx Fifo Full Callback */}}
\DoxyCodeLine{02547     HAL\_UARTEx\_RxFifoFullCallback(huart);}
\DoxyCodeLine{02548 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* USE\_HAL\_UART\_REGISTER\_CALLBACKS */}\textcolor{preprocessor}{}}
\DoxyCodeLine{02549     \textcolor{keywordflow}{return};}
\DoxyCodeLine{02550   \}}
\DoxyCodeLine{02551 \}}
\DoxyCodeLine{02552 }
\DoxyCodeLine{02558 \_\_weak \textcolor{keywordtype}{void} HAL\_UART\_TxCpltCallback(UART\_HandleTypeDef *huart)}
\DoxyCodeLine{02559 \{}
\DoxyCodeLine{02560   \textcolor{comment}{/* Prevent unused argument(s) compilation warning */}}
\DoxyCodeLine{02561   UNUSED(huart);}
\DoxyCodeLine{02562 }
\DoxyCodeLine{02563   \textcolor{comment}{/* NOTE : This function should not be modified, when the callback is needed,}}
\DoxyCodeLine{02564 \textcolor{comment}{            the HAL\_UART\_TxCpltCallback can be implemented in the user file.}}
\DoxyCodeLine{02565 \textcolor{comment}{   */}}
\DoxyCodeLine{02566 \}}
\DoxyCodeLine{02567 }
\DoxyCodeLine{02573 \_\_weak \textcolor{keywordtype}{void} HAL\_UART\_TxHalfCpltCallback(UART\_HandleTypeDef *huart)}
\DoxyCodeLine{02574 \{}
\DoxyCodeLine{02575   \textcolor{comment}{/* Prevent unused argument(s) compilation warning */}}
\DoxyCodeLine{02576   UNUSED(huart);}
\DoxyCodeLine{02577 }
\DoxyCodeLine{02578   \textcolor{comment}{/* NOTE: This function should not be modified, when the callback is needed,}}
\DoxyCodeLine{02579 \textcolor{comment}{           the HAL\_UART\_TxHalfCpltCallback can be implemented in the user file.}}
\DoxyCodeLine{02580 \textcolor{comment}{   */}}
\DoxyCodeLine{02581 \}}
\DoxyCodeLine{02582 }
\DoxyCodeLine{02588 \_\_weak \textcolor{keywordtype}{void} HAL\_UART\_RxCpltCallback(UART\_HandleTypeDef *huart)}
\DoxyCodeLine{02589 \{}
\DoxyCodeLine{02590   \textcolor{comment}{/* Prevent unused argument(s) compilation warning */}}
\DoxyCodeLine{02591   UNUSED(huart);}
\DoxyCodeLine{02592 }
\DoxyCodeLine{02593   \textcolor{comment}{/* NOTE : This function should not be modified, when the callback is needed,}}
\DoxyCodeLine{02594 \textcolor{comment}{            the HAL\_UART\_RxCpltCallback can be implemented in the user file.}}
\DoxyCodeLine{02595 \textcolor{comment}{   */}}
\DoxyCodeLine{02596 \}}
\DoxyCodeLine{02597 }
\DoxyCodeLine{02603 \_\_weak \textcolor{keywordtype}{void} HAL\_UART\_RxHalfCpltCallback(UART\_HandleTypeDef *huart)}
\DoxyCodeLine{02604 \{}
\DoxyCodeLine{02605   \textcolor{comment}{/* Prevent unused argument(s) compilation warning */}}
\DoxyCodeLine{02606   UNUSED(huart);}
\DoxyCodeLine{02607 }
\DoxyCodeLine{02608   \textcolor{comment}{/* NOTE: This function should not be modified, when the callback is needed,}}
\DoxyCodeLine{02609 \textcolor{comment}{           the HAL\_UART\_RxHalfCpltCallback can be implemented in the user file.}}
\DoxyCodeLine{02610 \textcolor{comment}{   */}}
\DoxyCodeLine{02611 \}}
\DoxyCodeLine{02612 }
\DoxyCodeLine{02618 \_\_weak \textcolor{keywordtype}{void} HAL\_UART\_ErrorCallback(UART\_HandleTypeDef *huart)}
\DoxyCodeLine{02619 \{}
\DoxyCodeLine{02620   \textcolor{comment}{/* Prevent unused argument(s) compilation warning */}}
\DoxyCodeLine{02621   UNUSED(huart);}
\DoxyCodeLine{02622 }
\DoxyCodeLine{02623   \textcolor{comment}{/* NOTE : This function should not be modified, when the callback is needed,}}
\DoxyCodeLine{02624 \textcolor{comment}{            the HAL\_UART\_ErrorCallback can be implemented in the user file.}}
\DoxyCodeLine{02625 \textcolor{comment}{   */}}
\DoxyCodeLine{02626 \}}
\DoxyCodeLine{02627 }
\DoxyCodeLine{02633 \_\_weak \textcolor{keywordtype}{void} HAL\_UART\_AbortCpltCallback(UART\_HandleTypeDef *huart)}
\DoxyCodeLine{02634 \{}
\DoxyCodeLine{02635   \textcolor{comment}{/* Prevent unused argument(s) compilation warning */}}
\DoxyCodeLine{02636   UNUSED(huart);}
\DoxyCodeLine{02637 }
\DoxyCodeLine{02638   \textcolor{comment}{/* NOTE : This function should not be modified, when the callback is needed,}}
\DoxyCodeLine{02639 \textcolor{comment}{            the HAL\_UART\_AbortCpltCallback can be implemented in the user file.}}
\DoxyCodeLine{02640 \textcolor{comment}{   */}}
\DoxyCodeLine{02641 \}}
\DoxyCodeLine{02642 }
\DoxyCodeLine{02648 \_\_weak \textcolor{keywordtype}{void} HAL\_UART\_AbortTransmitCpltCallback(UART\_HandleTypeDef *huart)}
\DoxyCodeLine{02649 \{}
\DoxyCodeLine{02650   \textcolor{comment}{/* Prevent unused argument(s) compilation warning */}}
\DoxyCodeLine{02651   UNUSED(huart);}
\DoxyCodeLine{02652 }
\DoxyCodeLine{02653   \textcolor{comment}{/* NOTE : This function should not be modified, when the callback is needed,}}
\DoxyCodeLine{02654 \textcolor{comment}{            the HAL\_UART\_AbortTransmitCpltCallback can be implemented in the user file.}}
\DoxyCodeLine{02655 \textcolor{comment}{   */}}
\DoxyCodeLine{02656 \}}
\DoxyCodeLine{02657 }
\DoxyCodeLine{02663 \_\_weak \textcolor{keywordtype}{void} HAL\_UART\_AbortReceiveCpltCallback(UART\_HandleTypeDef *huart)}
\DoxyCodeLine{02664 \{}
\DoxyCodeLine{02665   \textcolor{comment}{/* Prevent unused argument(s) compilation warning */}}
\DoxyCodeLine{02666   UNUSED(huart);}
\DoxyCodeLine{02667 }
\DoxyCodeLine{02668   \textcolor{comment}{/* NOTE : This function should not be modified, when the callback is needed,}}
\DoxyCodeLine{02669 \textcolor{comment}{            the HAL\_UART\_AbortReceiveCpltCallback can be implemented in the user file.}}
\DoxyCodeLine{02670 \textcolor{comment}{   */}}
\DoxyCodeLine{02671 \}}
\DoxyCodeLine{02672 }
\DoxyCodeLine{02680 \_\_weak \textcolor{keywordtype}{void} HAL\_UARTEx\_RxEventCallback(UART\_HandleTypeDef *huart, uint16\_t Size)}
\DoxyCodeLine{02681 \{}
\DoxyCodeLine{02682   \textcolor{comment}{/* Prevent unused argument(s) compilation warning */}}
\DoxyCodeLine{02683   UNUSED(huart);}
\DoxyCodeLine{02684   UNUSED(Size);}
\DoxyCodeLine{02685 }
\DoxyCodeLine{02686   \textcolor{comment}{/* NOTE : This function should not be modified, when the callback is needed,}}
\DoxyCodeLine{02687 \textcolor{comment}{            the HAL\_UARTEx\_RxEventCallback can be implemented in the user file.}}
\DoxyCodeLine{02688 \textcolor{comment}{   */}}
\DoxyCodeLine{02689 \}}
\DoxyCodeLine{02690 }
\DoxyCodeLine{02728 \textcolor{keywordtype}{void} HAL\_UART\_ReceiverTimeout\_Config(UART\_HandleTypeDef *huart, uint32\_t TimeoutValue)}
\DoxyCodeLine{02729 \{}
\DoxyCodeLine{02730   \textcolor{keywordflow}{if} (!(IS\_LPUART\_INSTANCE(huart-\/>Instance)))}
\DoxyCodeLine{02731   \{}
\DoxyCodeLine{02732     assert\_param(IS\_UART\_RECEIVER\_TIMEOUT\_VALUE(TimeoutValue));}
\DoxyCodeLine{02733     MODIFY\_REG(huart-\/>Instance-\/>RTOR, USART\_RTOR\_RTO, TimeoutValue);}
\DoxyCodeLine{02734   \}}
\DoxyCodeLine{02735 \}}
\DoxyCodeLine{02736 }
\DoxyCodeLine{02743 HAL\_StatusTypeDef HAL\_UART\_EnableReceiverTimeout(UART\_HandleTypeDef *huart)}
\DoxyCodeLine{02744 \{}
\DoxyCodeLine{02745   \textcolor{keywordflow}{if} (!(IS\_LPUART\_INSTANCE(huart-\/>Instance)))}
\DoxyCodeLine{02746   \{}
\DoxyCodeLine{02747     \textcolor{keywordflow}{if} (huart-\/>gState == HAL\_UART\_STATE\_READY)}
\DoxyCodeLine{02748     \{}
\DoxyCodeLine{02749       \textcolor{comment}{/* Process Locked */}}
\DoxyCodeLine{02750       \_\_HAL\_LOCK(huart);}
\DoxyCodeLine{02751 }
\DoxyCodeLine{02752       huart-\/>gState = HAL\_UART\_STATE\_BUSY;}
\DoxyCodeLine{02753 }
\DoxyCodeLine{02754       \textcolor{comment}{/* Set the USART RTOEN bit */}}
\DoxyCodeLine{02755       SET\_BIT(huart-\/>Instance-\/>CR2, USART\_CR2\_RTOEN);}
\DoxyCodeLine{02756 }
\DoxyCodeLine{02757       huart-\/>gState = HAL\_UART\_STATE\_READY;}
\DoxyCodeLine{02758 }
\DoxyCodeLine{02759       \textcolor{comment}{/* Process Unlocked */}}
\DoxyCodeLine{02760       \_\_HAL\_UNLOCK(huart);}
\DoxyCodeLine{02761 }
\DoxyCodeLine{02762       \textcolor{keywordflow}{return} HAL\_OK;}
\DoxyCodeLine{02763     \}}
\DoxyCodeLine{02764     \textcolor{keywordflow}{else}}
\DoxyCodeLine{02765     \{}
\DoxyCodeLine{02766       \textcolor{keywordflow}{return} HAL\_BUSY;}
\DoxyCodeLine{02767     \}}
\DoxyCodeLine{02768   \}}
\DoxyCodeLine{02769   \textcolor{keywordflow}{else}}
\DoxyCodeLine{02770   \{}
\DoxyCodeLine{02771     \textcolor{keywordflow}{return} HAL\_ERROR;}
\DoxyCodeLine{02772   \}}
\DoxyCodeLine{02773 \}}
\DoxyCodeLine{02774 }
\DoxyCodeLine{02781 HAL\_StatusTypeDef HAL\_UART\_DisableReceiverTimeout(UART\_HandleTypeDef *huart)}
\DoxyCodeLine{02782 \{}
\DoxyCodeLine{02783   \textcolor{keywordflow}{if} (!(IS\_LPUART\_INSTANCE(huart-\/>Instance)))}
\DoxyCodeLine{02784   \{}
\DoxyCodeLine{02785     \textcolor{keywordflow}{if} (huart-\/>gState == HAL\_UART\_STATE\_READY)}
\DoxyCodeLine{02786     \{}
\DoxyCodeLine{02787       \textcolor{comment}{/* Process Locked */}}
\DoxyCodeLine{02788       \_\_HAL\_LOCK(huart);}
\DoxyCodeLine{02789 }
\DoxyCodeLine{02790       huart-\/>gState = HAL\_UART\_STATE\_BUSY;}
\DoxyCodeLine{02791 }
\DoxyCodeLine{02792       \textcolor{comment}{/* Clear the USART RTOEN bit */}}
\DoxyCodeLine{02793       CLEAR\_BIT(huart-\/>Instance-\/>CR2, USART\_CR2\_RTOEN);}
\DoxyCodeLine{02794 }
\DoxyCodeLine{02795       huart-\/>gState = HAL\_UART\_STATE\_READY;}
\DoxyCodeLine{02796 }
\DoxyCodeLine{02797       \textcolor{comment}{/* Process Unlocked */}}
\DoxyCodeLine{02798       \_\_HAL\_UNLOCK(huart);}
\DoxyCodeLine{02799 }
\DoxyCodeLine{02800       \textcolor{keywordflow}{return} HAL\_OK;}
\DoxyCodeLine{02801     \}}
\DoxyCodeLine{02802     \textcolor{keywordflow}{else}}
\DoxyCodeLine{02803     \{}
\DoxyCodeLine{02804       \textcolor{keywordflow}{return} HAL\_BUSY;}
\DoxyCodeLine{02805     \}}
\DoxyCodeLine{02806   \}}
\DoxyCodeLine{02807   \textcolor{keywordflow}{else}}
\DoxyCodeLine{02808   \{}
\DoxyCodeLine{02809     \textcolor{keywordflow}{return} HAL\_ERROR;}
\DoxyCodeLine{02810   \}}
\DoxyCodeLine{02811 \}}
\DoxyCodeLine{02812 }
\DoxyCodeLine{02819 HAL\_StatusTypeDef HAL\_MultiProcessor\_EnableMuteMode(UART\_HandleTypeDef *huart)}
\DoxyCodeLine{02820 \{}
\DoxyCodeLine{02821   \_\_HAL\_LOCK(huart);}
\DoxyCodeLine{02822 }
\DoxyCodeLine{02823   huart-\/>gState = HAL\_UART\_STATE\_BUSY;}
\DoxyCodeLine{02824 }
\DoxyCodeLine{02825   \textcolor{comment}{/* Enable USART mute mode by setting the MME bit in the CR1 register */}}
\DoxyCodeLine{02826   ATOMIC\_SET\_BIT(huart-\/>Instance-\/>CR1, USART\_CR1\_MME);}
\DoxyCodeLine{02827 }
\DoxyCodeLine{02828   huart-\/>gState = HAL\_UART\_STATE\_READY;}
\DoxyCodeLine{02829 }
\DoxyCodeLine{02830   \textcolor{keywordflow}{return} (UART\_CheckIdleState(huart));}
\DoxyCodeLine{02831 \}}
\DoxyCodeLine{02832 }
\DoxyCodeLine{02839 HAL\_StatusTypeDef HAL\_MultiProcessor\_DisableMuteMode(UART\_HandleTypeDef *huart)}
\DoxyCodeLine{02840 \{}
\DoxyCodeLine{02841   \_\_HAL\_LOCK(huart);}
\DoxyCodeLine{02842 }
\DoxyCodeLine{02843   huart-\/>gState = HAL\_UART\_STATE\_BUSY;}
\DoxyCodeLine{02844 }
\DoxyCodeLine{02845   \textcolor{comment}{/* Disable USART mute mode by clearing the MME bit in the CR1 register */}}
\DoxyCodeLine{02846   ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR1, USART\_CR1\_MME);}
\DoxyCodeLine{02847 }
\DoxyCodeLine{02848   huart-\/>gState = HAL\_UART\_STATE\_READY;}
\DoxyCodeLine{02849 }
\DoxyCodeLine{02850   \textcolor{keywordflow}{return} (UART\_CheckIdleState(huart));}
\DoxyCodeLine{02851 \}}
\DoxyCodeLine{02852 }
\DoxyCodeLine{02859 \textcolor{keywordtype}{void} HAL\_MultiProcessor\_EnterMuteMode(UART\_HandleTypeDef *huart)}
\DoxyCodeLine{02860 \{}
\DoxyCodeLine{02861   \_\_HAL\_UART\_SEND\_REQ(huart, UART\_MUTE\_MODE\_REQUEST);}
\DoxyCodeLine{02862 \}}
\DoxyCodeLine{02863 }
\DoxyCodeLine{02869 HAL\_StatusTypeDef HAL\_HalfDuplex\_EnableTransmitter(UART\_HandleTypeDef *huart)}
\DoxyCodeLine{02870 \{}
\DoxyCodeLine{02871   \_\_HAL\_LOCK(huart);}
\DoxyCodeLine{02872   huart-\/>gState = HAL\_UART\_STATE\_BUSY;}
\DoxyCodeLine{02873 }
\DoxyCodeLine{02874   \textcolor{comment}{/* Clear TE and RE bits */}}
\DoxyCodeLine{02875   ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR1, (USART\_CR1\_TE | USART\_CR1\_RE));}
\DoxyCodeLine{02876 }
\DoxyCodeLine{02877   \textcolor{comment}{/* Enable the USART's transmit interface by setting the TE bit in the USART CR1 register */}}
\DoxyCodeLine{02878   ATOMIC\_SET\_BIT(huart-\/>Instance-\/>CR1, USART\_CR1\_TE);}
\DoxyCodeLine{02879 }
\DoxyCodeLine{02880   huart-\/>gState = HAL\_UART\_STATE\_READY;}
\DoxyCodeLine{02881 }
\DoxyCodeLine{02882   \_\_HAL\_UNLOCK(huart);}
\DoxyCodeLine{02883 }
\DoxyCodeLine{02884   \textcolor{keywordflow}{return} HAL\_OK;}
\DoxyCodeLine{02885 \}}
\DoxyCodeLine{02886 }
\DoxyCodeLine{02892 HAL\_StatusTypeDef HAL\_HalfDuplex\_EnableReceiver(UART\_HandleTypeDef *huart)}
\DoxyCodeLine{02893 \{}
\DoxyCodeLine{02894   \_\_HAL\_LOCK(huart);}
\DoxyCodeLine{02895   huart-\/>gState = HAL\_UART\_STATE\_BUSY;}
\DoxyCodeLine{02896 }
\DoxyCodeLine{02897   \textcolor{comment}{/* Clear TE and RE bits */}}
\DoxyCodeLine{02898   ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR1, (USART\_CR1\_TE | USART\_CR1\_RE));}
\DoxyCodeLine{02899 }
\DoxyCodeLine{02900   \textcolor{comment}{/* Enable the USART's receive interface by setting the RE bit in the USART CR1 register */}}
\DoxyCodeLine{02901   ATOMIC\_SET\_BIT(huart-\/>Instance-\/>CR1, USART\_CR1\_RE);}
\DoxyCodeLine{02902 }
\DoxyCodeLine{02903   huart-\/>gState = HAL\_UART\_STATE\_READY;}
\DoxyCodeLine{02904 }
\DoxyCodeLine{02905   \_\_HAL\_UNLOCK(huart);}
\DoxyCodeLine{02906 }
\DoxyCodeLine{02907   \textcolor{keywordflow}{return} HAL\_OK;}
\DoxyCodeLine{02908 \}}
\DoxyCodeLine{02909 }
\DoxyCodeLine{02910 }
\DoxyCodeLine{02916 HAL\_StatusTypeDef HAL\_LIN\_SendBreak(UART\_HandleTypeDef *huart)}
\DoxyCodeLine{02917 \{}
\DoxyCodeLine{02918   \textcolor{comment}{/* Check the parameters */}}
\DoxyCodeLine{02919   assert\_param(IS\_UART\_LIN\_INSTANCE(huart-\/>Instance));}
\DoxyCodeLine{02920 }
\DoxyCodeLine{02921   \_\_HAL\_LOCK(huart);}
\DoxyCodeLine{02922 }
\DoxyCodeLine{02923   huart-\/>gState = HAL\_UART\_STATE\_BUSY;}
\DoxyCodeLine{02924 }
\DoxyCodeLine{02925   \textcolor{comment}{/* Send break characters */}}
\DoxyCodeLine{02926   \_\_HAL\_UART\_SEND\_REQ(huart, UART\_SENDBREAK\_REQUEST);}
\DoxyCodeLine{02927 }
\DoxyCodeLine{02928   huart-\/>gState = HAL\_UART\_STATE\_READY;}
\DoxyCodeLine{02929 }
\DoxyCodeLine{02930   \_\_HAL\_UNLOCK(huart);}
\DoxyCodeLine{02931 }
\DoxyCodeLine{02932   \textcolor{keywordflow}{return} HAL\_OK;}
\DoxyCodeLine{02933 \}}
\DoxyCodeLine{02934 }
\DoxyCodeLine{02961 HAL\_UART\_StateTypeDef HAL\_UART\_GetState(UART\_HandleTypeDef *huart)}
\DoxyCodeLine{02962 \{}
\DoxyCodeLine{02963   uint32\_t temp1;}
\DoxyCodeLine{02964   uint32\_t temp2;}
\DoxyCodeLine{02965   temp1 = huart-\/>gState;}
\DoxyCodeLine{02966   temp2 = huart-\/>RxState;}
\DoxyCodeLine{02967 }
\DoxyCodeLine{02968   \textcolor{keywordflow}{return} (HAL\_UART\_StateTypeDef)(temp1 | temp2);}
\DoxyCodeLine{02969 \}}
\DoxyCodeLine{02970 }
\DoxyCodeLine{02977 uint32\_t HAL\_UART\_GetError(UART\_HandleTypeDef *huart)}
\DoxyCodeLine{02978 \{}
\DoxyCodeLine{02979   \textcolor{keywordflow}{return} huart-\/>ErrorCode;}
\DoxyCodeLine{02980 \}}
\DoxyCodeLine{02998 \textcolor{preprocessor}{\#if (USE\_HAL\_UART\_REGISTER\_CALLBACKS == 1)}}
\DoxyCodeLine{02999 \textcolor{keywordtype}{void} UART\_InitCallbacksToDefault(UART\_HandleTypeDef *huart)}
\DoxyCodeLine{03000 \{}
\DoxyCodeLine{03001   \textcolor{comment}{/* Init the UART Callback settings */}}
\DoxyCodeLine{03002   huart-\/>TxHalfCpltCallback        = HAL\_UART\_TxHalfCpltCallback;        \textcolor{comment}{/* Legacy weak TxHalfCpltCallback        */}}
\DoxyCodeLine{03003   huart-\/>TxCpltCallback            = HAL\_UART\_TxCpltCallback;            \textcolor{comment}{/* Legacy weak TxCpltCallback            */}}
\DoxyCodeLine{03004   huart-\/>RxHalfCpltCallback        = HAL\_UART\_RxHalfCpltCallback;        \textcolor{comment}{/* Legacy weak RxHalfCpltCallback        */}}
\DoxyCodeLine{03005   huart-\/>RxCpltCallback            = HAL\_UART\_RxCpltCallback;            \textcolor{comment}{/* Legacy weak RxCpltCallback            */}}
\DoxyCodeLine{03006   huart-\/>ErrorCallback             = HAL\_UART\_ErrorCallback;             \textcolor{comment}{/* Legacy weak ErrorCallback             */}}
\DoxyCodeLine{03007   huart-\/>AbortCpltCallback         = HAL\_UART\_AbortCpltCallback;         \textcolor{comment}{/* Legacy weak AbortCpltCallback         */}}
\DoxyCodeLine{03008   huart-\/>AbortTransmitCpltCallback = HAL\_UART\_AbortTransmitCpltCallback; \textcolor{comment}{/* Legacy weak AbortTransmitCpltCallback */}}
\DoxyCodeLine{03009   huart-\/>AbortReceiveCpltCallback  = HAL\_UART\_AbortReceiveCpltCallback;  \textcolor{comment}{/* Legacy weak AbortReceiveCpltCallback  */}}
\DoxyCodeLine{03010   huart-\/>WakeupCallback            = HAL\_UARTEx\_WakeupCallback;          \textcolor{comment}{/* Legacy weak WakeupCallback            */}}
\DoxyCodeLine{03011   huart-\/>RxFifoFullCallback        = HAL\_UARTEx\_RxFifoFullCallback;      \textcolor{comment}{/* Legacy weak RxFifoFullCallback        */}}
\DoxyCodeLine{03012   huart-\/>TxFifoEmptyCallback       = HAL\_UARTEx\_TxFifoEmptyCallback;     \textcolor{comment}{/* Legacy weak TxFifoEmptyCallback       */}}
\DoxyCodeLine{03013   huart-\/>RxEventCallback           = HAL\_UARTEx\_RxEventCallback;         \textcolor{comment}{/* Legacy weak RxEventCallback           */}}
\DoxyCodeLine{03014 }
\DoxyCodeLine{03015 \}}
\DoxyCodeLine{03016 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* USE\_HAL\_UART\_REGISTER\_CALLBACKS */}\textcolor{preprocessor}{}}
\DoxyCodeLine{03017 }
\DoxyCodeLine{03023 HAL\_StatusTypeDef UART\_SetConfig(UART\_HandleTypeDef *huart)}
\DoxyCodeLine{03024 \{}
\DoxyCodeLine{03025   uint32\_t tmpreg;}
\DoxyCodeLine{03026   uint16\_t brrtemp;}
\DoxyCodeLine{03027   UART\_ClockSourceTypeDef clocksource;}
\DoxyCodeLine{03028   uint32\_t usartdiv;}
\DoxyCodeLine{03029   HAL\_StatusTypeDef ret               = HAL\_OK;}
\DoxyCodeLine{03030   uint32\_t lpuart\_ker\_ck\_pres;}
\DoxyCodeLine{03031   uint32\_t pclk;}
\DoxyCodeLine{03032 }
\DoxyCodeLine{03033   \textcolor{comment}{/* Check the parameters */}}
\DoxyCodeLine{03034   assert\_param(IS\_UART\_BAUDRATE(huart-\/>Init.BaudRate));}
\DoxyCodeLine{03035   assert\_param(IS\_UART\_WORD\_LENGTH(huart-\/>Init.WordLength));}
\DoxyCodeLine{03036   \textcolor{keywordflow}{if} (UART\_INSTANCE\_LOWPOWER(huart))}
\DoxyCodeLine{03037   \{}
\DoxyCodeLine{03038     assert\_param(IS\_LPUART\_STOPBITS(huart-\/>Init.StopBits));}
\DoxyCodeLine{03039   \}}
\DoxyCodeLine{03040   \textcolor{keywordflow}{else}}
\DoxyCodeLine{03041   \{}
\DoxyCodeLine{03042     assert\_param(IS\_UART\_STOPBITS(huart-\/>Init.StopBits));}
\DoxyCodeLine{03043     assert\_param(IS\_UART\_ONE\_BIT\_SAMPLE(huart-\/>Init.OneBitSampling));}
\DoxyCodeLine{03044   \}}
\DoxyCodeLine{03045 }
\DoxyCodeLine{03046   assert\_param(IS\_UART\_PARITY(huart-\/>Init.Parity));}
\DoxyCodeLine{03047   assert\_param(IS\_UART\_MODE(huart-\/>Init.Mode));}
\DoxyCodeLine{03048   assert\_param(IS\_UART\_HARDWARE\_FLOW\_CONTROL(huart-\/>Init.HwFlowCtl));}
\DoxyCodeLine{03049   assert\_param(IS\_UART\_OVERSAMPLING(huart-\/>Init.OverSampling));}
\DoxyCodeLine{03050   assert\_param(IS\_UART\_PRESCALER(huart-\/>Init.ClockPrescaler));}
\DoxyCodeLine{03051 }
\DoxyCodeLine{03052   \textcolor{comment}{/*-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ USART CR1 Configuration -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{03053   \textcolor{comment}{/* Clear M, PCE, PS, TE, RE and OVER8 bits and configure}}
\DoxyCodeLine{03054 \textcolor{comment}{  *  the UART Word Length, Parity, Mode and oversampling:}}
\DoxyCodeLine{03055 \textcolor{comment}{  *  set the M bits according to huart-\/>Init.WordLength value}}
\DoxyCodeLine{03056 \textcolor{comment}{  *  set PCE and PS bits according to huart-\/>Init.Parity value}}
\DoxyCodeLine{03057 \textcolor{comment}{  *  set TE and RE bits according to huart-\/>Init.Mode value}}
\DoxyCodeLine{03058 \textcolor{comment}{  *  set OVER8 bit according to huart-\/>Init.OverSampling value */}}
\DoxyCodeLine{03059   tmpreg = (uint32\_t)huart-\/>Init.WordLength | huart-\/>Init.Parity | huart-\/>Init.Mode | huart-\/>Init.OverSampling ;}
\DoxyCodeLine{03060   MODIFY\_REG(huart-\/>Instance-\/>CR1, USART\_CR1\_FIELDS, tmpreg);}
\DoxyCodeLine{03061 }
\DoxyCodeLine{03062   \textcolor{comment}{/*-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ USART CR2 Configuration -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{03063   \textcolor{comment}{/* Configure the UART Stop Bits: Set STOP[13:12] bits according}}
\DoxyCodeLine{03064 \textcolor{comment}{  * to huart-\/>Init.StopBits value */}}
\DoxyCodeLine{03065   MODIFY\_REG(huart-\/>Instance-\/>CR2, USART\_CR2\_STOP, huart-\/>Init.StopBits);}
\DoxyCodeLine{03066 }
\DoxyCodeLine{03067   \textcolor{comment}{/*-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ USART CR3 Configuration -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{03068   \textcolor{comment}{/* Configure}}
\DoxyCodeLine{03069 \textcolor{comment}{  * -\/ UART HardWare Flow Control: set CTSE and RTSE bits according}}
\DoxyCodeLine{03070 \textcolor{comment}{  *   to huart-\/>Init.HwFlowCtl value}}
\DoxyCodeLine{03071 \textcolor{comment}{  * -\/ one-\/bit sampling method versus three samples' majority rule according}}
\DoxyCodeLine{03072 \textcolor{comment}{  *   to huart-\/>Init.OneBitSampling (not applicable to LPUART) */}}
\DoxyCodeLine{03073   tmpreg = (uint32\_t)huart-\/>Init.HwFlowCtl;}
\DoxyCodeLine{03074 }
\DoxyCodeLine{03075   if (!(UART\_INSTANCE\_LOWPOWER(huart)))}
\DoxyCodeLine{03076   \{}
\DoxyCodeLine{03077     tmpreg |= huart-\/>Init.OneBitSampling;}
\DoxyCodeLine{03078   \}}
\DoxyCodeLine{03079   MODIFY\_REG(huart-\/>Instance-\/>CR3, USART\_CR3\_FIELDS, tmpreg);}
\DoxyCodeLine{03080 }
\DoxyCodeLine{03081   \textcolor{comment}{/*-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ USART PRESC Configuration -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{03082   \textcolor{comment}{/* Configure}}
\DoxyCodeLine{03083 \textcolor{comment}{  * -\/ UART Clock Prescaler : set PRESCALER according to huart-\/>Init.ClockPrescaler value */}}
\DoxyCodeLine{03084   MODIFY\_REG(huart-\/>Instance-\/>PRESC, USART\_PRESC\_PRESCALER, huart-\/>Init.ClockPrescaler);}
\DoxyCodeLine{03085 }
\DoxyCodeLine{03086   \textcolor{comment}{/*-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ USART BRR Configuration -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{03087   UART\_GETCLOCKSOURCE(huart, clocksource);}
\DoxyCodeLine{03088 }
\DoxyCodeLine{03089   \textcolor{comment}{/* Check LPUART instance */}}
\DoxyCodeLine{03090   \textcolor{keywordflow}{if} (UART\_INSTANCE\_LOWPOWER(huart))}
\DoxyCodeLine{03091   \{}
\DoxyCodeLine{03092     \textcolor{comment}{/* Retrieve frequency clock */}}
\DoxyCodeLine{03093     \textcolor{keywordflow}{switch} (clocksource)}
\DoxyCodeLine{03094     \{}
\DoxyCodeLine{03095       \textcolor{keywordflow}{case} UART\_CLOCKSOURCE\_PCLK1:}
\DoxyCodeLine{03096         pclk = HAL\_RCC\_GetPCLK1Freq();}
\DoxyCodeLine{03097         \textcolor{keywordflow}{break};}
\DoxyCodeLine{03098       \textcolor{keywordflow}{case} UART\_CLOCKSOURCE\_HSI:}
\DoxyCodeLine{03099         pclk = (uint32\_t) HSI\_VALUE;}
\DoxyCodeLine{03100         \textcolor{keywordflow}{break};}
\DoxyCodeLine{03101       \textcolor{keywordflow}{case} UART\_CLOCKSOURCE\_SYSCLK:}
\DoxyCodeLine{03102         pclk = HAL\_RCC\_GetSysClockFreq();}
\DoxyCodeLine{03103         \textcolor{keywordflow}{break};}
\DoxyCodeLine{03104       \textcolor{keywordflow}{case} UART\_CLOCKSOURCE\_LSE:}
\DoxyCodeLine{03105         pclk = (uint32\_t) LSE\_VALUE;}
\DoxyCodeLine{03106         \textcolor{keywordflow}{break};}
\DoxyCodeLine{03107       \textcolor{keywordflow}{default}:}
\DoxyCodeLine{03108         pclk = 0U;}
\DoxyCodeLine{03109         ret = HAL\_ERROR;}
\DoxyCodeLine{03110         \textcolor{keywordflow}{break};}
\DoxyCodeLine{03111     \}}
\DoxyCodeLine{03112 }
\DoxyCodeLine{03113     \textcolor{comment}{/* If proper clock source reported */}}
\DoxyCodeLine{03114     \textcolor{keywordflow}{if} (pclk != 0U)}
\DoxyCodeLine{03115     \{}
\DoxyCodeLine{03116       \textcolor{comment}{/* Compute clock after Prescaler */}}
\DoxyCodeLine{03117       lpuart\_ker\_ck\_pres = (pclk / UARTPrescTable[huart-\/>Init.ClockPrescaler]);}
\DoxyCodeLine{03118 }
\DoxyCodeLine{03119       \textcolor{comment}{/* Ensure that Frequency clock is in the range [3 * baudrate, 4096 * baudrate] */}}
\DoxyCodeLine{03120       \textcolor{keywordflow}{if} ((lpuart\_ker\_ck\_pres < (3U * huart-\/>Init.BaudRate)) ||}
\DoxyCodeLine{03121           (lpuart\_ker\_ck\_pres > (4096U * huart-\/>Init.BaudRate)))}
\DoxyCodeLine{03122       \{}
\DoxyCodeLine{03123         ret = HAL\_ERROR;}
\DoxyCodeLine{03124       \}}
\DoxyCodeLine{03125       \textcolor{keywordflow}{else}}
\DoxyCodeLine{03126       \{}
\DoxyCodeLine{03127         \textcolor{comment}{/* Check computed UsartDiv value is in allocated range}}
\DoxyCodeLine{03128 \textcolor{comment}{           (it is forbidden to write values lower than 0x300 in the LPUART\_BRR register) */}}
\DoxyCodeLine{03129         usartdiv = (uint32\_t)(UART\_DIV\_LPUART(pclk, huart-\/>Init.BaudRate, huart-\/>Init.ClockPrescaler));}
\DoxyCodeLine{03130         \textcolor{keywordflow}{if} ((usartdiv >= LPUART\_BRR\_MIN) \&\& (usartdiv <= LPUART\_BRR\_MAX))}
\DoxyCodeLine{03131         \{}
\DoxyCodeLine{03132           huart-\/>Instance-\/>BRR = usartdiv;}
\DoxyCodeLine{03133         \}}
\DoxyCodeLine{03134         \textcolor{keywordflow}{else}}
\DoxyCodeLine{03135         \{}
\DoxyCodeLine{03136           ret = HAL\_ERROR;}
\DoxyCodeLine{03137         \}}
\DoxyCodeLine{03138       \} \textcolor{comment}{/* if ( (lpuart\_ker\_ck\_pres < (3 * huart-\/>Init.BaudRate) ) ||}}
\DoxyCodeLine{03139 \textcolor{comment}{                (lpuart\_ker\_ck\_pres > (4096 * huart-\/>Init.BaudRate) )) */}}
\DoxyCodeLine{03140     \} \textcolor{comment}{/* if (pclk != 0) */}}
\DoxyCodeLine{03141   \}}
\DoxyCodeLine{03142   \textcolor{comment}{/* Check UART Over Sampling to set Baud Rate Register */}}
\DoxyCodeLine{03143   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (huart-\/>Init.OverSampling == UART\_OVERSAMPLING\_8)}
\DoxyCodeLine{03144   \{}
\DoxyCodeLine{03145     \textcolor{keywordflow}{switch} (clocksource)}
\DoxyCodeLine{03146     \{}
\DoxyCodeLine{03147       \textcolor{keywordflow}{case} UART\_CLOCKSOURCE\_PCLK1:}
\DoxyCodeLine{03148         pclk = HAL\_RCC\_GetPCLK1Freq();}
\DoxyCodeLine{03149         \textcolor{keywordflow}{break};}
\DoxyCodeLine{03150       \textcolor{keywordflow}{case} UART\_CLOCKSOURCE\_PCLK2:}
\DoxyCodeLine{03151         pclk = HAL\_RCC\_GetPCLK2Freq();}
\DoxyCodeLine{03152         \textcolor{keywordflow}{break};}
\DoxyCodeLine{03153       \textcolor{keywordflow}{case} UART\_CLOCKSOURCE\_HSI:}
\DoxyCodeLine{03154         pclk = (uint32\_t) HSI\_VALUE;}
\DoxyCodeLine{03155         \textcolor{keywordflow}{break};}
\DoxyCodeLine{03156       \textcolor{keywordflow}{case} UART\_CLOCKSOURCE\_SYSCLK:}
\DoxyCodeLine{03157         pclk = HAL\_RCC\_GetSysClockFreq();}
\DoxyCodeLine{03158         \textcolor{keywordflow}{break};}
\DoxyCodeLine{03159       \textcolor{keywordflow}{case} UART\_CLOCKSOURCE\_LSE:}
\DoxyCodeLine{03160         pclk = (uint32\_t) LSE\_VALUE;}
\DoxyCodeLine{03161         \textcolor{keywordflow}{break};}
\DoxyCodeLine{03162       \textcolor{keywordflow}{default}:}
\DoxyCodeLine{03163         pclk = 0U;}
\DoxyCodeLine{03164         ret = HAL\_ERROR;}
\DoxyCodeLine{03165         \textcolor{keywordflow}{break};}
\DoxyCodeLine{03166     \}}
\DoxyCodeLine{03167 }
\DoxyCodeLine{03168     \textcolor{comment}{/* USARTDIV must be greater than or equal to 0d16 */}}
\DoxyCodeLine{03169     \textcolor{keywordflow}{if} (pclk != 0U)}
\DoxyCodeLine{03170     \{}
\DoxyCodeLine{03171       usartdiv = (uint32\_t)(UART\_DIV\_SAMPLING8(pclk, huart-\/>Init.BaudRate, huart-\/>Init.ClockPrescaler));}
\DoxyCodeLine{03172       \textcolor{keywordflow}{if} ((usartdiv >= UART\_BRR\_MIN) \&\& (usartdiv <= UART\_BRR\_MAX))}
\DoxyCodeLine{03173       \{}
\DoxyCodeLine{03174         brrtemp = (uint16\_t)(usartdiv \& 0xFFF0U);}
\DoxyCodeLine{03175         brrtemp |= (uint16\_t)((usartdiv \& (uint16\_t)0x000FU) >> 1U);}
\DoxyCodeLine{03176         huart-\/>Instance-\/>BRR = brrtemp;}
\DoxyCodeLine{03177       \}}
\DoxyCodeLine{03178       \textcolor{keywordflow}{else}}
\DoxyCodeLine{03179       \{}
\DoxyCodeLine{03180         ret = HAL\_ERROR;}
\DoxyCodeLine{03181       \}}
\DoxyCodeLine{03182     \}}
\DoxyCodeLine{03183   \}}
\DoxyCodeLine{03184   \textcolor{keywordflow}{else}}
\DoxyCodeLine{03185   \{}
\DoxyCodeLine{03186     \textcolor{keywordflow}{switch} (clocksource)}
\DoxyCodeLine{03187     \{}
\DoxyCodeLine{03188       \textcolor{keywordflow}{case} UART\_CLOCKSOURCE\_PCLK1:}
\DoxyCodeLine{03189         pclk = HAL\_RCC\_GetPCLK1Freq();}
\DoxyCodeLine{03190         \textcolor{keywordflow}{break};}
\DoxyCodeLine{03191       \textcolor{keywordflow}{case} UART\_CLOCKSOURCE\_PCLK2:}
\DoxyCodeLine{03192         pclk = HAL\_RCC\_GetPCLK2Freq();}
\DoxyCodeLine{03193         \textcolor{keywordflow}{break};}
\DoxyCodeLine{03194       \textcolor{keywordflow}{case} UART\_CLOCKSOURCE\_HSI:}
\DoxyCodeLine{03195         pclk = (uint32\_t) HSI\_VALUE;}
\DoxyCodeLine{03196         \textcolor{keywordflow}{break};}
\DoxyCodeLine{03197       \textcolor{keywordflow}{case} UART\_CLOCKSOURCE\_SYSCLK:}
\DoxyCodeLine{03198         pclk = HAL\_RCC\_GetSysClockFreq();}
\DoxyCodeLine{03199         \textcolor{keywordflow}{break};}
\DoxyCodeLine{03200       \textcolor{keywordflow}{case} UART\_CLOCKSOURCE\_LSE:}
\DoxyCodeLine{03201         pclk = (uint32\_t) LSE\_VALUE;}
\DoxyCodeLine{03202         \textcolor{keywordflow}{break};}
\DoxyCodeLine{03203       \textcolor{keywordflow}{default}:}
\DoxyCodeLine{03204         pclk = 0U;}
\DoxyCodeLine{03205         ret = HAL\_ERROR;}
\DoxyCodeLine{03206         \textcolor{keywordflow}{break};}
\DoxyCodeLine{03207     \}}
\DoxyCodeLine{03208 }
\DoxyCodeLine{03209     \textcolor{keywordflow}{if} (pclk != 0U)}
\DoxyCodeLine{03210     \{}
\DoxyCodeLine{03211       \textcolor{comment}{/* USARTDIV must be greater than or equal to 0d16 */}}
\DoxyCodeLine{03212       usartdiv = (uint32\_t)(UART\_DIV\_SAMPLING16(pclk, huart-\/>Init.BaudRate, huart-\/>Init.ClockPrescaler));}
\DoxyCodeLine{03213       \textcolor{keywordflow}{if} ((usartdiv >= UART\_BRR\_MIN) \&\& (usartdiv <= UART\_BRR\_MAX))}
\DoxyCodeLine{03214       \{}
\DoxyCodeLine{03215         huart-\/>Instance-\/>BRR = (uint16\_t)usartdiv;}
\DoxyCodeLine{03216       \}}
\DoxyCodeLine{03217       \textcolor{keywordflow}{else}}
\DoxyCodeLine{03218       \{}
\DoxyCodeLine{03219         ret = HAL\_ERROR;}
\DoxyCodeLine{03220       \}}
\DoxyCodeLine{03221     \}}
\DoxyCodeLine{03222   \}}
\DoxyCodeLine{03223 }
\DoxyCodeLine{03224   \textcolor{comment}{/* Initialize the number of data to process during RX/TX ISR execution */}}
\DoxyCodeLine{03225   huart-\/>NbTxDataToProcess = 1;}
\DoxyCodeLine{03226   huart-\/>NbRxDataToProcess = 1;}
\DoxyCodeLine{03227 }
\DoxyCodeLine{03228   \textcolor{comment}{/* Clear ISR function pointers */}}
\DoxyCodeLine{03229   huart-\/>RxISR = NULL;}
\DoxyCodeLine{03230   huart-\/>TxISR = NULL;}
\DoxyCodeLine{03231 }
\DoxyCodeLine{03232   \textcolor{keywordflow}{return} ret;}
\DoxyCodeLine{03233 \}}
\DoxyCodeLine{03234 }
\DoxyCodeLine{03240 \textcolor{keywordtype}{void} UART\_AdvFeatureConfig(UART\_HandleTypeDef *huart)}
\DoxyCodeLine{03241 \{}
\DoxyCodeLine{03242   \textcolor{comment}{/* Check whether the set of advanced features to configure is properly set */}}
\DoxyCodeLine{03243   assert\_param(IS\_UART\_ADVFEATURE\_INIT(huart-\/>AdvancedInit.AdvFeatureInit));}
\DoxyCodeLine{03244 }
\DoxyCodeLine{03245   \textcolor{comment}{/* if required, configure TX pin active level inversion */}}
\DoxyCodeLine{03246   \textcolor{keywordflow}{if} (HAL\_IS\_BIT\_SET(huart-\/>AdvancedInit.AdvFeatureInit, UART\_ADVFEATURE\_TXINVERT\_INIT))}
\DoxyCodeLine{03247   \{}
\DoxyCodeLine{03248     assert\_param(IS\_UART\_ADVFEATURE\_TXINV(huart-\/>AdvancedInit.TxPinLevelInvert));}
\DoxyCodeLine{03249     MODIFY\_REG(huart-\/>Instance-\/>CR2, USART\_CR2\_TXINV, huart-\/>AdvancedInit.TxPinLevelInvert);}
\DoxyCodeLine{03250   \}}
\DoxyCodeLine{03251 }
\DoxyCodeLine{03252   \textcolor{comment}{/* if required, configure RX pin active level inversion */}}
\DoxyCodeLine{03253   \textcolor{keywordflow}{if} (HAL\_IS\_BIT\_SET(huart-\/>AdvancedInit.AdvFeatureInit, UART\_ADVFEATURE\_RXINVERT\_INIT))}
\DoxyCodeLine{03254   \{}
\DoxyCodeLine{03255     assert\_param(IS\_UART\_ADVFEATURE\_RXINV(huart-\/>AdvancedInit.RxPinLevelInvert));}
\DoxyCodeLine{03256     MODIFY\_REG(huart-\/>Instance-\/>CR2, USART\_CR2\_RXINV, huart-\/>AdvancedInit.RxPinLevelInvert);}
\DoxyCodeLine{03257   \}}
\DoxyCodeLine{03258 }
\DoxyCodeLine{03259   \textcolor{comment}{/* if required, configure data inversion */}}
\DoxyCodeLine{03260   \textcolor{keywordflow}{if} (HAL\_IS\_BIT\_SET(huart-\/>AdvancedInit.AdvFeatureInit, UART\_ADVFEATURE\_DATAINVERT\_INIT))}
\DoxyCodeLine{03261   \{}
\DoxyCodeLine{03262     assert\_param(IS\_UART\_ADVFEATURE\_DATAINV(huart-\/>AdvancedInit.DataInvert));}
\DoxyCodeLine{03263     MODIFY\_REG(huart-\/>Instance-\/>CR2, USART\_CR2\_DATAINV, huart-\/>AdvancedInit.DataInvert);}
\DoxyCodeLine{03264   \}}
\DoxyCodeLine{03265 }
\DoxyCodeLine{03266   \textcolor{comment}{/* if required, configure RX/TX pins swap */}}
\DoxyCodeLine{03267   \textcolor{keywordflow}{if} (HAL\_IS\_BIT\_SET(huart-\/>AdvancedInit.AdvFeatureInit, UART\_ADVFEATURE\_SWAP\_INIT))}
\DoxyCodeLine{03268   \{}
\DoxyCodeLine{03269     assert\_param(IS\_UART\_ADVFEATURE\_SWAP(huart-\/>AdvancedInit.Swap));}
\DoxyCodeLine{03270     MODIFY\_REG(huart-\/>Instance-\/>CR2, USART\_CR2\_SWAP, huart-\/>AdvancedInit.Swap);}
\DoxyCodeLine{03271   \}}
\DoxyCodeLine{03272 }
\DoxyCodeLine{03273   \textcolor{comment}{/* if required, configure RX overrun detection disabling */}}
\DoxyCodeLine{03274   \textcolor{keywordflow}{if} (HAL\_IS\_BIT\_SET(huart-\/>AdvancedInit.AdvFeatureInit, UART\_ADVFEATURE\_RXOVERRUNDISABLE\_INIT))}
\DoxyCodeLine{03275   \{}
\DoxyCodeLine{03276     assert\_param(IS\_UART\_OVERRUN(huart-\/>AdvancedInit.OverrunDisable));}
\DoxyCodeLine{03277     MODIFY\_REG(huart-\/>Instance-\/>CR3, USART\_CR3\_OVRDIS, huart-\/>AdvancedInit.OverrunDisable);}
\DoxyCodeLine{03278   \}}
\DoxyCodeLine{03279 }
\DoxyCodeLine{03280   \textcolor{comment}{/* if required, configure DMA disabling on reception error */}}
\DoxyCodeLine{03281   \textcolor{keywordflow}{if} (HAL\_IS\_BIT\_SET(huart-\/>AdvancedInit.AdvFeatureInit, UART\_ADVFEATURE\_DMADISABLEONERROR\_INIT))}
\DoxyCodeLine{03282   \{}
\DoxyCodeLine{03283     assert\_param(IS\_UART\_ADVFEATURE\_DMAONRXERROR(huart-\/>AdvancedInit.DMADisableonRxError));}
\DoxyCodeLine{03284     MODIFY\_REG(huart-\/>Instance-\/>CR3, USART\_CR3\_DDRE, huart-\/>AdvancedInit.DMADisableonRxError);}
\DoxyCodeLine{03285   \}}
\DoxyCodeLine{03286 }
\DoxyCodeLine{03287   \textcolor{comment}{/* if required, configure auto Baud rate detection scheme */}}
\DoxyCodeLine{03288   \textcolor{keywordflow}{if} (HAL\_IS\_BIT\_SET(huart-\/>AdvancedInit.AdvFeatureInit, UART\_ADVFEATURE\_AUTOBAUDRATE\_INIT))}
\DoxyCodeLine{03289   \{}
\DoxyCodeLine{03290     assert\_param(IS\_USART\_AUTOBAUDRATE\_DETECTION\_INSTANCE(huart-\/>Instance));}
\DoxyCodeLine{03291     assert\_param(IS\_UART\_ADVFEATURE\_AUTOBAUDRATE(huart-\/>AdvancedInit.AutoBaudRateEnable));}
\DoxyCodeLine{03292     MODIFY\_REG(huart-\/>Instance-\/>CR2, USART\_CR2\_ABREN, huart-\/>AdvancedInit.AutoBaudRateEnable);}
\DoxyCodeLine{03293     \textcolor{comment}{/* set auto Baudrate detection parameters if detection is enabled */}}
\DoxyCodeLine{03294     \textcolor{keywordflow}{if} (huart-\/>AdvancedInit.AutoBaudRateEnable == UART\_ADVFEATURE\_AUTOBAUDRATE\_ENABLE)}
\DoxyCodeLine{03295     \{}
\DoxyCodeLine{03296       assert\_param(IS\_UART\_ADVFEATURE\_AUTOBAUDRATEMODE(huart-\/>AdvancedInit.AutoBaudRateMode));}
\DoxyCodeLine{03297       MODIFY\_REG(huart-\/>Instance-\/>CR2, USART\_CR2\_ABRMODE, huart-\/>AdvancedInit.AutoBaudRateMode);}
\DoxyCodeLine{03298     \}}
\DoxyCodeLine{03299   \}}
\DoxyCodeLine{03300 }
\DoxyCodeLine{03301   \textcolor{comment}{/* if required, configure MSB first on communication line */}}
\DoxyCodeLine{03302   \textcolor{keywordflow}{if} (HAL\_IS\_BIT\_SET(huart-\/>AdvancedInit.AdvFeatureInit, UART\_ADVFEATURE\_MSBFIRST\_INIT))}
\DoxyCodeLine{03303   \{}
\DoxyCodeLine{03304     assert\_param(IS\_UART\_ADVFEATURE\_MSBFIRST(huart-\/>AdvancedInit.MSBFirst));}
\DoxyCodeLine{03305     MODIFY\_REG(huart-\/>Instance-\/>CR2, USART\_CR2\_MSBFIRST, huart-\/>AdvancedInit.MSBFirst);}
\DoxyCodeLine{03306   \}}
\DoxyCodeLine{03307 \}}
\DoxyCodeLine{03308 }
\DoxyCodeLine{03314 HAL\_StatusTypeDef UART\_CheckIdleState(UART\_HandleTypeDef *huart)}
\DoxyCodeLine{03315 \{}
\DoxyCodeLine{03316   uint32\_t tickstart;}
\DoxyCodeLine{03317 }
\DoxyCodeLine{03318   \textcolor{comment}{/* Initialize the UART ErrorCode */}}
\DoxyCodeLine{03319   huart-\/>ErrorCode = HAL\_UART\_ERROR\_NONE;}
\DoxyCodeLine{03320 }
\DoxyCodeLine{03321   \textcolor{comment}{/* Init tickstart for timeout management */}}
\DoxyCodeLine{03322   tickstart = HAL\_GetTick();}
\DoxyCodeLine{03323 }
\DoxyCodeLine{03324   \textcolor{comment}{/* Check if the Transmitter is enabled */}}
\DoxyCodeLine{03325   \textcolor{keywordflow}{if} ((huart-\/>Instance-\/>CR1 \& USART\_CR1\_TE) == USART\_CR1\_TE)}
\DoxyCodeLine{03326   \{}
\DoxyCodeLine{03327     \textcolor{comment}{/* Wait until TEACK flag is set */}}
\DoxyCodeLine{03328     \textcolor{keywordflow}{if} (UART\_WaitOnFlagUntilTimeout(huart, USART\_ISR\_TEACK, RESET, tickstart, HAL\_UART\_TIMEOUT\_VALUE) != HAL\_OK)}
\DoxyCodeLine{03329     \{}
\DoxyCodeLine{03330       \textcolor{comment}{/* Timeout occurred */}}
\DoxyCodeLine{03331       \textcolor{keywordflow}{return} HAL\_TIMEOUT;}
\DoxyCodeLine{03332     \}}
\DoxyCodeLine{03333   \}}
\DoxyCodeLine{03334 }
\DoxyCodeLine{03335   \textcolor{comment}{/* Check if the Receiver is enabled */}}
\DoxyCodeLine{03336   \textcolor{keywordflow}{if} ((huart-\/>Instance-\/>CR1 \& USART\_CR1\_RE) == USART\_CR1\_RE)}
\DoxyCodeLine{03337   \{}
\DoxyCodeLine{03338     \textcolor{comment}{/* Wait until REACK flag is set */}}
\DoxyCodeLine{03339     \textcolor{keywordflow}{if} (UART\_WaitOnFlagUntilTimeout(huart, USART\_ISR\_REACK, RESET, tickstart, HAL\_UART\_TIMEOUT\_VALUE) != HAL\_OK)}
\DoxyCodeLine{03340     \{}
\DoxyCodeLine{03341       \textcolor{comment}{/* Timeout occurred */}}
\DoxyCodeLine{03342       \textcolor{keywordflow}{return} HAL\_TIMEOUT;}
\DoxyCodeLine{03343     \}}
\DoxyCodeLine{03344   \}}
\DoxyCodeLine{03345 }
\DoxyCodeLine{03346   \textcolor{comment}{/* Initialize the UART State */}}
\DoxyCodeLine{03347   huart-\/>gState = HAL\_UART\_STATE\_READY;}
\DoxyCodeLine{03348   huart-\/>RxState = HAL\_UART\_STATE\_READY;}
\DoxyCodeLine{03349   huart-\/>ReceptionType = HAL\_UART\_RECEPTION\_STANDARD;}
\DoxyCodeLine{03350 }
\DoxyCodeLine{03351   \_\_HAL\_UNLOCK(huart);}
\DoxyCodeLine{03352 }
\DoxyCodeLine{03353   \textcolor{keywordflow}{return} HAL\_OK;}
\DoxyCodeLine{03354 \}}
\DoxyCodeLine{03355 }
\DoxyCodeLine{03366 HAL\_StatusTypeDef UART\_WaitOnFlagUntilTimeout(UART\_HandleTypeDef *huart, uint32\_t Flag, FlagStatus Status,}
\DoxyCodeLine{03367                                               uint32\_t Tickstart, uint32\_t Timeout)}
\DoxyCodeLine{03368 \{}
\DoxyCodeLine{03369   \textcolor{comment}{/* Wait until flag is set */}}
\DoxyCodeLine{03370   \textcolor{keywordflow}{while} ((\_\_HAL\_UART\_GET\_FLAG(huart, Flag) ? SET : RESET) == Status)}
\DoxyCodeLine{03371   \{}
\DoxyCodeLine{03372     \textcolor{comment}{/* Check for the Timeout */}}
\DoxyCodeLine{03373     \textcolor{keywordflow}{if} (Timeout != HAL\_MAX\_DELAY)}
\DoxyCodeLine{03374     \{}
\DoxyCodeLine{03375       \textcolor{keywordflow}{if} (((HAL\_GetTick() -\/ Tickstart) > Timeout) || (Timeout == 0U))}
\DoxyCodeLine{03376       \{}
\DoxyCodeLine{03377         \textcolor{comment}{/* Disable TXE, RXNE, PE and ERR (Frame error, noise error, overrun error)}}
\DoxyCodeLine{03378 \textcolor{comment}{           interrupts for the interrupt process */}}
\DoxyCodeLine{03379         ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR1, (USART\_CR1\_RXNEIE\_RXFNEIE | USART\_CR1\_PEIE |}
\DoxyCodeLine{03380                                                 USART\_CR1\_TXEIE\_TXFNFIE));}
\DoxyCodeLine{03381         ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR3, USART\_CR3\_EIE);}
\DoxyCodeLine{03382 }
\DoxyCodeLine{03383         huart-\/>gState = HAL\_UART\_STATE\_READY;}
\DoxyCodeLine{03384         huart-\/>RxState = HAL\_UART\_STATE\_READY;}
\DoxyCodeLine{03385 }
\DoxyCodeLine{03386         \_\_HAL\_UNLOCK(huart);}
\DoxyCodeLine{03387 }
\DoxyCodeLine{03388         \textcolor{keywordflow}{return} HAL\_TIMEOUT;}
\DoxyCodeLine{03389       \}}
\DoxyCodeLine{03390 }
\DoxyCodeLine{03391       \textcolor{keywordflow}{if} (READ\_BIT(huart-\/>Instance-\/>CR1, USART\_CR1\_RE) != 0U)}
\DoxyCodeLine{03392       \{}
\DoxyCodeLine{03393         \textcolor{keywordflow}{if} (\_\_HAL\_UART\_GET\_FLAG(huart, UART\_FLAG\_RTOF) == SET)}
\DoxyCodeLine{03394         \{}
\DoxyCodeLine{03395           \textcolor{comment}{/* Clear Receiver Timeout flag*/}}
\DoxyCodeLine{03396           \_\_HAL\_UART\_CLEAR\_FLAG(huart, UART\_CLEAR\_RTOF);}
\DoxyCodeLine{03397 }
\DoxyCodeLine{03398           \textcolor{comment}{/* Disable TXE, RXNE, PE and ERR (Frame error, noise error, overrun error)}}
\DoxyCodeLine{03399 \textcolor{comment}{             interrupts for the interrupt process */}}
\DoxyCodeLine{03400           ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR1, (USART\_CR1\_RXNEIE\_RXFNEIE | USART\_CR1\_PEIE |}
\DoxyCodeLine{03401                                                   USART\_CR1\_TXEIE\_TXFNFIE));}
\DoxyCodeLine{03402           ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR3, USART\_CR3\_EIE);}
\DoxyCodeLine{03403 }
\DoxyCodeLine{03404           huart-\/>gState = HAL\_UART\_STATE\_READY;}
\DoxyCodeLine{03405           huart-\/>RxState = HAL\_UART\_STATE\_READY;}
\DoxyCodeLine{03406           huart-\/>ErrorCode = HAL\_UART\_ERROR\_RTO;}
\DoxyCodeLine{03407 }
\DoxyCodeLine{03408           \textcolor{comment}{/* Process Unlocked */}}
\DoxyCodeLine{03409           \_\_HAL\_UNLOCK(huart);}
\DoxyCodeLine{03410 }
\DoxyCodeLine{03411           \textcolor{keywordflow}{return} HAL\_TIMEOUT;}
\DoxyCodeLine{03412         \}}
\DoxyCodeLine{03413       \}}
\DoxyCodeLine{03414     \}}
\DoxyCodeLine{03415   \}}
\DoxyCodeLine{03416   \textcolor{keywordflow}{return} HAL\_OK;}
\DoxyCodeLine{03417 \}}
\DoxyCodeLine{03418 }
\DoxyCodeLine{03430 HAL\_StatusTypeDef UART\_Start\_Receive\_IT(UART\_HandleTypeDef *huart, uint8\_t *pData, uint16\_t Size)}
\DoxyCodeLine{03431 \{}
\DoxyCodeLine{03432   huart-\/>pRxBuffPtr  = pData;}
\DoxyCodeLine{03433   huart-\/>RxXferSize  = Size;}
\DoxyCodeLine{03434   huart-\/>RxXferCount = Size;}
\DoxyCodeLine{03435   huart-\/>RxISR       = NULL;}
\DoxyCodeLine{03436 }
\DoxyCodeLine{03437   \textcolor{comment}{/* Computation of UART mask to apply to RDR register */}}
\DoxyCodeLine{03438   UART\_MASK\_COMPUTATION(huart);}
\DoxyCodeLine{03439 }
\DoxyCodeLine{03440   huart-\/>ErrorCode = HAL\_UART\_ERROR\_NONE;}
\DoxyCodeLine{03441   huart-\/>RxState = HAL\_UART\_STATE\_BUSY\_RX;}
\DoxyCodeLine{03442 }
\DoxyCodeLine{03443   \textcolor{comment}{/* Enable the UART Error Interrupt: (Frame error, noise error, overrun error) */}}
\DoxyCodeLine{03444   ATOMIC\_SET\_BIT(huart-\/>Instance-\/>CR3, USART\_CR3\_EIE);}
\DoxyCodeLine{03445 }
\DoxyCodeLine{03446   \textcolor{comment}{/* Configure Rx interrupt processing */}}
\DoxyCodeLine{03447   \textcolor{keywordflow}{if} ((huart-\/>FifoMode == UART\_FIFOMODE\_ENABLE) \&\& (Size >= huart-\/>NbRxDataToProcess))}
\DoxyCodeLine{03448   \{}
\DoxyCodeLine{03449     \textcolor{comment}{/* Set the Rx ISR function pointer according to the data word length */}}
\DoxyCodeLine{03450     \textcolor{keywordflow}{if} ((huart-\/>Init.WordLength == UART\_WORDLENGTH\_9B) \&\& (huart-\/>Init.Parity == UART\_PARITY\_NONE))}
\DoxyCodeLine{03451     \{}
\DoxyCodeLine{03452       huart-\/>RxISR = UART\_RxISR\_16BIT\_FIFOEN;}
\DoxyCodeLine{03453     \}}
\DoxyCodeLine{03454     \textcolor{keywordflow}{else}}
\DoxyCodeLine{03455     \{}
\DoxyCodeLine{03456       huart-\/>RxISR = UART\_RxISR\_8BIT\_FIFOEN;}
\DoxyCodeLine{03457     \}}
\DoxyCodeLine{03458 }
\DoxyCodeLine{03459     \_\_HAL\_UNLOCK(huart);}
\DoxyCodeLine{03460 }
\DoxyCodeLine{03461     \textcolor{comment}{/* Enable the UART Parity Error interrupt and RX FIFO Threshold interrupt */}}
\DoxyCodeLine{03462     \textcolor{keywordflow}{if} (huart-\/>Init.Parity != UART\_PARITY\_NONE)}
\DoxyCodeLine{03463     \{}
\DoxyCodeLine{03464       ATOMIC\_SET\_BIT(huart-\/>Instance-\/>CR1, USART\_CR1\_PEIE);}
\DoxyCodeLine{03465     \}}
\DoxyCodeLine{03466     ATOMIC\_SET\_BIT(huart-\/>Instance-\/>CR3, USART\_CR3\_RXFTIE);}
\DoxyCodeLine{03467   \}}
\DoxyCodeLine{03468   \textcolor{keywordflow}{else}}
\DoxyCodeLine{03469   \{}
\DoxyCodeLine{03470     \textcolor{comment}{/* Set the Rx ISR function pointer according to the data word length */}}
\DoxyCodeLine{03471     \textcolor{keywordflow}{if} ((huart-\/>Init.WordLength == UART\_WORDLENGTH\_9B) \&\& (huart-\/>Init.Parity == UART\_PARITY\_NONE))}
\DoxyCodeLine{03472     \{}
\DoxyCodeLine{03473       huart-\/>RxISR = UART\_RxISR\_16BIT;}
\DoxyCodeLine{03474     \}}
\DoxyCodeLine{03475     \textcolor{keywordflow}{else}}
\DoxyCodeLine{03476     \{}
\DoxyCodeLine{03477       huart-\/>RxISR = UART\_RxISR\_8BIT;}
\DoxyCodeLine{03478     \}}
\DoxyCodeLine{03479 }
\DoxyCodeLine{03480     \_\_HAL\_UNLOCK(huart);}
\DoxyCodeLine{03481 }
\DoxyCodeLine{03482     \textcolor{comment}{/* Enable the UART Parity Error interrupt and Data Register Not Empty interrupt */}}
\DoxyCodeLine{03483     \textcolor{keywordflow}{if} (huart-\/>Init.Parity != UART\_PARITY\_NONE)}
\DoxyCodeLine{03484     \{}
\DoxyCodeLine{03485       ATOMIC\_SET\_BIT(huart-\/>Instance-\/>CR1, USART\_CR1\_PEIE | USART\_CR1\_RXNEIE\_RXFNEIE);}
\DoxyCodeLine{03486     \}}
\DoxyCodeLine{03487     \textcolor{keywordflow}{else}}
\DoxyCodeLine{03488     \{}
\DoxyCodeLine{03489       ATOMIC\_SET\_BIT(huart-\/>Instance-\/>CR1, USART\_CR1\_RXNEIE\_RXFNEIE);}
\DoxyCodeLine{03490     \}  }
\DoxyCodeLine{03491   \}}
\DoxyCodeLine{03492   \textcolor{keywordflow}{return} HAL\_OK;}
\DoxyCodeLine{03493 \}}
\DoxyCodeLine{03494 }
\DoxyCodeLine{03506 HAL\_StatusTypeDef UART\_Start\_Receive\_DMA(UART\_HandleTypeDef *huart, uint8\_t *pData, uint16\_t Size)}
\DoxyCodeLine{03507 \{}
\DoxyCodeLine{03508   huart-\/>pRxBuffPtr = pData;}
\DoxyCodeLine{03509   huart-\/>RxXferSize = Size;}
\DoxyCodeLine{03510 }
\DoxyCodeLine{03511   huart-\/>ErrorCode = HAL\_UART\_ERROR\_NONE;}
\DoxyCodeLine{03512   huart-\/>RxState = HAL\_UART\_STATE\_BUSY\_RX;}
\DoxyCodeLine{03513 }
\DoxyCodeLine{03514   \textcolor{keywordflow}{if} (huart-\/>hdmarx != NULL)}
\DoxyCodeLine{03515   \{}
\DoxyCodeLine{03516     \textcolor{comment}{/* Set the UART DMA transfer complete callback */}}
\DoxyCodeLine{03517     huart-\/>hdmarx-\/>XferCpltCallback = UART\_DMAReceiveCplt;}
\DoxyCodeLine{03518 }
\DoxyCodeLine{03519     \textcolor{comment}{/* Set the UART DMA Half transfer complete callback */}}
\DoxyCodeLine{03520     huart-\/>hdmarx-\/>XferHalfCpltCallback = UART\_DMARxHalfCplt;}
\DoxyCodeLine{03521 }
\DoxyCodeLine{03522     \textcolor{comment}{/* Set the DMA error callback */}}
\DoxyCodeLine{03523     huart-\/>hdmarx-\/>XferErrorCallback = UART\_DMAError;}
\DoxyCodeLine{03524 }
\DoxyCodeLine{03525     \textcolor{comment}{/* Set the DMA abort callback */}}
\DoxyCodeLine{03526     huart-\/>hdmarx-\/>XferAbortCallback = NULL;}
\DoxyCodeLine{03527 }
\DoxyCodeLine{03528     \textcolor{comment}{/* Enable the DMA channel */}}
\DoxyCodeLine{03529     \textcolor{keywordflow}{if} (HAL\_DMA\_Start\_IT(huart-\/>hdmarx, (uint32\_t)\&huart-\/>Instance-\/>RDR, (uint32\_t)huart-\/>pRxBuffPtr, Size) != HAL\_OK)}
\DoxyCodeLine{03530     \{}
\DoxyCodeLine{03531       \textcolor{comment}{/* Set error code to DMA */}}
\DoxyCodeLine{03532       huart-\/>ErrorCode = HAL\_UART\_ERROR\_DMA;}
\DoxyCodeLine{03533 }
\DoxyCodeLine{03534       \_\_HAL\_UNLOCK(huart);}
\DoxyCodeLine{03535 }
\DoxyCodeLine{03536       \textcolor{comment}{/* Restore huart-\/>RxState to ready */}}
\DoxyCodeLine{03537       huart-\/>RxState = HAL\_UART\_STATE\_READY;}
\DoxyCodeLine{03538 }
\DoxyCodeLine{03539       \textcolor{keywordflow}{return} HAL\_ERROR;}
\DoxyCodeLine{03540     \}}
\DoxyCodeLine{03541   \}}
\DoxyCodeLine{03542   \_\_HAL\_UNLOCK(huart);}
\DoxyCodeLine{03543 }
\DoxyCodeLine{03544   \textcolor{comment}{/* Enable the UART Parity Error Interrupt */}}
\DoxyCodeLine{03545   \textcolor{keywordflow}{if} (huart-\/>Init.Parity != UART\_PARITY\_NONE)}
\DoxyCodeLine{03546   \{}
\DoxyCodeLine{03547     ATOMIC\_SET\_BIT(huart-\/>Instance-\/>CR1, USART\_CR1\_PEIE);}
\DoxyCodeLine{03548   \}}
\DoxyCodeLine{03549 }
\DoxyCodeLine{03550   \textcolor{comment}{/* Enable the UART Error Interrupt: (Frame error, noise error, overrun error) */}}
\DoxyCodeLine{03551   ATOMIC\_SET\_BIT(huart-\/>Instance-\/>CR3, USART\_CR3\_EIE);}
\DoxyCodeLine{03552 }
\DoxyCodeLine{03553   \textcolor{comment}{/* Enable the DMA transfer for the receiver request by setting the DMAR bit}}
\DoxyCodeLine{03554 \textcolor{comment}{  in the UART CR3 register */}}
\DoxyCodeLine{03555   ATOMIC\_SET\_BIT(huart-\/>Instance-\/>CR3, USART\_CR3\_DMAR);}
\DoxyCodeLine{03556 }
\DoxyCodeLine{03557   \textcolor{keywordflow}{return} HAL\_OK;}
\DoxyCodeLine{03558 \}}
\DoxyCodeLine{03559 }
\DoxyCodeLine{03560 }
\DoxyCodeLine{03566 \textcolor{keyword}{static} \textcolor{keywordtype}{void} UART\_EndTxTransfer(UART\_HandleTypeDef *huart)}
\DoxyCodeLine{03567 \{}
\DoxyCodeLine{03568   \textcolor{comment}{/* Disable TXEIE, TCIE, TXFT interrupts */}}
\DoxyCodeLine{03569   ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR1, (USART\_CR1\_TXEIE\_TXFNFIE | USART\_CR1\_TCIE));}
\DoxyCodeLine{03570   ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR3, (USART\_CR3\_TXFTIE));}
\DoxyCodeLine{03571 }
\DoxyCodeLine{03572   \textcolor{comment}{/* At end of Tx process, restore huart-\/>gState to Ready */}}
\DoxyCodeLine{03573   huart-\/>gState = HAL\_UART\_STATE\_READY;}
\DoxyCodeLine{03574 \}}
\DoxyCodeLine{03575 }
\DoxyCodeLine{03576 }
\DoxyCodeLine{03582 \textcolor{keyword}{static} \textcolor{keywordtype}{void} UART\_EndRxTransfer(UART\_HandleTypeDef *huart)}
\DoxyCodeLine{03583 \{}
\DoxyCodeLine{03584   \textcolor{comment}{/* Disable RXNE, PE and ERR (Frame error, noise error, overrun error) interrupts */}}
\DoxyCodeLine{03585   ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR1, (USART\_CR1\_RXNEIE\_RXFNEIE | USART\_CR1\_PEIE));}
\DoxyCodeLine{03586   ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR3, (USART\_CR3\_EIE | USART\_CR3\_RXFTIE));}
\DoxyCodeLine{03587 }
\DoxyCodeLine{03588   \textcolor{comment}{/* In case of reception waiting for IDLE event, disable also the IDLE IE interrupt source */}}
\DoxyCodeLine{03589   \textcolor{keywordflow}{if} (huart-\/>ReceptionType == HAL\_UART\_RECEPTION\_TOIDLE)}
\DoxyCodeLine{03590   \{}
\DoxyCodeLine{03591     ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR1, USART\_CR1\_IDLEIE);}
\DoxyCodeLine{03592   \}}
\DoxyCodeLine{03593 }
\DoxyCodeLine{03594   \textcolor{comment}{/* At end of Rx process, restore huart-\/>RxState to Ready */}}
\DoxyCodeLine{03595   huart-\/>RxState = HAL\_UART\_STATE\_READY;}
\DoxyCodeLine{03596   huart-\/>ReceptionType = HAL\_UART\_RECEPTION\_STANDARD;}
\DoxyCodeLine{03597 }
\DoxyCodeLine{03598   \textcolor{comment}{/* Reset RxIsr function pointer */}}
\DoxyCodeLine{03599   huart-\/>RxISR = NULL;}
\DoxyCodeLine{03600 \}}
\DoxyCodeLine{03601 }
\DoxyCodeLine{03602 }
\DoxyCodeLine{03608 \textcolor{keyword}{static} \textcolor{keywordtype}{void} UART\_DMATransmitCplt(DMA\_HandleTypeDef *hdma)}
\DoxyCodeLine{03609 \{}
\DoxyCodeLine{03610   UART\_HandleTypeDef *huart = (UART\_HandleTypeDef *)(hdma-\/>Parent);}
\DoxyCodeLine{03611 }
\DoxyCodeLine{03612   \textcolor{comment}{/* DMA Normal mode */}}
\DoxyCodeLine{03613   \textcolor{keywordflow}{if} (HAL\_IS\_BIT\_CLR(hdma-\/>Instance-\/>CCR, DMA\_CCR\_CIRC))}
\DoxyCodeLine{03614   \{}
\DoxyCodeLine{03615     huart-\/>TxXferCount = 0U;}
\DoxyCodeLine{03616 }
\DoxyCodeLine{03617     \textcolor{comment}{/* Disable the DMA transfer for transmit request by resetting the DMAT bit}}
\DoxyCodeLine{03618 \textcolor{comment}{       in the UART CR3 register */}}
\DoxyCodeLine{03619     ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR3, USART\_CR3\_DMAT);}
\DoxyCodeLine{03620 }
\DoxyCodeLine{03621     \textcolor{comment}{/* Enable the UART Transmit Complete Interrupt */}}
\DoxyCodeLine{03622     ATOMIC\_SET\_BIT(huart-\/>Instance-\/>CR1, USART\_CR1\_TCIE);}
\DoxyCodeLine{03623   \}}
\DoxyCodeLine{03624   \textcolor{comment}{/* DMA Circular mode */}}
\DoxyCodeLine{03625   \textcolor{keywordflow}{else}}
\DoxyCodeLine{03626   \{}
\DoxyCodeLine{03627 \textcolor{preprocessor}{\#if (USE\_HAL\_UART\_REGISTER\_CALLBACKS == 1)}}
\DoxyCodeLine{03628     \textcolor{comment}{/*Call registered Tx complete callback*/}}
\DoxyCodeLine{03629     huart-\/>TxCpltCallback(huart);}
\DoxyCodeLine{03630 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{03631     \textcolor{comment}{/*Call legacy weak Tx complete callback*/}}
\DoxyCodeLine{03632     HAL\_UART\_TxCpltCallback(huart);}
\DoxyCodeLine{03633 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* USE\_HAL\_UART\_REGISTER\_CALLBACKS */}\textcolor{preprocessor}{}}
\DoxyCodeLine{03634   \}}
\DoxyCodeLine{03635 \}}
\DoxyCodeLine{03636 }
\DoxyCodeLine{03642 \textcolor{keyword}{static} \textcolor{keywordtype}{void} UART\_DMATxHalfCplt(DMA\_HandleTypeDef *hdma)}
\DoxyCodeLine{03643 \{}
\DoxyCodeLine{03644   UART\_HandleTypeDef *huart = (UART\_HandleTypeDef *)(hdma-\/>Parent);}
\DoxyCodeLine{03645 }
\DoxyCodeLine{03646 \textcolor{preprocessor}{\#if (USE\_HAL\_UART\_REGISTER\_CALLBACKS == 1)}}
\DoxyCodeLine{03647   \textcolor{comment}{/*Call registered Tx Half complete callback*/}}
\DoxyCodeLine{03648   huart-\/>TxHalfCpltCallback(huart);}
\DoxyCodeLine{03649 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{03650   \textcolor{comment}{/*Call legacy weak Tx Half complete callback*/}}
\DoxyCodeLine{03651   HAL\_UART\_TxHalfCpltCallback(huart);}
\DoxyCodeLine{03652 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* USE\_HAL\_UART\_REGISTER\_CALLBACKS */}\textcolor{preprocessor}{}}
\DoxyCodeLine{03653 \}}
\DoxyCodeLine{03654 }
\DoxyCodeLine{03660 \textcolor{keyword}{static} \textcolor{keywordtype}{void} UART\_DMAReceiveCplt(DMA\_HandleTypeDef *hdma)}
\DoxyCodeLine{03661 \{}
\DoxyCodeLine{03662   UART\_HandleTypeDef *huart = (UART\_HandleTypeDef *)(hdma-\/>Parent);}
\DoxyCodeLine{03663 }
\DoxyCodeLine{03664   \textcolor{comment}{/* DMA Normal mode */}}
\DoxyCodeLine{03665   \textcolor{keywordflow}{if} (HAL\_IS\_BIT\_CLR(hdma-\/>Instance-\/>CCR, DMA\_CCR\_CIRC))}
\DoxyCodeLine{03666   \{}
\DoxyCodeLine{03667     huart-\/>RxXferCount = 0U;}
\DoxyCodeLine{03668 }
\DoxyCodeLine{03669     \textcolor{comment}{/* Disable PE and ERR (Frame error, noise error, overrun error) interrupts */}}
\DoxyCodeLine{03670     ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR1, USART\_CR1\_PEIE);}
\DoxyCodeLine{03671     ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR3, USART\_CR3\_EIE);}
\DoxyCodeLine{03672 }
\DoxyCodeLine{03673     \textcolor{comment}{/* Disable the DMA transfer for the receiver request by resetting the DMAR bit}}
\DoxyCodeLine{03674 \textcolor{comment}{       in the UART CR3 register */}}
\DoxyCodeLine{03675     ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR3, USART\_CR3\_DMAR);}
\DoxyCodeLine{03676 }
\DoxyCodeLine{03677     \textcolor{comment}{/* At end of Rx process, restore huart-\/>RxState to Ready */}}
\DoxyCodeLine{03678     huart-\/>RxState = HAL\_UART\_STATE\_READY;}
\DoxyCodeLine{03679 }
\DoxyCodeLine{03680     \textcolor{comment}{/* If Reception till IDLE event has been selected, Disable IDLE Interrupt */}}
\DoxyCodeLine{03681     \textcolor{keywordflow}{if} (huart-\/>ReceptionType == HAL\_UART\_RECEPTION\_TOIDLE)}
\DoxyCodeLine{03682     \{}
\DoxyCodeLine{03683       ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR1, USART\_CR1\_IDLEIE);}
\DoxyCodeLine{03684     \}}
\DoxyCodeLine{03685   \}}
\DoxyCodeLine{03686 }
\DoxyCodeLine{03687   \textcolor{comment}{/* Check current reception Mode :}}
\DoxyCodeLine{03688 \textcolor{comment}{     If Reception till IDLE event has been selected : use Rx Event callback */}}
\DoxyCodeLine{03689   \textcolor{keywordflow}{if} (huart-\/>ReceptionType == HAL\_UART\_RECEPTION\_TOIDLE)}
\DoxyCodeLine{03690   \{}
\DoxyCodeLine{03691 \textcolor{preprocessor}{\#if (USE\_HAL\_UART\_REGISTER\_CALLBACKS == 1)}}
\DoxyCodeLine{03692     \textcolor{comment}{/*Call registered Rx Event callback*/}}
\DoxyCodeLine{03693     huart-\/>RxEventCallback(huart, huart-\/>RxXferSize);}
\DoxyCodeLine{03694 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{03695     \textcolor{comment}{/*Call legacy weak Rx Event callback*/}}
\DoxyCodeLine{03696     HAL\_UARTEx\_RxEventCallback(huart, huart-\/>RxXferSize);}
\DoxyCodeLine{03697 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* USE\_HAL\_UART\_REGISTER\_CALLBACKS */}\textcolor{preprocessor}{}}
\DoxyCodeLine{03698   \}}
\DoxyCodeLine{03699   \textcolor{keywordflow}{else}}
\DoxyCodeLine{03700   \{}
\DoxyCodeLine{03701     \textcolor{comment}{/* In other cases : use Rx Complete callback */}}
\DoxyCodeLine{03702 \textcolor{preprocessor}{\#if (USE\_HAL\_UART\_REGISTER\_CALLBACKS == 1)}}
\DoxyCodeLine{03703     \textcolor{comment}{/*Call registered Rx complete callback*/}}
\DoxyCodeLine{03704     huart-\/>RxCpltCallback(huart);}
\DoxyCodeLine{03705 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{03706     \textcolor{comment}{/*Call legacy weak Rx complete callback*/}}
\DoxyCodeLine{03707     HAL\_UART\_RxCpltCallback(huart);}
\DoxyCodeLine{03708 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* USE\_HAL\_UART\_REGISTER\_CALLBACKS */}\textcolor{preprocessor}{}}
\DoxyCodeLine{03709   \}}
\DoxyCodeLine{03710 \}}
\DoxyCodeLine{03711 }
\DoxyCodeLine{03717 \textcolor{keyword}{static} \textcolor{keywordtype}{void} UART\_DMARxHalfCplt(DMA\_HandleTypeDef *hdma)}
\DoxyCodeLine{03718 \{}
\DoxyCodeLine{03719   UART\_HandleTypeDef *huart = (UART\_HandleTypeDef *)(hdma-\/>Parent);}
\DoxyCodeLine{03720 }
\DoxyCodeLine{03721   \textcolor{comment}{/* Check current reception Mode :}}
\DoxyCodeLine{03722 \textcolor{comment}{     If Reception till IDLE event has been selected : use Rx Event callback */}}
\DoxyCodeLine{03723   \textcolor{keywordflow}{if} (huart-\/>ReceptionType == HAL\_UART\_RECEPTION\_TOIDLE)}
\DoxyCodeLine{03724   \{}
\DoxyCodeLine{03725 \textcolor{preprocessor}{\#if (USE\_HAL\_UART\_REGISTER\_CALLBACKS == 1)}}
\DoxyCodeLine{03726     \textcolor{comment}{/*Call registered Rx Event callback*/}}
\DoxyCodeLine{03727     huart-\/>RxEventCallback(huart, huart-\/>RxXferSize / 2U);}
\DoxyCodeLine{03728 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{03729     \textcolor{comment}{/*Call legacy weak Rx Event callback*/}}
\DoxyCodeLine{03730     HAL\_UARTEx\_RxEventCallback(huart, huart-\/>RxXferSize / 2U);}
\DoxyCodeLine{03731 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* USE\_HAL\_UART\_REGISTER\_CALLBACKS */}\textcolor{preprocessor}{}}
\DoxyCodeLine{03732   \}}
\DoxyCodeLine{03733   \textcolor{keywordflow}{else}}
\DoxyCodeLine{03734   \{}
\DoxyCodeLine{03735     \textcolor{comment}{/* In other cases : use Rx Half Complete callback */}}
\DoxyCodeLine{03736 \textcolor{preprocessor}{\#if (USE\_HAL\_UART\_REGISTER\_CALLBACKS == 1)}}
\DoxyCodeLine{03737     \textcolor{comment}{/*Call registered Rx Half complete callback*/}}
\DoxyCodeLine{03738     huart-\/>RxHalfCpltCallback(huart);}
\DoxyCodeLine{03739 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{03740     \textcolor{comment}{/*Call legacy weak Rx Half complete callback*/}}
\DoxyCodeLine{03741     HAL\_UART\_RxHalfCpltCallback(huart);}
\DoxyCodeLine{03742 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* USE\_HAL\_UART\_REGISTER\_CALLBACKS */}\textcolor{preprocessor}{}}
\DoxyCodeLine{03743   \}}
\DoxyCodeLine{03744 \}}
\DoxyCodeLine{03745 }
\DoxyCodeLine{03751 \textcolor{keyword}{static} \textcolor{keywordtype}{void} UART\_DMAError(DMA\_HandleTypeDef *hdma)}
\DoxyCodeLine{03752 \{}
\DoxyCodeLine{03753   UART\_HandleTypeDef *huart = (UART\_HandleTypeDef *)(hdma-\/>Parent);}
\DoxyCodeLine{03754 }
\DoxyCodeLine{03755   \textcolor{keyword}{const} HAL\_UART\_StateTypeDef gstate = huart-\/>gState;}
\DoxyCodeLine{03756   \textcolor{keyword}{const} HAL\_UART\_StateTypeDef rxstate = huart-\/>RxState;}
\DoxyCodeLine{03757 }
\DoxyCodeLine{03758   \textcolor{comment}{/* Stop UART DMA Tx request if ongoing */}}
\DoxyCodeLine{03759   \textcolor{keywordflow}{if} ((HAL\_IS\_BIT\_SET(huart-\/>Instance-\/>CR3, USART\_CR3\_DMAT)) \&\&}
\DoxyCodeLine{03760       (gstate == HAL\_UART\_STATE\_BUSY\_TX))}
\DoxyCodeLine{03761   \{}
\DoxyCodeLine{03762     huart-\/>TxXferCount = 0U;}
\DoxyCodeLine{03763     UART\_EndTxTransfer(huart);}
\DoxyCodeLine{03764   \}}
\DoxyCodeLine{03765 }
\DoxyCodeLine{03766   \textcolor{comment}{/* Stop UART DMA Rx request if ongoing */}}
\DoxyCodeLine{03767   \textcolor{keywordflow}{if} ((HAL\_IS\_BIT\_SET(huart-\/>Instance-\/>CR3, USART\_CR3\_DMAR)) \&\&}
\DoxyCodeLine{03768       (rxstate == HAL\_UART\_STATE\_BUSY\_RX))}
\DoxyCodeLine{03769   \{}
\DoxyCodeLine{03770     huart-\/>RxXferCount = 0U;}
\DoxyCodeLine{03771     UART\_EndRxTransfer(huart);}
\DoxyCodeLine{03772   \}}
\DoxyCodeLine{03773 }
\DoxyCodeLine{03774   huart-\/>ErrorCode |= HAL\_UART\_ERROR\_DMA;}
\DoxyCodeLine{03775 }
\DoxyCodeLine{03776 \textcolor{preprocessor}{\#if (USE\_HAL\_UART\_REGISTER\_CALLBACKS == 1)}}
\DoxyCodeLine{03777   \textcolor{comment}{/*Call registered error callback*/}}
\DoxyCodeLine{03778   huart-\/>ErrorCallback(huart);}
\DoxyCodeLine{03779 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{03780   \textcolor{comment}{/*Call legacy weak error callback*/}}
\DoxyCodeLine{03781   HAL\_UART\_ErrorCallback(huart);}
\DoxyCodeLine{03782 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* USE\_HAL\_UART\_REGISTER\_CALLBACKS */}\textcolor{preprocessor}{}}
\DoxyCodeLine{03783 \}}
\DoxyCodeLine{03784 }
\DoxyCodeLine{03791 \textcolor{keyword}{static} \textcolor{keywordtype}{void} UART\_DMAAbortOnError(DMA\_HandleTypeDef *hdma)}
\DoxyCodeLine{03792 \{}
\DoxyCodeLine{03793   UART\_HandleTypeDef *huart = (UART\_HandleTypeDef *)(hdma-\/>Parent);}
\DoxyCodeLine{03794   huart-\/>RxXferCount = 0U;}
\DoxyCodeLine{03795   huart-\/>TxXferCount = 0U;}
\DoxyCodeLine{03796 }
\DoxyCodeLine{03797 \textcolor{preprocessor}{\#if (USE\_HAL\_UART\_REGISTER\_CALLBACKS == 1)}}
\DoxyCodeLine{03798   \textcolor{comment}{/*Call registered error callback*/}}
\DoxyCodeLine{03799   huart-\/>ErrorCallback(huart);}
\DoxyCodeLine{03800 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{03801   \textcolor{comment}{/*Call legacy weak error callback*/}}
\DoxyCodeLine{03802   HAL\_UART\_ErrorCallback(huart);}
\DoxyCodeLine{03803 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* USE\_HAL\_UART\_REGISTER\_CALLBACKS */}\textcolor{preprocessor}{}}
\DoxyCodeLine{03804 \}}
\DoxyCodeLine{03805 }
\DoxyCodeLine{03814 \textcolor{keyword}{static} \textcolor{keywordtype}{void} UART\_DMATxAbortCallback(DMA\_HandleTypeDef *hdma)}
\DoxyCodeLine{03815 \{}
\DoxyCodeLine{03816   UART\_HandleTypeDef *huart = (UART\_HandleTypeDef *)(hdma-\/>Parent);}
\DoxyCodeLine{03817 }
\DoxyCodeLine{03818   huart-\/>hdmatx-\/>XferAbortCallback = NULL;}
\DoxyCodeLine{03819 }
\DoxyCodeLine{03820   \textcolor{comment}{/* Check if an Abort process is still ongoing */}}
\DoxyCodeLine{03821   \textcolor{keywordflow}{if} (huart-\/>hdmarx != NULL)}
\DoxyCodeLine{03822   \{}
\DoxyCodeLine{03823     \textcolor{keywordflow}{if} (huart-\/>hdmarx-\/>XferAbortCallback != NULL)}
\DoxyCodeLine{03824     \{}
\DoxyCodeLine{03825       \textcolor{keywordflow}{return};}
\DoxyCodeLine{03826     \}}
\DoxyCodeLine{03827   \}}
\DoxyCodeLine{03828 }
\DoxyCodeLine{03829   \textcolor{comment}{/* No Abort process still ongoing : All DMA channels are aborted, call user Abort Complete callback */}}
\DoxyCodeLine{03830   huart-\/>TxXferCount = 0U;}
\DoxyCodeLine{03831   huart-\/>RxXferCount = 0U;}
\DoxyCodeLine{03832 }
\DoxyCodeLine{03833   \textcolor{comment}{/* Reset errorCode */}}
\DoxyCodeLine{03834   huart-\/>ErrorCode = HAL\_UART\_ERROR\_NONE;}
\DoxyCodeLine{03835 }
\DoxyCodeLine{03836   \textcolor{comment}{/* Clear the Error flags in the ICR register */}}
\DoxyCodeLine{03837   \_\_HAL\_UART\_CLEAR\_FLAG(huart, UART\_CLEAR\_OREF | UART\_CLEAR\_NEF | UART\_CLEAR\_PEF | UART\_CLEAR\_FEF);}
\DoxyCodeLine{03838 }
\DoxyCodeLine{03839   \textcolor{comment}{/* Flush the whole TX FIFO (if needed) */}}
\DoxyCodeLine{03840   \textcolor{keywordflow}{if} (huart-\/>FifoMode == UART\_FIFOMODE\_ENABLE)}
\DoxyCodeLine{03841   \{}
\DoxyCodeLine{03842     \_\_HAL\_UART\_SEND\_REQ(huart, UART\_TXDATA\_FLUSH\_REQUEST);}
\DoxyCodeLine{03843   \}}
\DoxyCodeLine{03844 }
\DoxyCodeLine{03845   \textcolor{comment}{/* Restore huart-\/>gState and huart-\/>RxState to Ready */}}
\DoxyCodeLine{03846   huart-\/>gState  = HAL\_UART\_STATE\_READY;}
\DoxyCodeLine{03847   huart-\/>RxState = HAL\_UART\_STATE\_READY;}
\DoxyCodeLine{03848   huart-\/>ReceptionType = HAL\_UART\_RECEPTION\_STANDARD;}
\DoxyCodeLine{03849 }
\DoxyCodeLine{03850   \textcolor{comment}{/* Call user Abort complete callback */}}
\DoxyCodeLine{03851 \textcolor{preprocessor}{\#if (USE\_HAL\_UART\_REGISTER\_CALLBACKS == 1)}}
\DoxyCodeLine{03852   \textcolor{comment}{/* Call registered Abort complete callback */}}
\DoxyCodeLine{03853   huart-\/>AbortCpltCallback(huart);}
\DoxyCodeLine{03854 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{03855   \textcolor{comment}{/* Call legacy weak Abort complete callback */}}
\DoxyCodeLine{03856   HAL\_UART\_AbortCpltCallback(huart);}
\DoxyCodeLine{03857 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* USE\_HAL\_UART\_REGISTER\_CALLBACKS */}\textcolor{preprocessor}{}}
\DoxyCodeLine{03858 \}}
\DoxyCodeLine{03859 }
\DoxyCodeLine{03860 }
\DoxyCodeLine{03869 \textcolor{keyword}{static} \textcolor{keywordtype}{void} UART\_DMARxAbortCallback(DMA\_HandleTypeDef *hdma)}
\DoxyCodeLine{03870 \{}
\DoxyCodeLine{03871   UART\_HandleTypeDef *huart = (UART\_HandleTypeDef *)(hdma-\/>Parent);}
\DoxyCodeLine{03872 }
\DoxyCodeLine{03873   huart-\/>hdmarx-\/>XferAbortCallback = NULL;}
\DoxyCodeLine{03874 }
\DoxyCodeLine{03875   \textcolor{comment}{/* Check if an Abort process is still ongoing */}}
\DoxyCodeLine{03876   \textcolor{keywordflow}{if} (huart-\/>hdmatx != NULL)}
\DoxyCodeLine{03877   \{}
\DoxyCodeLine{03878     \textcolor{keywordflow}{if} (huart-\/>hdmatx-\/>XferAbortCallback != NULL)}
\DoxyCodeLine{03879     \{}
\DoxyCodeLine{03880       \textcolor{keywordflow}{return};}
\DoxyCodeLine{03881     \}}
\DoxyCodeLine{03882   \}}
\DoxyCodeLine{03883 }
\DoxyCodeLine{03884   \textcolor{comment}{/* No Abort process still ongoing : All DMA channels are aborted, call user Abort Complete callback */}}
\DoxyCodeLine{03885   huart-\/>TxXferCount = 0U;}
\DoxyCodeLine{03886   huart-\/>RxXferCount = 0U;}
\DoxyCodeLine{03887 }
\DoxyCodeLine{03888   \textcolor{comment}{/* Reset errorCode */}}
\DoxyCodeLine{03889   huart-\/>ErrorCode = HAL\_UART\_ERROR\_NONE;}
\DoxyCodeLine{03890 }
\DoxyCodeLine{03891   \textcolor{comment}{/* Clear the Error flags in the ICR register */}}
\DoxyCodeLine{03892   \_\_HAL\_UART\_CLEAR\_FLAG(huart, UART\_CLEAR\_OREF | UART\_CLEAR\_NEF | UART\_CLEAR\_PEF | UART\_CLEAR\_FEF);}
\DoxyCodeLine{03893 }
\DoxyCodeLine{03894   \textcolor{comment}{/* Discard the received data */}}
\DoxyCodeLine{03895   \_\_HAL\_UART\_SEND\_REQ(huart, UART\_RXDATA\_FLUSH\_REQUEST);}
\DoxyCodeLine{03896 }
\DoxyCodeLine{03897   \textcolor{comment}{/* Restore huart-\/>gState and huart-\/>RxState to Ready */}}
\DoxyCodeLine{03898   huart-\/>gState  = HAL\_UART\_STATE\_READY;}
\DoxyCodeLine{03899   huart-\/>RxState = HAL\_UART\_STATE\_READY;}
\DoxyCodeLine{03900   huart-\/>ReceptionType = HAL\_UART\_RECEPTION\_STANDARD;}
\DoxyCodeLine{03901 }
\DoxyCodeLine{03902   \textcolor{comment}{/* Call user Abort complete callback */}}
\DoxyCodeLine{03903 \textcolor{preprocessor}{\#if (USE\_HAL\_UART\_REGISTER\_CALLBACKS == 1)}}
\DoxyCodeLine{03904   \textcolor{comment}{/* Call registered Abort complete callback */}}
\DoxyCodeLine{03905   huart-\/>AbortCpltCallback(huart);}
\DoxyCodeLine{03906 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{03907   \textcolor{comment}{/* Call legacy weak Abort complete callback */}}
\DoxyCodeLine{03908   HAL\_UART\_AbortCpltCallback(huart);}
\DoxyCodeLine{03909 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* USE\_HAL\_UART\_REGISTER\_CALLBACKS */}\textcolor{preprocessor}{}}
\DoxyCodeLine{03910 \}}
\DoxyCodeLine{03911 }
\DoxyCodeLine{03912 }
\DoxyCodeLine{03921 \textcolor{keyword}{static} \textcolor{keywordtype}{void} UART\_DMATxOnlyAbortCallback(DMA\_HandleTypeDef *hdma)}
\DoxyCodeLine{03922 \{}
\DoxyCodeLine{03923   UART\_HandleTypeDef *huart = (UART\_HandleTypeDef *)(hdma-\/>Parent);}
\DoxyCodeLine{03924 }
\DoxyCodeLine{03925   huart-\/>TxXferCount = 0U;}
\DoxyCodeLine{03926 }
\DoxyCodeLine{03927   \textcolor{comment}{/* Flush the whole TX FIFO (if needed) */}}
\DoxyCodeLine{03928   \textcolor{keywordflow}{if} (huart-\/>FifoMode == UART\_FIFOMODE\_ENABLE)}
\DoxyCodeLine{03929   \{}
\DoxyCodeLine{03930     \_\_HAL\_UART\_SEND\_REQ(huart, UART\_TXDATA\_FLUSH\_REQUEST);}
\DoxyCodeLine{03931   \}}
\DoxyCodeLine{03932 }
\DoxyCodeLine{03933   \textcolor{comment}{/* Restore huart-\/>gState to Ready */}}
\DoxyCodeLine{03934   huart-\/>gState = HAL\_UART\_STATE\_READY;}
\DoxyCodeLine{03935 }
\DoxyCodeLine{03936   \textcolor{comment}{/* Call user Abort complete callback */}}
\DoxyCodeLine{03937 \textcolor{preprocessor}{\#if (USE\_HAL\_UART\_REGISTER\_CALLBACKS == 1)}}
\DoxyCodeLine{03938   \textcolor{comment}{/* Call registered Abort Transmit Complete Callback */}}
\DoxyCodeLine{03939   huart-\/>AbortTransmitCpltCallback(huart);}
\DoxyCodeLine{03940 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{03941   \textcolor{comment}{/* Call legacy weak Abort Transmit Complete Callback */}}
\DoxyCodeLine{03942   HAL\_UART\_AbortTransmitCpltCallback(huart);}
\DoxyCodeLine{03943 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* USE\_HAL\_UART\_REGISTER\_CALLBACKS */}\textcolor{preprocessor}{}}
\DoxyCodeLine{03944 \}}
\DoxyCodeLine{03945 }
\DoxyCodeLine{03954 \textcolor{keyword}{static} \textcolor{keywordtype}{void} UART\_DMARxOnlyAbortCallback(DMA\_HandleTypeDef *hdma)}
\DoxyCodeLine{03955 \{}
\DoxyCodeLine{03956   UART\_HandleTypeDef *huart = (UART\_HandleTypeDef *)((DMA\_HandleTypeDef *)hdma)-\/>Parent;}
\DoxyCodeLine{03957 }
\DoxyCodeLine{03958   huart-\/>RxXferCount = 0U;}
\DoxyCodeLine{03959 }
\DoxyCodeLine{03960   \textcolor{comment}{/* Clear the Error flags in the ICR register */}}
\DoxyCodeLine{03961   \_\_HAL\_UART\_CLEAR\_FLAG(huart, UART\_CLEAR\_OREF | UART\_CLEAR\_NEF | UART\_CLEAR\_PEF | UART\_CLEAR\_FEF);}
\DoxyCodeLine{03962 }
\DoxyCodeLine{03963   \textcolor{comment}{/* Discard the received data */}}
\DoxyCodeLine{03964   \_\_HAL\_UART\_SEND\_REQ(huart, UART\_RXDATA\_FLUSH\_REQUEST);}
\DoxyCodeLine{03965 }
\DoxyCodeLine{03966   \textcolor{comment}{/* Restore huart-\/>RxState to Ready */}}
\DoxyCodeLine{03967   huart-\/>RxState = HAL\_UART\_STATE\_READY;}
\DoxyCodeLine{03968   huart-\/>ReceptionType = HAL\_UART\_RECEPTION\_STANDARD;}
\DoxyCodeLine{03969 }
\DoxyCodeLine{03970   \textcolor{comment}{/* Call user Abort complete callback */}}
\DoxyCodeLine{03971 \textcolor{preprocessor}{\#if (USE\_HAL\_UART\_REGISTER\_CALLBACKS == 1)}}
\DoxyCodeLine{03972   \textcolor{comment}{/* Call registered Abort Receive Complete Callback */}}
\DoxyCodeLine{03973   huart-\/>AbortReceiveCpltCallback(huart);}
\DoxyCodeLine{03974 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{03975   \textcolor{comment}{/* Call legacy weak Abort Receive Complete Callback */}}
\DoxyCodeLine{03976   HAL\_UART\_AbortReceiveCpltCallback(huart);}
\DoxyCodeLine{03977 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* USE\_HAL\_UART\_REGISTER\_CALLBACKS */}\textcolor{preprocessor}{}}
\DoxyCodeLine{03978 \}}
\DoxyCodeLine{03979 }
\DoxyCodeLine{03987 \textcolor{keyword}{static} \textcolor{keywordtype}{void} UART\_TxISR\_8BIT(UART\_HandleTypeDef *huart)}
\DoxyCodeLine{03988 \{}
\DoxyCodeLine{03989   \textcolor{comment}{/* Check that a Tx process is ongoing */}}
\DoxyCodeLine{03990   \textcolor{keywordflow}{if} (huart-\/>gState == HAL\_UART\_STATE\_BUSY\_TX)}
\DoxyCodeLine{03991   \{}
\DoxyCodeLine{03992     \textcolor{keywordflow}{if} (huart-\/>TxXferCount == 0U)}
\DoxyCodeLine{03993     \{}
\DoxyCodeLine{03994       \textcolor{comment}{/* Disable the UART Transmit Data Register Empty Interrupt */}}
\DoxyCodeLine{03995       ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR1, USART\_CR1\_TXEIE\_TXFNFIE);}
\DoxyCodeLine{03996 }
\DoxyCodeLine{03997       \textcolor{comment}{/* Enable the UART Transmit Complete Interrupt */}}
\DoxyCodeLine{03998       ATOMIC\_SET\_BIT(huart-\/>Instance-\/>CR1, USART\_CR1\_TCIE);}
\DoxyCodeLine{03999     \}}
\DoxyCodeLine{04000     \textcolor{keywordflow}{else}}
\DoxyCodeLine{04001     \{}
\DoxyCodeLine{04002       huart-\/>Instance-\/>TDR = (uint8\_t)(*huart-\/>pTxBuffPtr \& (uint8\_t)0xFF);}
\DoxyCodeLine{04003       huart-\/>pTxBuffPtr++;}
\DoxyCodeLine{04004       huart-\/>TxXferCount-\/-\/;}
\DoxyCodeLine{04005     \}}
\DoxyCodeLine{04006   \}}
\DoxyCodeLine{04007 \}}
\DoxyCodeLine{04008 }
\DoxyCodeLine{04016 \textcolor{keyword}{static} \textcolor{keywordtype}{void} UART\_TxISR\_16BIT(UART\_HandleTypeDef *huart)}
\DoxyCodeLine{04017 \{}
\DoxyCodeLine{04018   \textcolor{keyword}{const} uint16\_t *tmp;}
\DoxyCodeLine{04019 }
\DoxyCodeLine{04020   \textcolor{comment}{/* Check that a Tx process is ongoing */}}
\DoxyCodeLine{04021   \textcolor{keywordflow}{if} (huart-\/>gState == HAL\_UART\_STATE\_BUSY\_TX)}
\DoxyCodeLine{04022   \{}
\DoxyCodeLine{04023     \textcolor{keywordflow}{if} (huart-\/>TxXferCount == 0U)}
\DoxyCodeLine{04024     \{}
\DoxyCodeLine{04025       \textcolor{comment}{/* Disable the UART Transmit Data Register Empty Interrupt */}}
\DoxyCodeLine{04026       ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR1, USART\_CR1\_TXEIE\_TXFNFIE);}
\DoxyCodeLine{04027 }
\DoxyCodeLine{04028       \textcolor{comment}{/* Enable the UART Transmit Complete Interrupt */}}
\DoxyCodeLine{04029       ATOMIC\_SET\_BIT(huart-\/>Instance-\/>CR1, USART\_CR1\_TCIE);}
\DoxyCodeLine{04030     \}}
\DoxyCodeLine{04031     \textcolor{keywordflow}{else}}
\DoxyCodeLine{04032     \{}
\DoxyCodeLine{04033       tmp = (\textcolor{keyword}{const} uint16\_t *) huart-\/>pTxBuffPtr;}
\DoxyCodeLine{04034       huart-\/>Instance-\/>TDR = (((uint32\_t)(*tmp)) \& 0x01FFUL);}
\DoxyCodeLine{04035       huart-\/>pTxBuffPtr += 2U;}
\DoxyCodeLine{04036       huart-\/>TxXferCount-\/-\/;}
\DoxyCodeLine{04037     \}}
\DoxyCodeLine{04038   \}}
\DoxyCodeLine{04039 \}}
\DoxyCodeLine{04040 }
\DoxyCodeLine{04048 \textcolor{keyword}{static} \textcolor{keywordtype}{void} UART\_TxISR\_8BIT\_FIFOEN(UART\_HandleTypeDef *huart)}
\DoxyCodeLine{04049 \{}
\DoxyCodeLine{04050   uint16\_t  nb\_tx\_data;}
\DoxyCodeLine{04051 }
\DoxyCodeLine{04052   \textcolor{comment}{/* Check that a Tx process is ongoing */}}
\DoxyCodeLine{04053   \textcolor{keywordflow}{if} (huart-\/>gState == HAL\_UART\_STATE\_BUSY\_TX)}
\DoxyCodeLine{04054   \{}
\DoxyCodeLine{04055     \textcolor{keywordflow}{for} (nb\_tx\_data = huart-\/>NbTxDataToProcess ; nb\_tx\_data > 0U ; nb\_tx\_data-\/-\/)}
\DoxyCodeLine{04056     \{}
\DoxyCodeLine{04057       \textcolor{keywordflow}{if} (huart-\/>TxXferCount == 0U)}
\DoxyCodeLine{04058       \{}
\DoxyCodeLine{04059         \textcolor{comment}{/* Disable the TX FIFO threshold interrupt */}}
\DoxyCodeLine{04060         ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR3, USART\_CR3\_TXFTIE);}
\DoxyCodeLine{04061 }
\DoxyCodeLine{04062         \textcolor{comment}{/* Enable the UART Transmit Complete Interrupt */}}
\DoxyCodeLine{04063         ATOMIC\_SET\_BIT(huart-\/>Instance-\/>CR1, USART\_CR1\_TCIE);}
\DoxyCodeLine{04064 }
\DoxyCodeLine{04065         \textcolor{keywordflow}{break}; \textcolor{comment}{/* force exit loop */}}
\DoxyCodeLine{04066       \}}
\DoxyCodeLine{04067       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (READ\_BIT(huart-\/>Instance-\/>ISR, USART\_ISR\_TXE\_TXFNF) != 0U)}
\DoxyCodeLine{04068       \{}
\DoxyCodeLine{04069         huart-\/>Instance-\/>TDR = (uint8\_t)(*huart-\/>pTxBuffPtr \& (uint8\_t)0xFF);}
\DoxyCodeLine{04070         huart-\/>pTxBuffPtr++;}
\DoxyCodeLine{04071         huart-\/>TxXferCount-\/-\/;}
\DoxyCodeLine{04072       \}}
\DoxyCodeLine{04073       \textcolor{keywordflow}{else}}
\DoxyCodeLine{04074       \{}
\DoxyCodeLine{04075         \textcolor{comment}{/* Nothing to do */}}
\DoxyCodeLine{04076       \}}
\DoxyCodeLine{04077     \}}
\DoxyCodeLine{04078   \}}
\DoxyCodeLine{04079 \}}
\DoxyCodeLine{04080 }
\DoxyCodeLine{04088 \textcolor{keyword}{static} \textcolor{keywordtype}{void} UART\_TxISR\_16BIT\_FIFOEN(UART\_HandleTypeDef *huart)}
\DoxyCodeLine{04089 \{}
\DoxyCodeLine{04090   \textcolor{keyword}{const} uint16\_t *tmp;}
\DoxyCodeLine{04091   uint16\_t  nb\_tx\_data;}
\DoxyCodeLine{04092 }
\DoxyCodeLine{04093   \textcolor{comment}{/* Check that a Tx process is ongoing */}}
\DoxyCodeLine{04094   \textcolor{keywordflow}{if} (huart-\/>gState == HAL\_UART\_STATE\_BUSY\_TX)}
\DoxyCodeLine{04095   \{}
\DoxyCodeLine{04096     \textcolor{keywordflow}{for} (nb\_tx\_data = huart-\/>NbTxDataToProcess ; nb\_tx\_data > 0U ; nb\_tx\_data-\/-\/)}
\DoxyCodeLine{04097     \{}
\DoxyCodeLine{04098       \textcolor{keywordflow}{if} (huart-\/>TxXferCount == 0U)}
\DoxyCodeLine{04099       \{}
\DoxyCodeLine{04100         \textcolor{comment}{/* Disable the TX FIFO threshold interrupt */}}
\DoxyCodeLine{04101         ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR3, USART\_CR3\_TXFTIE);}
\DoxyCodeLine{04102 }
\DoxyCodeLine{04103         \textcolor{comment}{/* Enable the UART Transmit Complete Interrupt */}}
\DoxyCodeLine{04104         ATOMIC\_SET\_BIT(huart-\/>Instance-\/>CR1, USART\_CR1\_TCIE);}
\DoxyCodeLine{04105 }
\DoxyCodeLine{04106         \textcolor{keywordflow}{break}; \textcolor{comment}{/* force exit loop */}}
\DoxyCodeLine{04107       \}}
\DoxyCodeLine{04108       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (READ\_BIT(huart-\/>Instance-\/>ISR, USART\_ISR\_TXE\_TXFNF) != 0U)}
\DoxyCodeLine{04109       \{}
\DoxyCodeLine{04110         tmp = (\textcolor{keyword}{const} uint16\_t *) huart-\/>pTxBuffPtr;}
\DoxyCodeLine{04111         huart-\/>Instance-\/>TDR = (((uint32\_t)(*tmp)) \& 0x01FFUL);}
\DoxyCodeLine{04112         huart-\/>pTxBuffPtr += 2U;}
\DoxyCodeLine{04113         huart-\/>TxXferCount-\/-\/;}
\DoxyCodeLine{04114       \}}
\DoxyCodeLine{04115       \textcolor{keywordflow}{else}}
\DoxyCodeLine{04116       \{}
\DoxyCodeLine{04117         \textcolor{comment}{/* Nothing to do */}}
\DoxyCodeLine{04118       \}}
\DoxyCodeLine{04119     \}}
\DoxyCodeLine{04120   \}}
\DoxyCodeLine{04121 \}}
\DoxyCodeLine{04122 }
\DoxyCodeLine{04129 \textcolor{keyword}{static} \textcolor{keywordtype}{void} UART\_EndTransmit\_IT(UART\_HandleTypeDef *huart)}
\DoxyCodeLine{04130 \{}
\DoxyCodeLine{04131   \textcolor{comment}{/* Disable the UART Transmit Complete Interrupt */}}
\DoxyCodeLine{04132   ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR1, USART\_CR1\_TCIE);}
\DoxyCodeLine{04133 }
\DoxyCodeLine{04134   \textcolor{comment}{/* Tx process is ended, restore huart-\/>gState to Ready */}}
\DoxyCodeLine{04135   huart-\/>gState = HAL\_UART\_STATE\_READY;}
\DoxyCodeLine{04136 }
\DoxyCodeLine{04137   \textcolor{comment}{/* Cleat TxISR function pointer */}}
\DoxyCodeLine{04138   huart-\/>TxISR = NULL;}
\DoxyCodeLine{04139 }
\DoxyCodeLine{04140 \textcolor{preprocessor}{\#if (USE\_HAL\_UART\_REGISTER\_CALLBACKS == 1)}}
\DoxyCodeLine{04141   \textcolor{comment}{/*Call registered Tx complete callback*/}}
\DoxyCodeLine{04142   huart-\/>TxCpltCallback(huart);}
\DoxyCodeLine{04143 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{04144   \textcolor{comment}{/*Call legacy weak Tx complete callback*/}}
\DoxyCodeLine{04145   HAL\_UART\_TxCpltCallback(huart);}
\DoxyCodeLine{04146 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* USE\_HAL\_UART\_REGISTER\_CALLBACKS */}\textcolor{preprocessor}{}}
\DoxyCodeLine{04147 \}}
\DoxyCodeLine{04148 }
\DoxyCodeLine{04154 \textcolor{keyword}{static} \textcolor{keywordtype}{void} UART\_RxISR\_8BIT(UART\_HandleTypeDef *huart)}
\DoxyCodeLine{04155 \{}
\DoxyCodeLine{04156   uint16\_t uhMask = huart-\/>Mask;}
\DoxyCodeLine{04157   uint16\_t  uhdata;}
\DoxyCodeLine{04158 }
\DoxyCodeLine{04159   \textcolor{comment}{/* Check that a Rx process is ongoing */}}
\DoxyCodeLine{04160   \textcolor{keywordflow}{if} (huart-\/>RxState == HAL\_UART\_STATE\_BUSY\_RX)}
\DoxyCodeLine{04161   \{}
\DoxyCodeLine{04162     uhdata = (uint16\_t) READ\_REG(huart-\/>Instance-\/>RDR);}
\DoxyCodeLine{04163     *huart-\/>pRxBuffPtr = (uint8\_t)(uhdata \& (uint8\_t)uhMask);}
\DoxyCodeLine{04164     huart-\/>pRxBuffPtr++;}
\DoxyCodeLine{04165     huart-\/>RxXferCount-\/-\/;}
\DoxyCodeLine{04166 }
\DoxyCodeLine{04167     \textcolor{keywordflow}{if} (huart-\/>RxXferCount == 0U)}
\DoxyCodeLine{04168     \{}
\DoxyCodeLine{04169       \textcolor{comment}{/* Disable the UART Parity Error Interrupt and RXNE interrupts */}}
\DoxyCodeLine{04170       ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR1, (USART\_CR1\_RXNEIE\_RXFNEIE | USART\_CR1\_PEIE));}
\DoxyCodeLine{04171 }
\DoxyCodeLine{04172       \textcolor{comment}{/* Disable the UART Error Interrupt: (Frame error, noise error, overrun error) */}}
\DoxyCodeLine{04173       ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR3, USART\_CR3\_EIE);}
\DoxyCodeLine{04174 }
\DoxyCodeLine{04175       \textcolor{comment}{/* Rx process is completed, restore huart-\/>RxState to Ready */}}
\DoxyCodeLine{04176       huart-\/>RxState = HAL\_UART\_STATE\_READY;}
\DoxyCodeLine{04177 }
\DoxyCodeLine{04178       \textcolor{comment}{/* Clear RxISR function pointer */}}
\DoxyCodeLine{04179       huart-\/>RxISR = NULL;}
\DoxyCodeLine{04180 }
\DoxyCodeLine{04181       \textcolor{comment}{/* Check current reception Mode :}}
\DoxyCodeLine{04182 \textcolor{comment}{         If Reception till IDLE event has been selected : */}}
\DoxyCodeLine{04183       \textcolor{keywordflow}{if} (huart-\/>ReceptionType == HAL\_UART\_RECEPTION\_TOIDLE)}
\DoxyCodeLine{04184       \{}
\DoxyCodeLine{04185         \textcolor{comment}{/* Set reception type to Standard */}}
\DoxyCodeLine{04186         huart-\/>ReceptionType = HAL\_UART\_RECEPTION\_STANDARD;}
\DoxyCodeLine{04187 }
\DoxyCodeLine{04188         \textcolor{comment}{/* Disable IDLE interrupt */}}
\DoxyCodeLine{04189         ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR1, USART\_CR1\_IDLEIE);}
\DoxyCodeLine{04190 }
\DoxyCodeLine{04191         \textcolor{keywordflow}{if} (\_\_HAL\_UART\_GET\_FLAG(huart, UART\_FLAG\_IDLE) == SET)}
\DoxyCodeLine{04192         \{}
\DoxyCodeLine{04193           \textcolor{comment}{/* Clear IDLE Flag */}}
\DoxyCodeLine{04194           \_\_HAL\_UART\_CLEAR\_FLAG(huart, UART\_CLEAR\_IDLEF);}
\DoxyCodeLine{04195         \}}
\DoxyCodeLine{04196 \textcolor{preprocessor}{\#if (USE\_HAL\_UART\_REGISTER\_CALLBACKS == 1)}}
\DoxyCodeLine{04197         \textcolor{comment}{/*Call registered Rx Event callback*/}}
\DoxyCodeLine{04198         huart-\/>RxEventCallback(huart, huart-\/>RxXferSize);}
\DoxyCodeLine{04199 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{04200         \textcolor{comment}{/*Call legacy weak Rx Event callback*/}}
\DoxyCodeLine{04201         HAL\_UARTEx\_RxEventCallback(huart, huart-\/>RxXferSize);}
\DoxyCodeLine{04202 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* (USE\_HAL\_UART\_REGISTER\_CALLBACKS) */}\textcolor{preprocessor}{}}
\DoxyCodeLine{04203       \}}
\DoxyCodeLine{04204       \textcolor{keywordflow}{else}}
\DoxyCodeLine{04205       \{}
\DoxyCodeLine{04206         \textcolor{comment}{/* Standard reception API called */}}
\DoxyCodeLine{04207 \textcolor{preprocessor}{\#if (USE\_HAL\_UART\_REGISTER\_CALLBACKS == 1)}}
\DoxyCodeLine{04208         \textcolor{comment}{/*Call registered Rx complete callback*/}}
\DoxyCodeLine{04209         huart-\/>RxCpltCallback(huart);}
\DoxyCodeLine{04210 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{04211         \textcolor{comment}{/*Call legacy weak Rx complete callback*/}}
\DoxyCodeLine{04212         HAL\_UART\_RxCpltCallback(huart);}
\DoxyCodeLine{04213 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* USE\_HAL\_UART\_REGISTER\_CALLBACKS */}\textcolor{preprocessor}{}}
\DoxyCodeLine{04214       \}}
\DoxyCodeLine{04215     \}}
\DoxyCodeLine{04216   \}}
\DoxyCodeLine{04217   \textcolor{keywordflow}{else}}
\DoxyCodeLine{04218   \{}
\DoxyCodeLine{04219     \textcolor{comment}{/* Clear RXNE interrupt flag */}}
\DoxyCodeLine{04220     \_\_HAL\_UART\_SEND\_REQ(huart, UART\_RXDATA\_FLUSH\_REQUEST);}
\DoxyCodeLine{04221   \}}
\DoxyCodeLine{04222 \}}
\DoxyCodeLine{04223 }
\DoxyCodeLine{04231 \textcolor{keyword}{static} \textcolor{keywordtype}{void} UART\_RxISR\_16BIT(UART\_HandleTypeDef *huart)}
\DoxyCodeLine{04232 \{}
\DoxyCodeLine{04233   uint16\_t *tmp;}
\DoxyCodeLine{04234   uint16\_t uhMask = huart-\/>Mask;}
\DoxyCodeLine{04235   uint16\_t  uhdata;}
\DoxyCodeLine{04236 }
\DoxyCodeLine{04237   \textcolor{comment}{/* Check that a Rx process is ongoing */}}
\DoxyCodeLine{04238   \textcolor{keywordflow}{if} (huart-\/>RxState == HAL\_UART\_STATE\_BUSY\_RX)}
\DoxyCodeLine{04239   \{}
\DoxyCodeLine{04240     uhdata = (uint16\_t) READ\_REG(huart-\/>Instance-\/>RDR);}
\DoxyCodeLine{04241     tmp = (uint16\_t *) huart-\/>pRxBuffPtr ;}
\DoxyCodeLine{04242     *tmp = (uint16\_t)(uhdata \& uhMask);}
\DoxyCodeLine{04243     huart-\/>pRxBuffPtr += 2U;}
\DoxyCodeLine{04244     huart-\/>RxXferCount-\/-\/;}
\DoxyCodeLine{04245 }
\DoxyCodeLine{04246     \textcolor{keywordflow}{if} (huart-\/>RxXferCount == 0U)}
\DoxyCodeLine{04247     \{}
\DoxyCodeLine{04248       \textcolor{comment}{/* Disable the UART Parity Error Interrupt and RXNE interrupt*/}}
\DoxyCodeLine{04249       ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR1, (USART\_CR1\_RXNEIE\_RXFNEIE | USART\_CR1\_PEIE));}
\DoxyCodeLine{04250 }
\DoxyCodeLine{04251       \textcolor{comment}{/* Disable the UART Error Interrupt: (Frame error, noise error, overrun error) */}}
\DoxyCodeLine{04252       ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR3, USART\_CR3\_EIE);}
\DoxyCodeLine{04253 }
\DoxyCodeLine{04254       \textcolor{comment}{/* Rx process is completed, restore huart-\/>RxState to Ready */}}
\DoxyCodeLine{04255       huart-\/>RxState = HAL\_UART\_STATE\_READY;}
\DoxyCodeLine{04256 }
\DoxyCodeLine{04257       \textcolor{comment}{/* Clear RxISR function pointer */}}
\DoxyCodeLine{04258       huart-\/>RxISR = NULL;}
\DoxyCodeLine{04259 }
\DoxyCodeLine{04260       \textcolor{comment}{/* Check current reception Mode :}}
\DoxyCodeLine{04261 \textcolor{comment}{         If Reception till IDLE event has been selected : */}}
\DoxyCodeLine{04262       \textcolor{keywordflow}{if} (huart-\/>ReceptionType == HAL\_UART\_RECEPTION\_TOIDLE)}
\DoxyCodeLine{04263       \{}
\DoxyCodeLine{04264         \textcolor{comment}{/* Set reception type to Standard */}}
\DoxyCodeLine{04265         huart-\/>ReceptionType = HAL\_UART\_RECEPTION\_STANDARD;}
\DoxyCodeLine{04266 }
\DoxyCodeLine{04267         \textcolor{comment}{/* Disable IDLE interrupt */}}
\DoxyCodeLine{04268         ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR1, USART\_CR1\_IDLEIE);}
\DoxyCodeLine{04269 }
\DoxyCodeLine{04270         \textcolor{keywordflow}{if} (\_\_HAL\_UART\_GET\_FLAG(huart, UART\_FLAG\_IDLE) == SET)}
\DoxyCodeLine{04271         \{}
\DoxyCodeLine{04272           \textcolor{comment}{/* Clear IDLE Flag */}}
\DoxyCodeLine{04273           \_\_HAL\_UART\_CLEAR\_FLAG(huart, UART\_CLEAR\_IDLEF);}
\DoxyCodeLine{04274         \}}
\DoxyCodeLine{04275 \textcolor{preprocessor}{\#if (USE\_HAL\_UART\_REGISTER\_CALLBACKS == 1)}}
\DoxyCodeLine{04276         \textcolor{comment}{/*Call registered Rx Event callback*/}}
\DoxyCodeLine{04277         huart-\/>RxEventCallback(huart, huart-\/>RxXferSize);}
\DoxyCodeLine{04278 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{04279         \textcolor{comment}{/*Call legacy weak Rx Event callback*/}}
\DoxyCodeLine{04280         HAL\_UARTEx\_RxEventCallback(huart, huart-\/>RxXferSize);}
\DoxyCodeLine{04281 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* (USE\_HAL\_UART\_REGISTER\_CALLBACKS) */}\textcolor{preprocessor}{}}
\DoxyCodeLine{04282       \}}
\DoxyCodeLine{04283       \textcolor{keywordflow}{else}}
\DoxyCodeLine{04284       \{}
\DoxyCodeLine{04285         \textcolor{comment}{/* Standard reception API called */}}
\DoxyCodeLine{04286 \textcolor{preprocessor}{\#if (USE\_HAL\_UART\_REGISTER\_CALLBACKS == 1)}}
\DoxyCodeLine{04287         \textcolor{comment}{/*Call registered Rx complete callback*/}}
\DoxyCodeLine{04288         huart-\/>RxCpltCallback(huart);}
\DoxyCodeLine{04289 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{04290         \textcolor{comment}{/*Call legacy weak Rx complete callback*/}}
\DoxyCodeLine{04291         HAL\_UART\_RxCpltCallback(huart);}
\DoxyCodeLine{04292 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* USE\_HAL\_UART\_REGISTER\_CALLBACKS */}\textcolor{preprocessor}{}}
\DoxyCodeLine{04293       \}}
\DoxyCodeLine{04294     \}}
\DoxyCodeLine{04295   \}}
\DoxyCodeLine{04296   \textcolor{keywordflow}{else}}
\DoxyCodeLine{04297   \{}
\DoxyCodeLine{04298     \textcolor{comment}{/* Clear RXNE interrupt flag */}}
\DoxyCodeLine{04299     \_\_HAL\_UART\_SEND\_REQ(huart, UART\_RXDATA\_FLUSH\_REQUEST);}
\DoxyCodeLine{04300   \}}
\DoxyCodeLine{04301 \}}
\DoxyCodeLine{04302 }
\DoxyCodeLine{04310 \textcolor{keyword}{static} \textcolor{keywordtype}{void} UART\_RxISR\_8BIT\_FIFOEN(UART\_HandleTypeDef *huart)}
\DoxyCodeLine{04311 \{}
\DoxyCodeLine{04312   uint16\_t  uhMask = huart-\/>Mask;}
\DoxyCodeLine{04313   uint16\_t  uhdata;}
\DoxyCodeLine{04314   uint16\_t  nb\_rx\_data;}
\DoxyCodeLine{04315   uint16\_t  rxdatacount;}
\DoxyCodeLine{04316   uint32\_t  isrflags = READ\_REG(huart-\/>Instance-\/>ISR);}
\DoxyCodeLine{04317   uint32\_t  cr1its   = READ\_REG(huart-\/>Instance-\/>CR1);}
\DoxyCodeLine{04318   uint32\_t  cr3its   = READ\_REG(huart-\/>Instance-\/>CR3);}
\DoxyCodeLine{04319 }
\DoxyCodeLine{04320   \textcolor{comment}{/* Check that a Rx process is ongoing */}}
\DoxyCodeLine{04321   \textcolor{keywordflow}{if} (huart-\/>RxState == HAL\_UART\_STATE\_BUSY\_RX)}
\DoxyCodeLine{04322   \{}
\DoxyCodeLine{04323     nb\_rx\_data = huart-\/>NbRxDataToProcess;}
\DoxyCodeLine{04324     \textcolor{keywordflow}{while} ((nb\_rx\_data > 0U) \&\& ((isrflags \& USART\_ISR\_RXNE\_RXFNE) != 0U))}
\DoxyCodeLine{04325     \{}
\DoxyCodeLine{04326       uhdata = (uint16\_t) READ\_REG(huart-\/>Instance-\/>RDR);}
\DoxyCodeLine{04327       *huart-\/>pRxBuffPtr = (uint8\_t)(uhdata \& (uint8\_t)uhMask);}
\DoxyCodeLine{04328       huart-\/>pRxBuffPtr++;}
\DoxyCodeLine{04329       huart-\/>RxXferCount-\/-\/;}
\DoxyCodeLine{04330       isrflags = READ\_REG(huart-\/>Instance-\/>ISR);}
\DoxyCodeLine{04331 }
\DoxyCodeLine{04332       \textcolor{comment}{/* If some non blocking errors occurred */}}
\DoxyCodeLine{04333       \textcolor{keywordflow}{if} ((isrflags \& (USART\_ISR\_PE | USART\_ISR\_FE | USART\_ISR\_NE)) != 0U)}
\DoxyCodeLine{04334       \{}
\DoxyCodeLine{04335         \textcolor{comment}{/* UART parity error interrupt occurred -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{04336         \textcolor{keywordflow}{if} (((isrflags \& USART\_ISR\_PE) != 0U) \&\& ((cr1its \& USART\_CR1\_PEIE) != 0U))}
\DoxyCodeLine{04337         \{}
\DoxyCodeLine{04338           \_\_HAL\_UART\_CLEAR\_FLAG(huart, UART\_CLEAR\_PEF);}
\DoxyCodeLine{04339 }
\DoxyCodeLine{04340           huart-\/>ErrorCode |= HAL\_UART\_ERROR\_PE;}
\DoxyCodeLine{04341         \}}
\DoxyCodeLine{04342 }
\DoxyCodeLine{04343         \textcolor{comment}{/* UART frame error interrupt occurred -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{04344         \textcolor{keywordflow}{if} (((isrflags \& USART\_ISR\_FE) != 0U) \&\& ((cr3its \& USART\_CR3\_EIE) != 0U))}
\DoxyCodeLine{04345         \{}
\DoxyCodeLine{04346           \_\_HAL\_UART\_CLEAR\_FLAG(huart, UART\_CLEAR\_FEF);}
\DoxyCodeLine{04347 }
\DoxyCodeLine{04348           huart-\/>ErrorCode |= HAL\_UART\_ERROR\_FE;}
\DoxyCodeLine{04349         \}}
\DoxyCodeLine{04350 }
\DoxyCodeLine{04351         \textcolor{comment}{/* UART noise error interrupt occurred -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{04352         \textcolor{keywordflow}{if} (((isrflags \& USART\_ISR\_NE) != 0U) \&\& ((cr3its \& USART\_CR3\_EIE) != 0U))}
\DoxyCodeLine{04353         \{}
\DoxyCodeLine{04354           \_\_HAL\_UART\_CLEAR\_FLAG(huart, UART\_CLEAR\_NEF);}
\DoxyCodeLine{04355 }
\DoxyCodeLine{04356           huart-\/>ErrorCode |= HAL\_UART\_ERROR\_NE;}
\DoxyCodeLine{04357         \}}
\DoxyCodeLine{04358 }
\DoxyCodeLine{04359         \textcolor{comment}{/* Call UART Error Call back function if need be -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{04360         \textcolor{keywordflow}{if} (huart-\/>ErrorCode != HAL\_UART\_ERROR\_NONE)}
\DoxyCodeLine{04361         \{}
\DoxyCodeLine{04362           \textcolor{comment}{/* Non Blocking error : transfer could go on.}}
\DoxyCodeLine{04363 \textcolor{comment}{          Error is notified to user through user error callback */}}
\DoxyCodeLine{04364 \textcolor{preprocessor}{\#if (USE\_HAL\_UART\_REGISTER\_CALLBACKS == 1)}}
\DoxyCodeLine{04365           \textcolor{comment}{/*Call registered error callback*/}}
\DoxyCodeLine{04366           huart-\/>ErrorCallback(huart);}
\DoxyCodeLine{04367 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{04368           \textcolor{comment}{/*Call legacy weak error callback*/}}
\DoxyCodeLine{04369           HAL\_UART\_ErrorCallback(huart);}
\DoxyCodeLine{04370 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* USE\_HAL\_UART\_REGISTER\_CALLBACKS */}\textcolor{preprocessor}{}}
\DoxyCodeLine{04371           huart-\/>ErrorCode = HAL\_UART\_ERROR\_NONE;}
\DoxyCodeLine{04372         \}}
\DoxyCodeLine{04373       \}}
\DoxyCodeLine{04374 }
\DoxyCodeLine{04375       \textcolor{keywordflow}{if} (huart-\/>RxXferCount == 0U)}
\DoxyCodeLine{04376       \{}
\DoxyCodeLine{04377         \textcolor{comment}{/* Disable the UART Parity Error Interrupt and RXFT interrupt*/}}
\DoxyCodeLine{04378         ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR1, USART\_CR1\_PEIE);}
\DoxyCodeLine{04379 }
\DoxyCodeLine{04380         \textcolor{comment}{/* Disable the UART Error Interrupt: (Frame error, noise error, overrun error)}}
\DoxyCodeLine{04381 \textcolor{comment}{           and RX FIFO Threshold interrupt */}}
\DoxyCodeLine{04382         ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR3, (USART\_CR3\_EIE | USART\_CR3\_RXFTIE));}
\DoxyCodeLine{04383 }
\DoxyCodeLine{04384         \textcolor{comment}{/* Rx process is completed, restore huart-\/>RxState to Ready */}}
\DoxyCodeLine{04385         huart-\/>RxState = HAL\_UART\_STATE\_READY;}
\DoxyCodeLine{04386 }
\DoxyCodeLine{04387         \textcolor{comment}{/* Clear RxISR function pointer */}}
\DoxyCodeLine{04388         huart-\/>RxISR = NULL;}
\DoxyCodeLine{04389 }
\DoxyCodeLine{04390         \textcolor{comment}{/* Check current reception Mode :}}
\DoxyCodeLine{04391 \textcolor{comment}{           If Reception till IDLE event has been selected : */}}
\DoxyCodeLine{04392         \textcolor{keywordflow}{if} (huart-\/>ReceptionType == HAL\_UART\_RECEPTION\_TOIDLE)}
\DoxyCodeLine{04393         \{}
\DoxyCodeLine{04394           \textcolor{comment}{/* Set reception type to Standard */}}
\DoxyCodeLine{04395           huart-\/>ReceptionType = HAL\_UART\_RECEPTION\_STANDARD;}
\DoxyCodeLine{04396 }
\DoxyCodeLine{04397           \textcolor{comment}{/* Disable IDLE interrupt */}}
\DoxyCodeLine{04398           ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR1, USART\_CR1\_IDLEIE);}
\DoxyCodeLine{04399 }
\DoxyCodeLine{04400           \textcolor{keywordflow}{if} (\_\_HAL\_UART\_GET\_FLAG(huart, UART\_FLAG\_IDLE) == SET)}
\DoxyCodeLine{04401           \{}
\DoxyCodeLine{04402             \textcolor{comment}{/* Clear IDLE Flag */}}
\DoxyCodeLine{04403             \_\_HAL\_UART\_CLEAR\_FLAG(huart, UART\_CLEAR\_IDLEF);}
\DoxyCodeLine{04404           \}}
\DoxyCodeLine{04405 \textcolor{preprocessor}{\#if (USE\_HAL\_UART\_REGISTER\_CALLBACKS == 1)}}
\DoxyCodeLine{04406           \textcolor{comment}{/*Call registered Rx Event callback*/}}
\DoxyCodeLine{04407           huart-\/>RxEventCallback(huart, huart-\/>RxXferSize);}
\DoxyCodeLine{04408 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{04409           \textcolor{comment}{/*Call legacy weak Rx Event callback*/}}
\DoxyCodeLine{04410           HAL\_UARTEx\_RxEventCallback(huart, huart-\/>RxXferSize);}
\DoxyCodeLine{04411 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* (USE\_HAL\_UART\_REGISTER\_CALLBACKS) */}\textcolor{preprocessor}{}}
\DoxyCodeLine{04412         \}}
\DoxyCodeLine{04413         \textcolor{keywordflow}{else}}
\DoxyCodeLine{04414         \{}
\DoxyCodeLine{04415           \textcolor{comment}{/* Standard reception API called */}}
\DoxyCodeLine{04416 \textcolor{preprocessor}{\#if (USE\_HAL\_UART\_REGISTER\_CALLBACKS == 1)}}
\DoxyCodeLine{04417           \textcolor{comment}{/*Call registered Rx complete callback*/}}
\DoxyCodeLine{04418           huart-\/>RxCpltCallback(huart);}
\DoxyCodeLine{04419 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{04420           \textcolor{comment}{/*Call legacy weak Rx complete callback*/}}
\DoxyCodeLine{04421           HAL\_UART\_RxCpltCallback(huart);}
\DoxyCodeLine{04422 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* USE\_HAL\_UART\_REGISTER\_CALLBACKS */}\textcolor{preprocessor}{}}
\DoxyCodeLine{04423         \}}
\DoxyCodeLine{04424       \}}
\DoxyCodeLine{04425     \}}
\DoxyCodeLine{04426 }
\DoxyCodeLine{04427     \textcolor{comment}{/* When remaining number of bytes to receive is less than the RX FIFO}}
\DoxyCodeLine{04428 \textcolor{comment}{    threshold, next incoming frames are processed as if FIFO mode was}}
\DoxyCodeLine{04429 \textcolor{comment}{    disabled (i.e. one interrupt per received frame).}}
\DoxyCodeLine{04430 \textcolor{comment}{    */}}
\DoxyCodeLine{04431     rxdatacount = huart-\/>RxXferCount;}
\DoxyCodeLine{04432     \textcolor{keywordflow}{if} ((rxdatacount != 0U) \&\& (rxdatacount < huart-\/>NbRxDataToProcess))}
\DoxyCodeLine{04433     \{}
\DoxyCodeLine{04434       \textcolor{comment}{/* Disable the UART RXFT interrupt*/}}
\DoxyCodeLine{04435       ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR3, USART\_CR3\_RXFTIE);}
\DoxyCodeLine{04436 }
\DoxyCodeLine{04437       \textcolor{comment}{/* Update the RxISR function pointer */}}
\DoxyCodeLine{04438       huart-\/>RxISR = UART\_RxISR\_8BIT;}
\DoxyCodeLine{04439 }
\DoxyCodeLine{04440       \textcolor{comment}{/* Enable the UART Data Register Not Empty interrupt */}}
\DoxyCodeLine{04441       ATOMIC\_SET\_BIT(huart-\/>Instance-\/>CR1, USART\_CR1\_RXNEIE\_RXFNEIE);}
\DoxyCodeLine{04442     \}}
\DoxyCodeLine{04443   \}}
\DoxyCodeLine{04444   \textcolor{keywordflow}{else}}
\DoxyCodeLine{04445   \{}
\DoxyCodeLine{04446     \textcolor{comment}{/* Clear RXNE interrupt flag */}}
\DoxyCodeLine{04447     \_\_HAL\_UART\_SEND\_REQ(huart, UART\_RXDATA\_FLUSH\_REQUEST);}
\DoxyCodeLine{04448   \}}
\DoxyCodeLine{04449 \}}
\DoxyCodeLine{04450 }
\DoxyCodeLine{04458 \textcolor{keyword}{static} \textcolor{keywordtype}{void} UART\_RxISR\_16BIT\_FIFOEN(UART\_HandleTypeDef *huart)}
\DoxyCodeLine{04459 \{}
\DoxyCodeLine{04460   uint16\_t *tmp;}
\DoxyCodeLine{04461   uint16\_t  uhMask = huart-\/>Mask;}
\DoxyCodeLine{04462   uint16\_t  uhdata;}
\DoxyCodeLine{04463   uint16\_t  nb\_rx\_data;}
\DoxyCodeLine{04464   uint16\_t  rxdatacount;}
\DoxyCodeLine{04465   uint32\_t  isrflags = READ\_REG(huart-\/>Instance-\/>ISR);}
\DoxyCodeLine{04466   uint32\_t  cr1its   = READ\_REG(huart-\/>Instance-\/>CR1);}
\DoxyCodeLine{04467   uint32\_t  cr3its   = READ\_REG(huart-\/>Instance-\/>CR3);}
\DoxyCodeLine{04468 }
\DoxyCodeLine{04469   \textcolor{comment}{/* Check that a Rx process is ongoing */}}
\DoxyCodeLine{04470   \textcolor{keywordflow}{if} (huart-\/>RxState == HAL\_UART\_STATE\_BUSY\_RX)}
\DoxyCodeLine{04471   \{}
\DoxyCodeLine{04472     nb\_rx\_data = huart-\/>NbRxDataToProcess;}
\DoxyCodeLine{04473     \textcolor{keywordflow}{while} ((nb\_rx\_data > 0U) \&\& ((isrflags \& USART\_ISR\_RXNE\_RXFNE) != 0U))}
\DoxyCodeLine{04474     \{}
\DoxyCodeLine{04475       uhdata = (uint16\_t) READ\_REG(huart-\/>Instance-\/>RDR);}
\DoxyCodeLine{04476       tmp = (uint16\_t *) huart-\/>pRxBuffPtr ;}
\DoxyCodeLine{04477       *tmp = (uint16\_t)(uhdata \& uhMask);}
\DoxyCodeLine{04478       huart-\/>pRxBuffPtr += 2U;}
\DoxyCodeLine{04479       huart-\/>RxXferCount-\/-\/;}
\DoxyCodeLine{04480       isrflags = READ\_REG(huart-\/>Instance-\/>ISR);}
\DoxyCodeLine{04481 }
\DoxyCodeLine{04482       \textcolor{comment}{/* If some non blocking errors occurred */}}
\DoxyCodeLine{04483       \textcolor{keywordflow}{if} ((isrflags \& (USART\_ISR\_PE | USART\_ISR\_FE | USART\_ISR\_NE)) != 0U)}
\DoxyCodeLine{04484       \{}
\DoxyCodeLine{04485         \textcolor{comment}{/* UART parity error interrupt occurred -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{04486         \textcolor{keywordflow}{if} (((isrflags \& USART\_ISR\_PE) != 0U) \&\& ((cr1its \& USART\_CR1\_PEIE) != 0U))}
\DoxyCodeLine{04487         \{}
\DoxyCodeLine{04488           \_\_HAL\_UART\_CLEAR\_FLAG(huart, UART\_CLEAR\_PEF);}
\DoxyCodeLine{04489 }
\DoxyCodeLine{04490           huart-\/>ErrorCode |= HAL\_UART\_ERROR\_PE;}
\DoxyCodeLine{04491         \}}
\DoxyCodeLine{04492 }
\DoxyCodeLine{04493         \textcolor{comment}{/* UART frame error interrupt occurred -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{04494         \textcolor{keywordflow}{if} (((isrflags \& USART\_ISR\_FE) != 0U) \&\& ((cr3its \& USART\_CR3\_EIE) != 0U))}
\DoxyCodeLine{04495         \{}
\DoxyCodeLine{04496           \_\_HAL\_UART\_CLEAR\_FLAG(huart, UART\_CLEAR\_FEF);}
\DoxyCodeLine{04497 }
\DoxyCodeLine{04498           huart-\/>ErrorCode |= HAL\_UART\_ERROR\_FE;}
\DoxyCodeLine{04499         \}}
\DoxyCodeLine{04500 }
\DoxyCodeLine{04501         \textcolor{comment}{/* UART noise error interrupt occurred -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{04502         \textcolor{keywordflow}{if} (((isrflags \& USART\_ISR\_NE) != 0U) \&\& ((cr3its \& USART\_CR3\_EIE) != 0U))}
\DoxyCodeLine{04503         \{}
\DoxyCodeLine{04504           \_\_HAL\_UART\_CLEAR\_FLAG(huart, UART\_CLEAR\_NEF);}
\DoxyCodeLine{04505 }
\DoxyCodeLine{04506           huart-\/>ErrorCode |= HAL\_UART\_ERROR\_NE;}
\DoxyCodeLine{04507         \}}
\DoxyCodeLine{04508 }
\DoxyCodeLine{04509         \textcolor{comment}{/* Call UART Error Call back function if need be -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{04510         \textcolor{keywordflow}{if} (huart-\/>ErrorCode != HAL\_UART\_ERROR\_NONE)}
\DoxyCodeLine{04511         \{}
\DoxyCodeLine{04512           \textcolor{comment}{/* Non Blocking error : transfer could go on.}}
\DoxyCodeLine{04513 \textcolor{comment}{          Error is notified to user through user error callback */}}
\DoxyCodeLine{04514 \textcolor{preprocessor}{\#if (USE\_HAL\_UART\_REGISTER\_CALLBACKS == 1)}}
\DoxyCodeLine{04515           \textcolor{comment}{/*Call registered error callback*/}}
\DoxyCodeLine{04516           huart-\/>ErrorCallback(huart);}
\DoxyCodeLine{04517 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{04518           \textcolor{comment}{/*Call legacy weak error callback*/}}
\DoxyCodeLine{04519           HAL\_UART\_ErrorCallback(huart);}
\DoxyCodeLine{04520 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* USE\_HAL\_UART\_REGISTER\_CALLBACKS */}\textcolor{preprocessor}{}}
\DoxyCodeLine{04521           huart-\/>ErrorCode = HAL\_UART\_ERROR\_NONE;}
\DoxyCodeLine{04522         \}}
\DoxyCodeLine{04523       \}}
\DoxyCodeLine{04524 }
\DoxyCodeLine{04525       \textcolor{keywordflow}{if} (huart-\/>RxXferCount == 0U)}
\DoxyCodeLine{04526       \{}
\DoxyCodeLine{04527         \textcolor{comment}{/* Disable the UART Parity Error Interrupt and RXFT interrupt*/}}
\DoxyCodeLine{04528         ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR1, USART\_CR1\_PEIE);}
\DoxyCodeLine{04529 }
\DoxyCodeLine{04530         \textcolor{comment}{/* Disable the UART Error Interrupt: (Frame error, noise error, overrun error)}}
\DoxyCodeLine{04531 \textcolor{comment}{           and RX FIFO Threshold interrupt */}}
\DoxyCodeLine{04532         ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR3, (USART\_CR3\_EIE | USART\_CR3\_RXFTIE));}
\DoxyCodeLine{04533 }
\DoxyCodeLine{04534         \textcolor{comment}{/* Rx process is completed, restore huart-\/>RxState to Ready */}}
\DoxyCodeLine{04535         huart-\/>RxState = HAL\_UART\_STATE\_READY;}
\DoxyCodeLine{04536 }
\DoxyCodeLine{04537         \textcolor{comment}{/* Clear RxISR function pointer */}}
\DoxyCodeLine{04538         huart-\/>RxISR = NULL;}
\DoxyCodeLine{04539 }
\DoxyCodeLine{04540         \textcolor{comment}{/* Check current reception Mode :}}
\DoxyCodeLine{04541 \textcolor{comment}{           If Reception till IDLE event has been selected : */}}
\DoxyCodeLine{04542         \textcolor{keywordflow}{if} (huart-\/>ReceptionType == HAL\_UART\_RECEPTION\_TOIDLE)}
\DoxyCodeLine{04543         \{}
\DoxyCodeLine{04544           \textcolor{comment}{/* Set reception type to Standard */}}
\DoxyCodeLine{04545           huart-\/>ReceptionType = HAL\_UART\_RECEPTION\_STANDARD;}
\DoxyCodeLine{04546 }
\DoxyCodeLine{04547           \textcolor{comment}{/* Disable IDLE interrupt */}}
\DoxyCodeLine{04548           ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR1, USART\_CR1\_IDLEIE);}
\DoxyCodeLine{04549 }
\DoxyCodeLine{04550           \textcolor{keywordflow}{if} (\_\_HAL\_UART\_GET\_FLAG(huart, UART\_FLAG\_IDLE) == SET)}
\DoxyCodeLine{04551           \{}
\DoxyCodeLine{04552             \textcolor{comment}{/* Clear IDLE Flag */}}
\DoxyCodeLine{04553             \_\_HAL\_UART\_CLEAR\_FLAG(huart, UART\_CLEAR\_IDLEF);}
\DoxyCodeLine{04554           \}}
\DoxyCodeLine{04555 \textcolor{preprocessor}{\#if (USE\_HAL\_UART\_REGISTER\_CALLBACKS == 1)}}
\DoxyCodeLine{04556           \textcolor{comment}{/*Call registered Rx Event callback*/}}
\DoxyCodeLine{04557           huart-\/>RxEventCallback(huart, huart-\/>RxXferSize);}
\DoxyCodeLine{04558 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{04559           \textcolor{comment}{/*Call legacy weak Rx Event callback*/}}
\DoxyCodeLine{04560           HAL\_UARTEx\_RxEventCallback(huart, huart-\/>RxXferSize);}
\DoxyCodeLine{04561 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* (USE\_HAL\_UART\_REGISTER\_CALLBACKS) */}\textcolor{preprocessor}{}}
\DoxyCodeLine{04562         \}}
\DoxyCodeLine{04563         \textcolor{keywordflow}{else}}
\DoxyCodeLine{04564         \{}
\DoxyCodeLine{04565           \textcolor{comment}{/* Standard reception API called */}}
\DoxyCodeLine{04566 \textcolor{preprocessor}{\#if (USE\_HAL\_UART\_REGISTER\_CALLBACKS == 1)}}
\DoxyCodeLine{04567           \textcolor{comment}{/*Call registered Rx complete callback*/}}
\DoxyCodeLine{04568           huart-\/>RxCpltCallback(huart);}
\DoxyCodeLine{04569 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{04570           \textcolor{comment}{/*Call legacy weak Rx complete callback*/}}
\DoxyCodeLine{04571           HAL\_UART\_RxCpltCallback(huart);}
\DoxyCodeLine{04572 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* USE\_HAL\_UART\_REGISTER\_CALLBACKS */}\textcolor{preprocessor}{}}
\DoxyCodeLine{04573         \}}
\DoxyCodeLine{04574       \}}
\DoxyCodeLine{04575     \}}
\DoxyCodeLine{04576 }
\DoxyCodeLine{04577     \textcolor{comment}{/* When remaining number of bytes to receive is less than the RX FIFO}}
\DoxyCodeLine{04578 \textcolor{comment}{    threshold, next incoming frames are processed as if FIFO mode was}}
\DoxyCodeLine{04579 \textcolor{comment}{    disabled (i.e. one interrupt per received frame).}}
\DoxyCodeLine{04580 \textcolor{comment}{    */}}
\DoxyCodeLine{04581     rxdatacount = huart-\/>RxXferCount;}
\DoxyCodeLine{04582     \textcolor{keywordflow}{if} ((rxdatacount != 0U) \&\& (rxdatacount < huart-\/>NbRxDataToProcess))}
\DoxyCodeLine{04583     \{}
\DoxyCodeLine{04584       \textcolor{comment}{/* Disable the UART RXFT interrupt*/}}
\DoxyCodeLine{04585       ATOMIC\_CLEAR\_BIT(huart-\/>Instance-\/>CR3, USART\_CR3\_RXFTIE);}
\DoxyCodeLine{04586 }
\DoxyCodeLine{04587       \textcolor{comment}{/* Update the RxISR function pointer */}}
\DoxyCodeLine{04588       huart-\/>RxISR = UART\_RxISR\_16BIT;}
\DoxyCodeLine{04589 }
\DoxyCodeLine{04590       \textcolor{comment}{/* Enable the UART Data Register Not Empty interrupt */}}
\DoxyCodeLine{04591       ATOMIC\_SET\_BIT(huart-\/>Instance-\/>CR1, USART\_CR1\_RXNEIE\_RXFNEIE);}
\DoxyCodeLine{04592     \}}
\DoxyCodeLine{04593   \}}
\DoxyCodeLine{04594   \textcolor{keywordflow}{else}}
\DoxyCodeLine{04595   \{}
\DoxyCodeLine{04596     \textcolor{comment}{/* Clear RXNE interrupt flag */}}
\DoxyCodeLine{04597     \_\_HAL\_UART\_SEND\_REQ(huart, UART\_RXDATA\_FLUSH\_REQUEST);}
\DoxyCodeLine{04598   \}}
\DoxyCodeLine{04599 \}}
\DoxyCodeLine{04600 }
\DoxyCodeLine{04605 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* HAL\_UART\_MODULE\_ENABLED */}\textcolor{preprocessor}{}}

\end{DoxyCode}
